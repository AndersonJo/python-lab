
<!DOCTYPE html>
<html>
<head>
    
    <title>functional programming - &quot;Least Astonishment&quot; in Python: which scope is the Mutable Default Argument in? - Stack Overflow</title>
    <link rel="shortcut icon" href="//cdn.sstatic.net/stackoverflow/img/favicon.ico?v=038622610830">
    <link rel="apple-touch-icon image_src" href="//cdn.sstatic.net/stackoverflow/img/apple-touch-icon.png?v=fd7230a85918">
    <link rel="search" type="application/opensearchdescription+xml" title="Stack Overflow" href="/opensearch.xml">
    <meta name="twitter:card" content="summary">
    <meta name="twitter:domain" content="stackoverflow.com"/>
    <meta name="og:type" content="website" />
    <meta name="og:image" content="http://cdn.sstatic.net/stackoverflow/img/apple-touch-icon@2.png?v=fde65a5a78c6"/>
    <meta name="og:title" content="&quot;Least Astonishment&quot; in Python: which scope is the Mutable Default Argument in?" />
    <meta name="og:description" content="Anyone tinkering with Python long enough has been bitten (or torn to pieces) by the following issue:

def foo(a=[]):
    a.append(5)
    return a


Python novices would expect this function to always " />
    <meta name="og:url" content="http://stackoverflow.com/questions/1132941/least-astonishment-in-python-which-scope-is-the-mutable-default-argument-in"/>
    <link rel="canonical" href="http://stackoverflow.com/questions/1132941/least-astonishment-in-python-which-scope-is-the-mutable-default-argument-in" />

    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
    <script src="//cdn.sstatic.net/Js/stub.en.js?v=336dd700402e"></script>
    <link rel="stylesheet" type="text/css" href="//cdn.sstatic.net/stackoverflow/all.css?v=86c1a91ea87b">
    
    <link rel="alternate" type="application/atom+xml" title="Feed for question &#39;&quot;Least Astonishment&quot; in Python: which scope is the Mutable Default Argument in?&#39;" href="/feeds/question/1132941">
    <script>
        
        StackExchange.ready(function () {
            StackExchange.using("postValidation", function () {
                StackExchange.postValidation.initOnBlurAndSubmit($('#post-form'), 2, 'answer');
            });

            
            StackExchange.question.init({canOpenBounty:true,votesCast:[],totalCommentCount:16,shownCommentCount:5,highlightColor:'#F4A83D',backgroundColor:'#FFF',questionId:1132941});

            styleCode();

                StackExchange.realtime.subscribeToQuestion('1', '1132941');
            
                    });
    </script>


    <script>
        StackExchange.ready(function () {
            StackExchange.realtime.init('wss://qa.sockets.stackexchange.com,ws://qa.sockets.stackexchange.com');
            StackExchange.realtime.subscribeToInboxNotifications();
                    StackExchange.realtime.subscribeToReputationNotifications('1');
                StackExchange.realtime.subscribeToTopBarNotifications('1');
        });
    </script>
    <script>
        StackExchange.init({"locale":"en","stackAuthUrl":"https://stackauth.com","serverTime":1403291242,"networkMetaHostname":"meta.stackexchange.com","styleCode":true,"enableUserHovercards":true,"site":{"name":"Stack Overflow","description":"Q&A for professional and enthusiast programmers","isNoticesTabEnabled":true,"recaptchaPublicKey":"6LdchgIAAAAAAJwGpIzRQSOFaO0pU6s44Xt8aTwc","recaptchaAudioLang":"en","enableNewTagCreationWarning":true,"nonAsciiTags":true,"enableSocialMediaInSharePopup":true},"user":{"fkey":"689846c83837ff0549fab295d71ca40e","isRegistered":true,"userType":3,"userId":878520,"accountId":471007,"gravatar":"<div class=\"gravatar-wrapper-32\"><img src=\"https://www.gravatar.com/avatar/0db68426eaead3153908a42c33205272?s=32&d=identicon&r=PG\" alt=\"\"></div>","profileUrl":"http://stackoverflow.com/users/878520/web-engineer","notificationsUnviewedCount":0,"inboxUnviewedCount":0,"ab":{"welcome_email":{"v":"4","g":1}}}});
        StackExchange.using.setCacheBreakers({"js/prettify-full.en.js":"9a9b75b9d91f","js/moderator.en.js":"0f409c40a6dd","js/full-anon.en.js":"74e78261288e","js/full.en.js":"36551361318c","js/wmd.en.js":"859ce71df8c5","js/third-party/jquery.autocomplete.min.js":"e5f01e97f7c3","js/third-party/jquery.autocomplete.min.en.js":"","js/mobile.en.js":"92402ac43456","js/help.en.js":"56d0a3a560ae","js/tageditor.en.js":"97054e846ab4","js/tageditornew.en.js":"d7867ac37406","js/inline-tag-editing.en.js":"de80429b1816","js/revisions.en.js":"8e050c5bb5cd","js/review.en.js":"7266da47371d","js/tagsuggestions.en.js":"6bbb2fcbc47c","js/post-validation.en.js":"8efd545aa235","js/explore-qlist.en.js":"8b8b631bd679","js/events.en.js":"d78b434fac2f"});
        StackExchange.using("gps", function() {
             StackExchange.gps.init(true);
        });
    </script>
    
</head>
<body class="question-page new-topbar">
    <noscript><div id="noscript-padding"></div></noscript>
    <div id="notify-container"></div>
    <div id="overlay-header"></div>
    <div id="custom-header"></div>
<div class="topbar">
    <div class="topbar-wrapper">
        
        <div class="js-topbar-dialog-corral">

<div class="topbar-dialog siteSwitcher-dialog dno">
    <div class="header">
        <h3><a href="//stackoverflow.com">current community</a></h3>
    </div>
    <div class="modal-content current-site-container">
        <ul class="current-site">
                <li>
                        <div class="related-links">
            <a href="http://chat.stackoverflow.com"     data-gps-track="site_switcher.click({ item_type:6 })"
>chat</a>
                    <a href="http://blog.stackoverflow.com"     data-gps-track="site_switcher.click({ item_type:7 })"
>blog</a>
                    <a href="/users/logout"     data-gps-track="site_switcher.click({ item_type:8 })"
>log out</a>
    </div>




    <a href="//stackoverflow.com"
       class="current-site-link site-link js-gps-track"
       data-id="1"
       data-gps-track="
        site_switcher.click({ item_type:3 })">
        <div class="site-icon favicon favicon-stackoverflow" title="Stack Overflow"></div>
        Stack Overflow
    </a>

                </li>
                <li class="related-site">
                        <div class="L-shaped-icon-container">
        <span class="L-shaped-icon"></span>
    </div>
    

                    



    <a href="http://meta.stackoverflow.com"
       class="site-link js-gps-track"
       data-id="552"
       data-gps-track="
            site.switch({ target_site:552, item_type:3 }),
        site_switcher.click({ item_type:4 })">
        <div class="site-icon favicon favicon-stackoverflowmeta" title="Meta Stack Overflow"></div>
        Meta Stack Overflow
    </a>

                </li>
                            <li class="related-site">
                        <div class="L-shaped-icon-container">
        <span class="L-shaped-icon"></span>
    </div>

                    <a class="site-link"
                       href="//careers.stackoverflow.com"
                            data-gps-track="site_switcher.click({ item_type:9 })"
>
                        <div class="site-icon favicon favicon-careers" title="Stack Overflow Careers"></div>
                        Careers 2.0
                    </a>
                </li>
        </ul>
    </div>
    
    <div class="header" id="your-communities-header">
        <h3>
                <a href="//stackexchange.com/users/471007/?tab=accounts">your communities</a>
        </h3>
            
            <a href="#" id="edit-pinned-sites">edit</a>
            <a href="#" id="cancel-pinned-sites" style="display: none;">cancel</a>
    </div>
    <div class="modal-content" id="your-communities-section">
            
            <ul class="my-sites">
                    <li>
                        



    <a href="//stackoverflow.com"
       class="site-link js-gps-track"
       data-id="1"
       data-gps-track="
            site.switch({ target_site:1, item_type:3 }),
        site_switcher.click({ item_type:1 })">
        <div class="site-icon favicon favicon-stackoverflow" title="Stack Overflow"></div>
        Stack Overflow
            <span class="rep-score">338</span>
    </a>

                    </li>
                    <li>
                        



    <a href="//askubuntu.com"
       class="site-link js-gps-track"
       data-id="89"
       data-gps-track="
            site.switch({ target_site:89, item_type:3 }),
        site_switcher.click({ item_type:1 })">
        <div class="site-icon favicon favicon-askubuntu" title="Ask Ubuntu"></div>
        Ask Ubuntu
            <span class="rep-score">101</span>
    </a>

                    </li>
                    <li>
                        



    <a href="//programmers.stackexchange.com"
       class="site-link js-gps-track"
       data-id="131"
       data-gps-track="
            site.switch({ target_site:131, item_type:3 }),
        site_switcher.click({ item_type:1 })">
        <div class="site-icon favicon favicon-programmers" title="Programmers"></div>
        Programmers
            <span class="rep-score">101</span>
    </a>

                    </li>
                    <li>
                        



    <a href="//superuser.com"
       class="site-link js-gps-track"
       data-id="3"
       data-gps-track="
            site.switch({ target_site:3, item_type:3 }),
        site_switcher.click({ item_type:1 })">
        <div class="site-icon favicon favicon-superuser" title="Super User"></div>
        Super User
            <span class="rep-score">101</span>
    </a>

                    </li>
            </ul>
                <div class="pinned-site-editor-container" style="display: none;">
                    <input id="js-site-search-txt"
                           type="text"
                           class="site-filter-input"
                           value=""
                           placeholder="Add a Stack Exchange community"/>
                    <input type="submit" id="pin-site-btn" value="Add" disabled="disabled"/>
                    <ul class="js-found-sites found-sites"></ul>
                    <ul class="pinned-site-list sortable" data-custom-list="False">
                    </ul>
                    <input type="submit" value="Save" id="save-pinned-sites-btn" disabled="disabled"/>
                    <a href="#" id="reset-pinned-sites">reset to default list</a>
                </div>
    </div>
    
    <div class="header">
        <h3><a href="//stackexchange.com/sites">more stack exchange communities</a></h3>
    </div>
    <div class="modal-content">
            <div class="child-content"></div>
    </div>
</div>
        </div>

        <div class="network-items">
            
            <a href="//stackexchange.com" 
               class="topbar-icon icon-site-switcher yes-hover js-site-switcher-button js-gps-track"
               data-gps-track="site_switcher.show"
               title="A list of all 128 Stack Exchange sites">
                <span class="hidden-text">Stack Exchange</span>
            </a>
            
                <a href="#"
                   class="topbar-icon icon-inbox yes-hover js-inbox-button"
                   title="Recent inbox messages">
                    <span class="hidden-text">Inbox</span>
                    <span class="unread-count" style="display:none"></span>
                </a>
                <a href="#" 
                    class="topbar-icon icon-achievements yes-hover js-achievements-button "
                    data-unread-class=""
                    title="Recent achievements: reputation, badges, and privileges earned">
                    <span class="hidden-text">Reputation and Badges</span>
                    <span class="unread-count" style="display:none">
                        
                    </span>
                </a>
        </div>

        <div class="topbar-links">
            
                <a href="/users/878520/web-engineer" class="profile-me">
			        <div class="gravatar-wrapper-24" title="Web Engineer"><img src="https://www.gravatar.com/avatar/0db68426eaead3153908a42c33205272?s=24&d=identicon&r=PG" alt="" class="avatar-me js-avatar-me"></div>
                    <div class="links-container topbar-flair">

                        <span class="reputation" title="your reputation: 338">
                            338
                        </span>
<span title="3 silver badges"><span class="badge2"></span><span class="badgecount">3</span></span><span title="16 bronze badges"><span class="badge3"></span><span class="badgecount">16</span></span>                    </div>
			    </a>
                <div class="links-container">
                    <span class="topbar-menu-links">

                        
                        

    <a href="#" class="icon-help js-help-button" title="Help Center and other resources">
        help
        <span class="triangle"></span>
    </a>
    <div class="topbar-dialog help-dialog js-help-dialog dno">
        <div class="modal-content">
            <ul>
                                    <li>
                        <a href="/tour"     class="js-gps-track" data-gps-track="help_popup.click({ item_type:1 })"
>
                            Tour
                            <span class="item-summary">
                                Start here for a quick overview of the site
                            </span>
                        </a>
                    </li>
                <li>
                    <a href="/help"     class="js-gps-track" data-gps-track="help_popup.click({ item_type:4 })"
>
                        Help Center
                        <span class="item-summary">
                            Detailed answers to any questions you might have
                        </span>
                    </a>
                </li>
                    <li>
                        <a href="//meta.stackoverflow.com"     class="js-gps-track" data-gps-track="help_popup.click({ item_type:2 })"
>
                            Meta
                            <span class="item-summary">
                                Discuss the workings and policies of this site
                            </span>
                        </a>
                    </li>
            </ul>
        </div>
    </div>
                        
                    </span>
                </div>

			<div class="search-container">
                <form id="search" action="/search" method="get" autocomplete="off">
                    <input name="q" type="text" placeholder="search" value="" tabindex="1" autocomplete="off" maxlength="240" />
                </form>
			</div>
            	
        </div>      
    </div> 
</div>
<script>
    StackExchange.ready(function () { StackExchange.topbar.init(); });
</script>
    <div class="container">
        <div id="header" >
            <br class="cbt">
            <div id="hlogo">
                <a href="/">
                    Stack Overflow
                </a>
            </div>
            <div id="hmenus">
                <div class="nav mainnavs ">
                    <ul>
                        <li class="youarehere"><a id="nav-questions" href="/questions">Questions</a></li>
                        <li><a id="nav-tags" href="/tags">Tags</a></li>
                        <li><a id="nav-users" href="/users">Users</a></li>
                        <li><a id="nav-badges" href="/help/badges">Badges</a></li>
                        <li><a id="nav-unanswered" href="/unanswered">Unanswered</a></li>
                    </ul>
                </div>
                <div class="nav askquestion">
                    <ul>
                        <li>
                            <a id="nav-askquestion"  href="/questions/ask">Ask Question</a>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
        



        <div id="content">
            

<div itemscope itemtype="http://schema.org/Article">
	<link itemprop="image" href="//cdn.sstatic.net/stackoverflow/img/apple-touch-icon.png">
			<div id="question-header">
			<h1 itemprop="name"><a href="/questions/1132941/least-astonishment-in-python-which-scope-is-the-mutable-default-argument-in" class="question-hyperlink">&ldquo;Least Astonishment&rdquo; in Python: which scope is the Mutable Default Argument in?</a></h1>
		</div>
			<div id="mainbar">

			

<div class="question" data-questionid="1132941"  id="question">

        <table>
        <tr>
            <td class="votecell">
                

<div class="vote">
    <input type="hidden" name="_id_" value="1132941">
    <a class="vote-up-off" title="This question shows research effort; it is useful and clear (click again to undo)">up vote</a>
    <span class="vote-count-post ">728</span>
    <a class="vote-down-off" title="This question does not show any research effort; it is unclear or not useful (click again to undo)">down vote</a>
    
    <a class="star-off" href="#" title="This is a favorite question (click again to undo)">favorite</a>
    <div class="favoritecount"><b>286</b></div>   

</div>

            </td>
            
<td class="postcell">
<div>
    <div class="post-text" itemprop="description">

        <p>Anyone tinkering with Python long enough has been bitten (or torn to pieces) by the following issue:</p>

<pre><code>def foo(a=[]):
    a.append(5)
    return a
</code></pre>

<p>Python novices would expect this function to always return a list with only one element: <code>[5]</code>. The result is instead very different, and very astonishing (for a novice):</p>

<pre><code>&gt;&gt;&gt; foo()
[5]
&gt;&gt;&gt; foo()
[5, 5]
&gt;&gt;&gt; foo()
[5, 5, 5]
&gt;&gt;&gt; foo()
[5, 5, 5, 5]
&gt;&gt;&gt; foo()
</code></pre>

<p>A manager of mine once had his first encountered with this feature, and called it "a dramatic design flaw" of the language. I replied that the behavior had an underlying explanation, and it is indeed very puzzling and unexpected if you don't understand the internals. However, I was not able to answer (to myself) the following question: what is the reason for binding the default argument at function definition, and not at function execution? I doubt the experienced behavior has a practical use (who really used static variables in C, without breeding bugs ?)</p>

<p><strong>Edit</strong>: </p>

<p>Baczek made an interesting example. Together with most of your comments and Utaal's in particular, I elaborated further:</p>

<pre><code>&gt;&gt;&gt; def a():
...     print "a executed"
...     return []
... 
&gt;&gt;&gt;            
&gt;&gt;&gt; def b(x=a()):
...     x.append(5)
...     print x
... 
a executed
&gt;&gt;&gt; b()
[5]
&gt;&gt;&gt; b()
[5, 5]
</code></pre>

<p>To me, it seems that the design decision was relative to where to put the scope of parameters: inside the function or "together" with it?</p>

<p>Doing the binding inside the function would mean that <code>x</code> is effectively bound to the specified default when the function is called, not defined, something that would present a deep flaw: the <code>def</code> line would be "hybrid" in the sense that part of the binding (of the function object) would happen at definition, and part (assignment of default parameters) at function invocation time.</p>

<p>The actual behavior is more consistent: everything of that line gets evaluated when that line is executed, meaning at function definition.</p>

<p>Guido is a fantastic designer.</p>

<p><strong>Edit</strong></p>

<p>I reread all the very interesting and good answers you provided, and it was hard to assign a "correct tickmark", as everyone had good points in the answer. I marked Roberto's answer as correct because it was simpler and revealing, so that newcomers browsing this question can start from his answer and then delve into remaining more complex (but very insightful) answers.</p>

    </div>
    <div class="post-taglist">
        <a href="/questions/tagged/python" class="post-tag" title="show questions tagged &#39;python&#39;" rel="tag">python</a> <a href="/questions/tagged/functional-programming" class="post-tag" title="show questions tagged &#39;functional-programming&#39;" rel="tag">functional-programming</a> <a href="/questions/tagged/language-design" class="post-tag" title="show questions tagged &#39;language-design&#39;" rel="tag">language-design</a> <a href="/questions/tagged/least-astonishment" class="post-tag" title="show questions tagged &#39;least-astonishment&#39;" rel="tag">least-astonishment</a> 
    </div>
    <table class="fw">
    <tr>
    <td class="vt">
<div class="post-menu"><a href="/q/1132941/878520" title="short permalink to this question" class="short-link" id="link-post-1132941">share</a><span class="lsep">|</span><a href="/posts/1132941/edit" class="suggest-edit-post" title="revise and improve this post">edit</a><span class="lsep">|</span><a href="#"
       class="flag-post-link"
       title="flag this post for serious problems or moderator attention"
       data-postid="1132941">flag</a></div>        
    </td>
    <td align="right" class="post-signature">
<div class="user-info ">
    <div class="user-action-time">
        <a href="/posts/1132941/revisions" title="show all edits to this post">edited <span title="2014-04-15 09:27:35Z" class="relativetime">Apr 15 at 9:27</span></a>
    </div>
    <div class="user-gravatar32">
        <a href="/users/202229/smci"><div class="gravatar-wrapper-32"><img src="https://www.gravatar.com/avatar/6cc1d82c11563b440c57280ad587ee47?s=32&d=identicon&r=PG" alt=""></div></a>
    </div>
    <div class="user-details">
        <a href="/users/202229/smci">smci</a><br>
        <span class="reputation-score" title="reputation score " dir="ltr">2,728</span><span title="1 gold badge"><span class="badge1"></span><span class="badgecount">1</span></span><span title="14 silver badges"><span class="badge2"></span><span class="badgecount">14</span></span><span title="41 bronze badges"><span class="badge3"></span><span class="badgecount">41</span></span>
    </div>
</div>    </td>
    <td class="post-signature owner">
        <div class="user-info user-hover">
    <div class="user-action-time">
        asked <span title="2009-07-15 18:00:37Z" class="relativetime">Jul 15 '09 at 18:00</span>
    </div>
    <div class="user-gravatar32">
        <a href="/users/78374/stefano-borini"><div class="gravatar-wrapper-32"><img src="https://www.gravatar.com/avatar/f13cb1b1bd8b16bf6dc6eda558e162a0?s=32&d=identicon&r=PG" alt=""></div></a>
    </div>
    <div class="user-details">
        <a href="/users/78374/stefano-borini">Stefano Borini</a><br>
        <span class="reputation-score" title="reputation score 36068" dir="ltr">36.1k</span><span title="29 gold badges"><span class="badge1"></span><span class="badgecount">29</span></span><span title="155 silver badges"><span class="badge2"></span><span class="badgecount">155</span></span><span title="272 bronze badges"><span class="badge3"></span><span class="badgecount">272</span></span>
    </div>
</div>
    </td>
    </tr>
    </table>
</div>
</td>
        </tr>
                    <tr>
            <td class="special-status" colspan="2">
                <div class="question-status">
        <h2>                    <b>protected</b> by <a href="/users/298479/thiefmaster">ThiefMaster</a><span class="mod-flair" title="moderator">♦</span> <span title="2012-01-13 16:13:22Z" class="relativetime">Jan 13 '12 at 16:13</span>
</h2>
        <p>
This question is protected to prevent &quot;thanks!&quot;, &quot;me too!&quot;, or spam answers by new users. 
To answer it, you must have earned at least 10 <a href="/help/whats-reputation">reputation</a> on this site.</p>
    </div>
            </td>
        </tr>
    
<tr>
    <td class="votecell"></td>
    <td>
	    <div id="comments-1132941" class="comments " data-localized="true">
		    <table>
			    <tbody data-remaining-comments-count="11" 
			           data-addlink-html="add comment" 
			           data-addlink-disabled="false">

    <tr id="comment-950826" class="comment ">
        <td class="comment-actions">
            <table>
                <tbody>
                    <tr>
                        <td class=" comment-score">
                                <span title="number of &#39;useful comment&#39; votes received"
                                      class="hot">26</span>
                        </td>
                        <td>
                                <a class="comment-up comment-up-off" title="this comment adds something useful to the post">upvote</a>
                        </td>
                    </tr>
                    <tr>
                        <td>&nbsp;</td>
                        <td>
                            <a class="comment-flag" title="flag this comment as unconstructive, offensive, or spam">flag</a>
                        </td>
                    </tr>
                </tbody>
            </table>
        </td>
        <td class="comment-text">
            <div style="display: block;" class="comment-body">
                <span class="comment-copy">The real issue is the scope of the variable. No answer has yet discussed this, or addressed why a parameter to a function would have its default parameters globally scoped.  It&#39;s certainly contrary to all other languages I&#39;ve worked with.</span>
                &ndash;&nbsp;
                    <a href="/users/15852/kieveli"
                       title="7046 reputation"
                       class="comment-user">Kieveli</a>
                <span class="comment-date" dir="ltr"><span title="2009-07-15 19:03:23Z" class="relativetime-clean">Jul 15 '09 at 19:03</span></span>
                                                                            </div>
                    </td>
    </tr>
    <tr id="comment-952416" class="comment ">
        <td class="comment-actions">
            <table>
                <tbody>
                    <tr>
                        <td class=" comment-score">
                                <span title="number of &#39;useful comment&#39; votes received"
                                      class="supernova">54</span>
                        </td>
                        <td>
                                <a class="comment-up comment-up-off" title="this comment adds something useful to the post">upvote</a>
                        </td>
                    </tr>
                    <tr>
                        <td>&nbsp;</td>
                        <td>
                            <a class="comment-flag" title="flag this comment as unconstructive, offensive, or spam">flag</a>
                        </td>
                    </tr>
                </tbody>
            </table>
        </td>
        <td class="comment-text">
            <div style="display: block;" class="comment-body">
                <span class="comment-copy">@Kieveli: It&#39;s not globally scoped.  It&#39;s tied to the function object itself.  When the function is instantiated (when the declaration is executed), the default parameter expression is evaluated (in the example above, a list literal), and the resulting object is bound to the created function object.  If you place that function definition inside of another function and return it from the outer function, you will obtain a new function object each time the outer function is called, and each one will have its own default <code>a</code> list.  They are not globally shared.</span>
                &ndash;&nbsp;
                    <a href="/users/64474/miles"
                       title="12649 reputation"
                       class="comment-user">Miles</a>
                <span class="comment-date" dir="ltr"><span title="2009-07-15 23:32:14Z" class="relativetime-clean">Jul 15 '09 at 23:32</span></span>
                                                                            </div>
                    </td>
    </tr>
    <tr id="comment-954810" class="comment ">
        <td class="comment-actions">
            <table>
                <tbody>
                    <tr>
                        <td class=" comment-score">
                                <span title="number of &#39;useful comment&#39; votes received"
                                      class="cool">2</span>
                        </td>
                        <td>
                                <a class="comment-up comment-up-off" title="this comment adds something useful to the post">upvote</a>
                        </td>
                    </tr>
                    <tr>
                        <td>&nbsp;</td>
                        <td>
                            <a class="comment-flag" title="flag this comment as unconstructive, offensive, or spam">flag</a>
                        </td>
                    </tr>
                </tbody>
            </table>
        </td>
        <td class="comment-text">
            <div style="display: block;" class="comment-body">
                <span class="comment-copy">Ahm, but for a global function, they are globally scoped, which is what he meant. Just as for a function defined in the function, the scope is the first function.  So you are both right.  @Kieveli: Well, it&#39;s a natural effect of the fact that Python is interpreted, dynamic and uses references for everything. What other languages have you used that fits that bill? Can&#39;t be that many. :-)</span>
                &ndash;&nbsp;
                    <a href="/users/126214/lennart-regebro"
                       title="51662 reputation"
                       class="comment-user">Lennart Regebro</a>
                <span class="comment-date" dir="ltr"><span title="2009-07-16 11:45:30Z" class="relativetime-clean">Jul 16 '09 at 11:45</span></span>
                                                                            </div>
                    </td>
    </tr>
    <tr id="comment-2654965" class="comment ">
        <td class="comment-actions">
            <table>
                <tbody>
                    <tr>
                        <td class=" comment-score">
                                <span title="number of &#39;useful comment&#39; votes received"
                                      class="cool">3</span>
                        </td>
                        <td>
                                <a class="comment-up comment-up-off" title="this comment adds something useful to the post">upvote</a>
                        </td>
                    </tr>
                    <tr>
                        <td>&nbsp;</td>
                        <td>
                            <a class="comment-flag" title="flag this comment as unconstructive, offensive, or spam">flag</a>
                        </td>
                    </tr>
                </tbody>
            </table>
        </td>
        <td class="comment-text">
            <div style="display: block;" class="comment-body">
                <span class="comment-copy">I may never get tired of posting this link to explain the difference between variable and names in python, tho I just learned about it: <a href="http://python.net/~goodger/projects/pycon/2007/idiomatic/handout.html#other-languages-have-variables" rel="nofollow">python.net/~goodger/projects/pycon/2007/idiomatic/&hellip;</a> - This is for your first edit. Note how <code>a</code> from the first example and <code>x</code> from the second are just <i>naming</i> the same (mutable) object.</span>
                &ndash;&nbsp;
                    <a href="/users/274502/cawas"
                       title="3180 reputation"
                       class="comment-user">Cawas</a>
                <span class="comment-date" dir="ltr"><span title="2010-04-14 19:33:55Z" class="relativetime-clean">Apr 14 '10 at 19:33</span></span>
                                                                            </div>
                    </td>
    </tr>
    <tr id="comment-11530621" class="comment ">
        <td class="comment-actions">
            <table>
                <tbody>
                    <tr>
                        <td class=" comment-score">
                                <span title="number of &#39;useful comment&#39; votes received"
                                      class="cool">1</span>
                        </td>
                        <td>
                                <a class="comment-up comment-up-off" title="this comment adds something useful to the post">upvote</a>
                        </td>
                    </tr>
                    <tr>
                        <td>&nbsp;</td>
                        <td>
                            <a class="comment-flag" title="flag this comment as unconstructive, offensive, or spam">flag</a>
                        </td>
                    </tr>
                </tbody>
            </table>
        </td>
        <td class="comment-text">
            <div style="display: block;" class="comment-body">
                <span class="comment-copy">Complementary question - <a href="http://stackoverflow.com/questions/9158294/good-uses-for-mutable-function-argument-default-values">Good uses for mutable default arguments</a></span>
                &ndash;&nbsp;
                    <a href="/users/348545/jonathan"
                       title="11395 reputation"
                       class="comment-user">Jonathan</a>
                <span class="comment-date" dir="ltr"><span title="2012-02-06 20:54:07Z" class="relativetime-clean">Feb 6 '12 at 20:54</span></span>
                    <span class="edited-yes" title="this comment was edited 1 time"></span>
                                                                            </div>
                    </td>
    </tr>
			    </tbody>
				    <tfoot>
					    <tr>
						    <td></td>
						    <td class="comment-form">
							    <form id="add-comment-1132941" 
							          class="" 
							          data-placeholdertext="Use comments to ask for more information or suggest improvements. Avoid answering questions in comments."></form>
						    </td>
					    </tr>
				    </tfoot>
		    </table>
	    </div>
			<a id="comments-link-1132941" 
			   class="comments-link " 
			   title="Use comments to ask for more information or suggest improvements. Avoid answering questions in comments." 
				href=#>add / show <b>11</b> more comments</a>
    </td>
</tr>              <tr class="bounty-notification">
          <td class="votecell"></td>
          <td>
          <div style="margin-top:20px">
            <a class="bounty-link bounty" title="offer some of your reputation for better answers">
                start a bounty
            </a>
          </div>
          </td>
          </tr>
    </table>
</div>


			<div id="answers">

				<a name="tab-top"></a>
				<div id="answers-header">
					<div class="subheader answers-subheader">
						<h2>
								20 Answers
						</h2>
						<div>
							<div id="tabs">
        <a class="youarehere" href="/questions/1132941/least-astonishment-in-python-which-scope-is-the-mutable-default-argument-in?answertab=active#tab-top" title="Answers with the latest activity first">active</a>
        <a href="/questions/1132941/least-astonishment-in-python-which-scope-is-the-mutable-default-argument-in?answertab=oldest#tab-top" title="Answers in the order they were provided">oldest</a>
        <a href="/questions/1132941/least-astonishment-in-python-which-scope-is-the-mutable-default-argument-in?answertab=votes#tab-top" title="Answers with the highest score first">votes</a>
</div>
						</div>
					</div>    
				</div>    




  
<a name="1145781"></a>
<div id="answer-1145781" class="answer accepted-answer" data-answerid="1145781" >
    <table>
        <tr>
            <td class="votecell">
                

<div class="vote">
    <input type="hidden" name="_id_" value="1145781">
    <a class="vote-up-off" title="This answer is useful (click again to undo)">up vote</a>
    <span class="vote-count-post ">588</span>
    <a class="vote-down-off" title="This answer is not useful (click again to undo)">down vote</a>
    


        <span class="vote-accepted-on load-accepted-answer-date" title="loading when this answer was accepted...">accepted</span>
</div>

            </td>
            


<td class="answercell">
    <div class="post-text">
            <p>Actually, this is not a design flaw, and it is not because of internals, or performance.<br />
It comes simply from the fact that functions in Python are first-class objects, and not only a piece of code.</p>

<p>As soon as you get to think into this way, then it completely makes sense: a function is an object being evaluated on its definition; default parameters are kind of "member data" and therefore their state may change from one call to the other - exactly as in any other object.</p>

<p>In any case, Effbot has a very nice explanation of the reasons for this behavior in <a href="http://effbot.org/zone/default-values.htm">Default Parameter Values in Python</a>.<br />
I found it very clear, and I really suggest reading it for a better knowledge of how function objects work.</p>

    </div>
    <table class="fw">
    <tr>
    <td class="vt">
<div class="post-menu"><a href="/a/1145781/878520" title="short permalink to this answer" class="short-link" id="link-post-1145781">share</a><span class="lsep">|</span><a href="/posts/1145781/edit" class="suggest-edit-post" title="revise and improve this post">edit</a><span class="lsep">|</span><a href="#"
       class="flag-post-link"
       title="flag this post for serious problems or moderator attention"
       data-postid="1145781">flag</a></div>                    </td>
            


    <td align="right" class="post-signature">   
       

    <div class="user-info user-hover">
    <div class="user-action-time">
        answered <span title="2009-07-17 21:29:39Z" class="relativetime">Jul 17 '09 at 21:29</span>
    </div>
    <div class="user-gravatar32">
        <a href="/users/43927/roberto-liffredo"><div class="gravatar-wrapper-32"><img src="https://www.gravatar.com/avatar/77e50566e38e16c08091d86fb5646ca9?s=32&d=identicon&r=PG" alt=""></div></a>
    </div>
    <div class="user-details">
        <a href="/users/43927/roberto-liffredo">Roberto Liffredo</a><br>
        <span class="reputation-score" title="reputation score 15008" dir="ltr">15k</span><span title="2 gold badges"><span class="badge1"></span><span class="badgecount">2</span></span><span title="20 silver badges"><span class="badge2"></span><span class="badgecount">20</span></span><span title="37 bronze badges"><span class="badge3"></span><span class="badgecount">37</span></span>
    </div>
</div>
    </td>
    </tr>
    </table>
</td>
        </tr>
        
<tr>
    <td class="votecell"></td>
    <td>
	    <div id="comments-1145781" class="comments " data-localized="true">
		    <table>
			    <tbody data-remaining-comments-count="10" 
			           data-addlink-html="add comment" 
			           data-addlink-disabled="false">

    <tr id="comment-964238" class="comment ">
        <td class="comment-actions">
            <table>
                <tbody>
                    <tr>
                        <td class=" comment-score">
                                <span title="number of &#39;useful comment&#39; votes received"
                                      class="hot">22</span>
                        </td>
                        <td>
                                <a class="comment-up comment-up-off" title="this comment adds something useful to the post">upvote</a>
                        </td>
                    </tr>
                    <tr>
                        <td>&nbsp;</td>
                        <td>
                            <a class="comment-flag" title="flag this comment as unconstructive, offensive, or spam">flag</a>
                        </td>
                    </tr>
                </tbody>
            </table>
        </td>
        <td class="comment-text">
            <div style="display: block;" class="comment-body">
                <span class="comment-copy">+1: I wish I could vote more, actually. You have a very clear point and the article you suggested is indeed amazing.</span>
                &ndash;&nbsp;
                    <a href="/users/78374/stefano-borini"
                       title="36068 reputation"
                       class="comment-user owner">Stefano Borini</a>
                <span class="comment-date" dir="ltr"><span title="2009-07-17 22:44:02Z" class="relativetime-clean">Jul 17 '09 at 22:44</span></span>
                                                                            </div>
                    </td>
    </tr>
    <tr id="comment-2882000" class="comment ">
        <td class="comment-actions">
            <table>
                <tbody>
                    <tr>
                        <td class=" comment-score">
                                <span title="number of &#39;useful comment&#39; votes received"
                                      class="supernova">30</span>
                        </td>
                        <td>
                                <a class="comment-up comment-up-off" title="this comment adds something useful to the post">upvote</a>
                        </td>
                    </tr>
                    <tr>
                        <td>&nbsp;</td>
                        <td>
                            <a class="comment-flag" title="flag this comment as unconstructive, offensive, or spam">flag</a>
                        </td>
                    </tr>
                </tbody>
            </table>
        </td>
        <td class="comment-text">
            <div style="display: block;" class="comment-body">
                <span class="comment-copy">Good answer, but I still think that it is a design flaw</span>
                &ndash;&nbsp;
                    <a href="/users/165495/casebash"
                       title="21235 reputation"
                       class="comment-user">Casebash</a>
                <span class="comment-date" dir="ltr"><span title="2010-05-15 12:33:38Z" class="relativetime-clean">May 15 '10 at 12:33</span></span>
                                                                            </div>
                    </td>
    </tr>
    <tr id="comment-9448792" class="comment ">
        <td class="comment-actions">
            <table>
                <tbody>
                    <tr>
                        <td class=" comment-score">
                                <span title="number of &#39;useful comment&#39; votes received"
                                      class="warm">14</span>
                        </td>
                        <td>
                                <a class="comment-up comment-up-off" title="this comment adds something useful to the post">upvote</a>
                        </td>
                    </tr>
                    <tr>
                        <td>&nbsp;</td>
                        <td>
                            <a class="comment-flag" title="flag this comment as unconstructive, offensive, or spam">flag</a>
                        </td>
                    </tr>
                </tbody>
            </table>
        </td>
        <td class="comment-text">
            <div style="display: block;" class="comment-body">
                <span class="comment-copy">To anyone reading the above answer, I strongly recommend you take the time to read through the linked Effbot article. As well as all the other useful info, the part on how this language feature can be used for result caching/memoisation is very handy to know!</span>
                &ndash;&nbsp;
                    <a href="/users/665488/cam-jackson"
                       title="1127 reputation"
                       class="comment-user">Cam Jackson</a>
                <span class="comment-date" dir="ltr"><span title="2011-10-14 00:05:52Z" class="relativetime-clean">Oct 14 '11 at 0:05</span></span>
                                                                            </div>
                    </td>
    </tr>
    <tr id="comment-19820636" class="comment ">
        <td class="comment-actions">
            <table>
                <tbody>
                    <tr>
                        <td class=" comment-score">
                                <span title="number of &#39;useful comment&#39; votes received"
                                      class="cool">4</span>
                        </td>
                        <td>
                                <a class="comment-up comment-up-off" title="this comment adds something useful to the post">upvote</a>
                        </td>
                    </tr>
                    <tr>
                        <td>&nbsp;</td>
                        <td>
                            <a class="comment-flag" title="flag this comment as unconstructive, offensive, or spam">flag</a>
                        </td>
                    </tr>
                </tbody>
            </table>
        </td>
        <td class="comment-text">
            <div style="display: block;" class="comment-body">
                <span class="comment-copy">Even if it&#39;s a first-class object, one might still envision a design where the <i>code</i> for each default value is stored along with the object and re-evaluated each time the function is called. I&#39;m not saying that would be better, just that functions being first-class objects does not fully preclude it.</span>
                &ndash;&nbsp;
                    <a href="/users/974555/gerrit"
                       title="1498 reputation"
                       class="comment-user">gerrit</a>
                <span class="comment-date" dir="ltr"><span title="2013-01-11 10:55:25Z" class="relativetime-clean">Jan 11 '13 at 10:55</span></span>
                                                                            </div>
                    </td>
    </tr>
    <tr id="comment-24551066" class="comment ">
        <td class="comment-actions">
            <table>
                <tbody>
                    <tr>
                        <td class=" comment-score">
                                <span title="number of &#39;useful comment&#39; votes received"
                                      class="cool">2</span>
                        </td>
                        <td>
                                <a class="comment-up comment-up-off" title="this comment adds something useful to the post">upvote</a>
                        </td>
                    </tr>
                    <tr>
                        <td>&nbsp;</td>
                        <td>
                            <a class="comment-flag" title="flag this comment as unconstructive, offensive, or spam">flag</a>
                        </td>
                    </tr>
                </tbody>
            </table>
        </td>
        <td class="comment-text">
            <div style="display: block;" class="comment-body">
                <span class="comment-copy">Sorry, but anything considered &quot;The biggest WTF in Python&quot; is <b>most definitely a design flaw</b>.  This is a source of bugs for <i>everyone</i> at some point, because no one expects that behavior at first - which means it should not have been designed that way to begin with.  I don&#39;t care what hoops they had to jump through, they <b>should</b> have designed Python so that default arguments are non-static.</span>
                &ndash;&nbsp;
                    <a href="/users/238419/blueraja-danny-pflughoeft"
                       title="31131 reputation"
                       class="comment-user">BlueRaja - Danny Pflughoeft</a>
                <span class="comment-date" dir="ltr"><span title="2013-06-07 21:28:27Z" class="relativetime-clean">Jun 7 '13 at 21:28</span></span>
                    <span class="edited-yes" title="this comment was edited 2 times"></span>
                                                                            </div>
                    </td>
    </tr>
			    </tbody>
				    <tfoot>
					    <tr>
						    <td></td>
						    <td class="comment-form">
							    <form id="add-comment-1145781" 
							          class="" 
							          data-placeholdertext="Use comments to ask for more information or suggest improvements. Avoid comments like “+1” or “thanks”."></form>
						    </td>
					    </tr>
				    </tfoot>
		    </table>
	    </div>
			<a id="comments-link-1145781" 
			   class="comments-link " 
			   title="Use comments to ask for more information or suggest improvements. Avoid comments like “+1” or “thanks”." 
				href=#>add / show <b>10</b> more comments</a>
    </td>
</tr>    </table>
</div>

  
<a name="11334749"></a>
<div id="answer-11334749" class="answer" data-answerid="11334749" >
    <table>
        <tr>
            <td class="votecell">
                

<div class="vote">
    <input type="hidden" name="_id_" value="11334749">
    <a class="vote-up-off" title="This answer is useful (click again to undo)">up vote</a>
    <span class="vote-count-post ">2</span>
    <a class="vote-down-off" title="This answer is not useful (click again to undo)">down vote</a>
    


</div>

            </td>
            


<td class="answercell">
    <div class="post-text">
            <pre><code>&gt;&gt;&gt; def a():
&gt;&gt;&gt;    print "a executed"
&gt;&gt;&gt;    return []
&gt;&gt;&gt; x =a()
a executed
&gt;&gt;&gt; def b(m=[]):
&gt;&gt;&gt;    m.append(5)
&gt;&gt;&gt;    print m
&gt;&gt;&gt; b(x)
[5]
&gt;&gt;&gt; b(x)
[5, 5]
</code></pre>

    </div>
    <table class="fw">
    <tr>
    <td class="vt">
<div class="post-menu"><a href="/a/11334749/878520" title="short permalink to this answer" class="short-link" id="link-post-11334749">share</a><span class="lsep">|</span><a href="/posts/11334749/edit" class="suggest-edit-post" title="revise and improve this post">edit</a><span class="lsep">|</span><a href="#"
       class="flag-post-link"
       title="flag this post for serious problems or moderator attention"
       data-postid="11334749">flag</a></div>                    </td>
    <td align="right" class="post-signature">
<div class="user-info user-hover">
    <div class="user-action-time">
        <a href="/posts/11334749/revisions" title="show all edits to this post">edited <span title="2013-10-05 09:49:47Z" class="relativetime">Oct 5 '13 at 9:49</span></a>
    </div>
    <div class="user-gravatar32">
        <a href="/users/100297/martijn-pieters"><div class="gravatar-wrapper-32"><img src="https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=32&d=identicon&r=PG" alt=""></div></a>
    </div>
    <div class="user-details">
        <a href="/users/100297/martijn-pieters">Martijn Pieters</a><br>
        <span class="reputation-score" title="reputation score 255213" dir="ltr">255k</span><span title="21 gold badges"><span class="badge1"></span><span class="badgecount">21</span></span><span title="387 silver badges"><span class="badge2"></span><span class="badgecount">387</span></span><span title="560 bronze badges"><span class="badge3"></span><span class="badgecount">560</span></span>
    </div>
</div>    </td>
            


    <td align="right" class="post-signature">   
       

    <div class="user-info ">
    <div class="user-action-time">
        answered <span title="2012-07-04 19:51:30Z" class="relativetime">Jul 4 '12 at 19:51</span>
    </div>
    <div class="user-gravatar32">
        <a href="/users/1470180/jai"><div class="gravatar-wrapper-32"><img src="https://www.gravatar.com/avatar/e4632deb8eb9fae0e0611bb00f1a8c16?s=32&d=identicon&r=PG" alt=""></div></a>
    </div>
    <div class="user-details">
        <a href="/users/1470180/jai">jai</a><br>
        <span class="reputation-score" title="reputation score " dir="ltr">47</span><span title="2 bronze badges"><span class="badge3"></span><span class="badgecount">2</span></span>
    </div>
</div>
    </td>
    </tr>
    </table>
</td>
        </tr>
        
<tr>
    <td class="votecell"></td>
    <td>
	    <div id="comments-11334749" class="comments " data-localized="true">
		    <table>
			    <tbody data-remaining-comments-count="0" 
			           data-addlink-html="add comment" 
			           data-addlink-disabled="false">

    <tr id="comment-17354975" class="comment ">
        <td class="comment-actions">
            <table>
                <tbody>
                    <tr>
                        <td class=" comment-score">
                                &nbsp;&nbsp;
                        </td>
                        <td>
                                <a class="comment-up comment-up-off" title="this comment adds something useful to the post">upvote</a>
                        </td>
                    </tr>
                    <tr>
                        <td>&nbsp;</td>
                        <td>
                            <a class="comment-flag" title="flag this comment as unconstructive, offensive, or spam">flag</a>
                        </td>
                    </tr>
                </tbody>
            </table>
        </td>
        <td class="comment-text">
            <div style="display: block;" class="comment-body">
                <span class="comment-copy">Why the downvote?</span>
                &ndash;&nbsp;
                    <a href="/users/938695/austin-henley"
                       title="2927 reputation"
                       class="comment-user">Austin Henley</a>
                <span class="comment-date" dir="ltr"><span title="2012-10-10 21:29:51Z" class="relativetime-clean">Oct 10 '12 at 21:29</span></span>
                                                                            </div>
                    </td>
    </tr>
    <tr id="comment-21160290" class="comment ">
        <td class="comment-actions">
            <table>
                <tbody>
                    <tr>
                        <td class=" comment-score">
                                <span title="number of &#39;useful comment&#39; votes received"
                                      class="cool">2</span>
                        </td>
                        <td>
                                <a class="comment-up comment-up-off" title="this comment adds something useful to the post">upvote</a>
                        </td>
                    </tr>
                    <tr>
                        <td>&nbsp;</td>
                        <td>
                            <a class="comment-flag" title="flag this comment as unconstructive, offensive, or spam">flag</a>
                        </td>
                    </tr>
                </tbody>
            </table>
        </td>
        <td class="comment-text">
            <div style="display: block;" class="comment-body">
                <span class="comment-copy">@AustinHenley lack of explanation what&#39;s going on?</span>
                &ndash;&nbsp;
                    <a href="/users/321731/tshepang"
                       title="2606 reputation"
                       class="comment-user">Tshepang</a>
                <span class="comment-date" dir="ltr"><span title="2013-02-24 13:20:06Z" class="relativetime-clean">Feb 24 '13 at 13:20</span></span>
                                                                            </div>
                    </td>
    </tr>
			    </tbody>
				    <tfoot>
					    <tr>
						    <td></td>
						    <td class="comment-form">
							    <form id="add-comment-11334749" 
							          class="" 
							          data-placeholdertext="Use comments to ask for more information or suggest improvements. Avoid comments like “+1” or “thanks”."></form>
						    </td>
					    </tr>
				    </tfoot>
		    </table>
	    </div>
			<a id="comments-link-11334749" 
			   class="comments-link " 
			   title="Use comments to ask for more information or suggest improvements. Avoid comments like “+1” or “thanks”." 
				href=#>add comment</a>
    </td>
</tr>    </table>
</div>

  
<a name="18372696"></a>
<div id="answer-18372696" class="answer" data-answerid="18372696" >
    <table>
        <tr>
            <td class="votecell">
                

<div class="vote">
    <input type="hidden" name="_id_" value="18372696">
    <a class="vote-up-off" title="This answer is useful (click again to undo)">up vote</a>
    <span class="vote-count-post ">2</span>
    <a class="vote-down-off" title="This answer is not useful (click again to undo)">down vote</a>
    


</div>

            </td>
            


<td class="answercell">
    <div class="post-text">
            <p>I think the answer to this question lies in how python pass data to parameter (pass by value or by reference), not mutability or how python handle the "def" statement.</p>

<p>A brief introduction. First, there are two type of data types in python, one is simple elementary data type, like numbers, and another data type is objects. Second, when passing data to parameters, python pass elementary data type by value, i.e., make a local copy of the value to a local variable, but pass object by reference, i.e., pointers to the object.</p>

<p>Admitting the above two points, let's explain what happened to the python code. It's only because of passing by reference for objects, but has nothing to do with mutable/immutable, or arguably the fact that "def" statement is executed only once when it is defined.</p>

<p>[] is an object, so python pass the reference of [] to <code>a</code>, i.e., <code>a</code> is only a pointer to [] which lies in memory as an object. There is only one copy of [] with, however, many references to it. For the first foo(), the list [] is changed to <a href="http://effbot.org/zone/default-values.htm" rel="nofollow">1</a> by append method. But Note that there is only one copy of the list object and this object now becomes <a href="http://effbot.org/zone/default-values.htm" rel="nofollow">1</a>. When running the second foo(), what effbot webpage says (items is not evaluated any more) is wrong. <code>a</code> is evaluated to be the list object, although now the content of the object is <a href="http://effbot.org/zone/default-values.htm" rel="nofollow">1</a>. This is the effect of passing by reference! The result of foo(3) can be easily derived in the same way.</p>

<p>To further validate my answer, let's take a look at two additional codes.</p>

<p>====== No. 2 ========</p>

<pre><code>def foo(x, items=None):
    if items is None:
        items = []
    items.append(x)
    return items

foo(1)  #return [1]
foo(2)  #return [2]
foo(3)  #return [3]
</code></pre>

<p><code>[]</code> is an object, so is <code>None</code> (the former is mutable while the latter is immutable. But the mutability has nothing to do with the question). None is somewhere in the space but we know it's there and there is only one copy of None there. So every time foo is invoked, items is evaluated (as opposed to some answer that it is only evaluated once) to be None, to be clear, the reference (or the address) of None. Then in the foo, item is changed to [], i.e., points to another object which has a different address. </p>

<p>====== No. 3 =======</p>

<pre><code>def foo(x, items=[]):
    items.append(x)
    return items

foo(1)    # returns [1]
foo(2,[]) # returns [2]
foo(3)    # returns [1,3]
</code></pre>

<p>The invocation of foo(1) make items point to a list object [] with an address, say, 11111111. the content of the list is changed to <a href="http://effbot.org/zone/default-values.htm" rel="nofollow">1</a> in the foo function in the sequel, but the address is not changed, still 11111111. Then foo(2,[]) is coming. Although the [] in foo(2,[]) has the same content as the default parameter [] when calling foo(1), their address are different! Since we provide the parameter explicitly, <code>items</code> has to take the address of this new <code>[]</code>, say 2222222, and return it after making some change. Now foo(3) is executed. since only <code>x</code> is provided, items has to take its default value again. What's the default value? It is set when defining the foo function: the list object located in 11111111. So the items is evaluated to be the address 11111111 having an element 1. The list located at 2222222 also contains one element 2, but it is not pointed by items any more. Consequently, An append of 3 will make <code>items</code> [1,3]. </p>

<p>From the above explanations, we can see that the <a href="http://effbot.org/zone/default-values.htm" rel="nofollow">effbot</a> webpage recommended in the accepted answer failed to give a relevant answer to this question. What is more, I think a point in the effbot webpage is wrong. I think the code regarding the UI.Button is correct:</p>

<pre><code>for i in range(10):
    def callback():
        print "clicked button", i
    UI.Button("button %s" % i, callback)
</code></pre>

<p>Each button can hold a distinct callback function which will display different value of <code>i</code>. I can provide an example to show this:</p>

<pre><code>x=[]
for i in range(10):
    def callback():
        print(i)
    x.append(callback) 
</code></pre>

<p>If we execute <code>x[7]()</code> we'll get 7 as expected, and <code>x[9]()</code> will gives 9, another value of <code>i</code>.</p>

    </div>
    <table class="fw">
    <tr>
    <td class="vt">
<div class="post-menu"><a href="/a/18372696/878520" title="short permalink to this answer" class="short-link" id="link-post-18372696">share</a><span class="lsep">|</span><a href="/posts/18372696/edit" class="suggest-edit-post" title="revise and improve this post">edit</a><span class="lsep">|</span><a href="#"
       class="flag-post-link"
       title="flag this post for serious problems or moderator attention"
       data-postid="18372696">flag</a></div>                    </td>
            


    <td align="right" class="post-signature">   
       

    <div class="user-info ">
    <div class="user-action-time">
        answered <span title="2013-08-22 05:58:41Z" class="relativetime">Aug 22 '13 at 5:58</span>
    </div>
    <div class="user-gravatar32">
        <a href="/users/2384994/user2384994"><div class="gravatar-wrapper-32"><img src="https://www.gravatar.com/avatar/8ce2eb687766d8db40126dd8c4735d3b?s=32&d=identicon&r=PG" alt=""></div></a>
    </div>
    <div class="user-details">
        <a href="/users/2384994/user2384994">user2384994</a><br>
        <span class="reputation-score" title="reputation score " dir="ltr">392</span><span title="2 silver badges"><span class="badge2"></span><span class="badgecount">2</span></span><span title="12 bronze badges"><span class="badge3"></span><span class="badgecount">12</span></span>
    </div>
</div>
    </td>
    </tr>
    </table>
</td>
        </tr>
        
<tr>
    <td class="votecell"></td>
    <td>
	    <div id="comments-18372696" class="comments " data-localized="true">
		    <table>
			    <tbody data-remaining-comments-count="0" 
			           data-addlink-html="add comment" 
			           data-addlink-disabled="false">

    <tr id="comment-28304217" class="comment ">
        <td class="comment-actions">
            <table>
                <tbody>
                    <tr>
                        <td class=" comment-score">
                                <span title="number of &#39;useful comment&#39; votes received"
                                      class="cool">1</span>
                        </td>
                        <td>
                                <a class="comment-up comment-up-off" title="this comment adds something useful to the post">upvote</a>
                        </td>
                    </tr>
                    <tr>
                        <td>&nbsp;</td>
                        <td>
                            <a class="comment-flag" title="flag this comment as unconstructive, offensive, or spam">flag</a>
                        </td>
                    </tr>
                </tbody>
            </table>
        </td>
        <td class="comment-text">
            <div style="display: block;" class="comment-body">
                <span class="comment-copy">Your last point is wrong. Try it and you&#39;ll see that <code>x&#91;7&#93;()</code> is <code>9</code>.</span>
                &ndash;&nbsp;
                    <a href="/users/107660/duncan"
                       title="24186 reputation"
                       class="comment-user">Duncan</a>
                <span class="comment-date" dir="ltr"><span title="2013-10-02 13:29:23Z" class="relativetime-clean">Oct 2 '13 at 13:29</span></span>
                                                                            </div>
                    </td>
    </tr>
			    </tbody>
				    <tfoot>
					    <tr>
						    <td></td>
						    <td class="comment-form">
							    <form id="add-comment-18372696" 
							          class="" 
							          data-placeholdertext="Use comments to ask for more information or suggest improvements. Avoid comments like “+1” or “thanks”."></form>
						    </td>
					    </tr>
				    </tfoot>
		    </table>
	    </div>
			<a id="comments-link-18372696" 
			   class="comments-link " 
			   title="Use comments to ask for more information or suggest improvements. Avoid comments like “+1” or “thanks”." 
				href=#>add comment</a>
    </td>
</tr>    </table>
</div>

  
<a name="17782210"></a>
<div id="answer-17782210" class="answer" data-answerid="17782210" >
    <table>
        <tr>
            <td class="votecell">
                

<div class="vote">
    <input type="hidden" name="_id_" value="17782210">
    <a class="vote-up-off" title="This answer is useful (click again to undo)">up vote</a>
    <span class="vote-count-post ">1</span>
    <a class="vote-down-off" title="This answer is not useful (click again to undo)">down vote</a>
    


</div>

            </td>
            


<td class="answercell">
    <div class="post-text">
            <p>This "bug" gave me a lot of overtime work hours! But I'm beginning to see a potential use of it (but I would have liked it to be at the execution time, still)</p>

<p>I'm gonna give you what I see as a useful example.</p>

<pre><code>def example(errors=[]):
    # statements
    # Something went wrong
    mistake = True
    if mistake:
        tryToFixIt(errors)
        # Didn't work.. let's try again
        tryToFixItAnotherway(errors)
        # This time it worked
    return errors

def tryToFixIt(err):
    err.append('Attempt to fix it')

def tryToFixItAnotherway(err):
    err.append('Attempt to fix it by another way')

def main():
    for item in range(2):
        errors = example()
    print '\n'.join(errors)

main()
</code></pre>

<p>prints the following</p>

<pre><code>Attempt to fix it
Attempt to fix it by another way
Attempt to fix it
Attempt to fix it by another way
</code></pre>

    </div>
    <table class="fw">
    <tr>
    <td class="vt">
<div class="post-menu"><a href="/a/17782210/878520" title="short permalink to this answer" class="short-link" id="link-post-17782210">share</a><span class="lsep">|</span><a href="/posts/17782210/edit" class="suggest-edit-post" title="revise and improve this post">edit</a><span class="lsep">|</span><a href="#"
       class="flag-post-link"
       title="flag this post for serious problems or moderator attention"
       data-postid="17782210">flag</a></div>                    </td>
    <td align="right" class="post-signature">
<div class="user-info ">
    <div class="user-action-time">
        <a href="/posts/17782210/revisions" title="show all edits to this post">edited <span title="2013-07-23 10:07:58Z" class="relativetime">Jul 23 '13 at 10:07</span></a>
    </div>
    <div class="user-gravatar32">
        
    </div>
    <div class="user-details">
        <br>
        
    </div>
</div>    </td>
            


    <td align="right" class="post-signature">   
       

    <div class="user-info ">
    <div class="user-action-time">
        answered <span title="2013-07-22 07:35:28Z" class="relativetime">Jul 22 '13 at 7:35</span>
    </div>
    <div class="user-gravatar32">
        <a href="/users/618099/norfeldt"><div class="gravatar-wrapper-32"><img src="http://i.stack.imgur.com/A3bOH.png?s=32&g=1" alt=""></div></a>
    </div>
    <div class="user-details">
        <a href="/users/618099/norfeldt">Norfeldt</a><br>
        <span class="reputation-score" title="reputation score " dir="ltr">1,346</span><span title="1 gold badge"><span class="badge1"></span><span class="badgecount">1</span></span><span title="12 silver badges"><span class="badge2"></span><span class="badgecount">12</span></span><span title="24 bronze badges"><span class="badge3"></span><span class="badgecount">24</span></span>
    </div>
</div>
    </td>
    </tr>
    </table>
</td>
        </tr>
        
<tr>
    <td class="votecell"></td>
    <td>
	    <div id="comments-17782210" class="comments  dno" data-localized="true">
		    <table>
			    <tbody data-remaining-comments-count="0" 
			           data-addlink-html="add comment" 
			           data-addlink-disabled="false">
					    <tr><td></td><td></td></tr>
			    </tbody>
				    <tfoot>
					    <tr>
						    <td></td>
						    <td class="comment-form">
							    <form id="add-comment-17782210" 
							          class="" 
							          data-placeholdertext="Use comments to ask for more information or suggest improvements. Avoid comments like “+1” or “thanks”."></form>
						    </td>
					    </tr>
				    </tfoot>
		    </table>
	    </div>
			<a id="comments-link-17782210" 
			   class="comments-link " 
			   title="Use comments to ask for more information or suggest improvements. Avoid comments like “+1” or “thanks”." 
				href=#>add comment</a>
    </td>
</tr>    </table>
</div>

  
<a name="9791799"></a>
<div id="answer-9791799" class="answer" data-answerid="9791799" >
    <table>
        <tr>
            <td class="votecell">
                

<div class="vote">
    <input type="hidden" name="_id_" value="9791799">
    <a class="vote-up-off" title="This answer is useful (click again to undo)">up vote</a>
    <span class="vote-count-post ">5</span>
    <a class="vote-down-off" title="This answer is not useful (click again to undo)">down vote</a>
    


</div>

            </td>
            


<td class="answercell">
    <div class="post-text">
            <p>The solutions here are:</p>

<ol>
<li>Use <code>None</code> as your default value (or a nonce <code>object</code>), and switch on that to create your values at runtime; or</li>
<li>Use a <code>lambda</code> as your default parameter, and call it within a try block to get the default value (this is the sort of thing that lambda abstraction is for).</li>
</ol>

<p>The second option is nice because users of the function can pass in a callable, which may be already existing (such as a <code>type</code>)</p>

    </div>
    <table class="fw">
    <tr>
    <td class="vt">
<div class="post-menu"><a href="/a/9791799/878520" title="short permalink to this answer" class="short-link" id="link-post-9791799">share</a><span class="lsep">|</span><a href="/posts/9791799/edit" class="suggest-edit-post" title="revise and improve this post">edit</a><span class="lsep">|</span><a href="#"
       class="flag-post-link"
       title="flag this post for serious problems or moderator attention"
       data-postid="9791799">flag</a></div>                    </td>
    <td align="right" class="post-signature">
<div class="user-info ">
    <div class="user-action-time">
        <a href="/posts/9791799/revisions" title="show all edits to this post">edited <span title="2013-06-30 16:20:35Z" class="relativetime">Jun 30 '13 at 16:20</span></a>
    </div>
    <div class="user-gravatar32">
        
    </div>
    <div class="user-details">
        <br>
        
    </div>
</div>    </td>
            


    <td align="right" class="post-signature">   
       

    <div class="user-info ">
    <div class="user-action-time">
        answered <span title="2012-03-20 17:22:11Z" class="relativetime">Mar 20 '12 at 17:22</span>
    </div>
    <div class="user-gravatar32">
        <a href="/users/21640/marcin"><div class="gravatar-wrapper-32"><img src="https://www.gravatar.com/avatar/492a3c5c13fb44d27229364e0993fa11?s=32&d=identicon&r=PG" alt=""></div></a>
    </div>
    <div class="user-details">
        <a href="/users/21640/marcin">Marcin</a><br>
        <span class="reputation-score" title="reputation score 25091" dir="ltr">25.1k</span><span title="7 gold badges"><span class="badge1"></span><span class="badgecount">7</span></span><span title="43 silver badges"><span class="badge2"></span><span class="badgecount">43</span></span><span title="92 bronze badges"><span class="badge3"></span><span class="badgecount">92</span></span>
    </div>
</div>
    </td>
    </tr>
    </table>
</td>
        </tr>
        
<tr>
    <td class="votecell"></td>
    <td>
	    <div id="comments-9791799" class="comments  dno" data-localized="true">
		    <table>
			    <tbody data-remaining-comments-count="0" 
			           data-addlink-html="add comment" 
			           data-addlink-disabled="false">
					    <tr><td></td><td></td></tr>
			    </tbody>
				    <tfoot>
					    <tr>
						    <td></td>
						    <td class="comment-form">
							    <form id="add-comment-9791799" 
							          class="" 
							          data-placeholdertext="Use comments to ask for more information or suggest improvements. Avoid comments like “+1” or “thanks”."></form>
						    </td>
					    </tr>
				    </tfoot>
		    </table>
	    </div>
			<a id="comments-link-9791799" 
			   class="comments-link " 
			   title="Use comments to ask for more information or suggest improvements. Avoid comments like “+1” or “thanks”." 
				href=#>add comment</a>
    </td>
</tr>    </table>
</div>

  
<a name="1133013"></a>
<div id="answer-1133013" class="answer" data-answerid="1133013" >
    <table>
        <tr>
            <td class="votecell">
                

<div class="vote">
    <input type="hidden" name="_id_" value="1133013">
    <a class="vote-up-off" title="This answer is useful (click again to undo)">up vote</a>
    <span class="vote-count-post ">73</span>
    <a class="vote-down-off" title="This answer is not useful (click again to undo)">down vote</a>
    


</div>

            </td>
            


<td class="answercell">
    <div class="post-text">
            <p>Suppose you have the following code</p>

<pre><code>fruits = ("apples", "bannanas", "loganberries")

def eat(food=fruits):
    ...
</code></pre>

<p>When I see the declaration of eat, the least astonishing thing is to think that if the first parameter is not given, that it will be equal to the tuple <code>("apples", "bannanas", "loganberries")</code></p>

<p>However, supposed later on in the code, I do something like</p>

<pre><code>def some_random_function():
    global fruits
    fruits = ("blueberries", "mangos")
</code></pre>

<p>then if default parameters were bound at function execution rather than function declaration then I would be astonished (in a very bad way) to discover that fruits had been changed.  This would be more astonishing IMO than discovering that your <code>foo</code> function above was mutating the list.</p>

<p>The real problem lies with mutable variables, and all languages have this problem to some extent.  Here's a question: suppose in Java I have the following code:</p>

<pre><code>StringBuffer s = new StringBuffer("Hello World!");
Map&lt;StringBuffer,Integer&gt; counts = new HashMap&lt;StringBuffer,Integer&gt;();
counts.put(s, 5);
s.append("!!!!");
System.out.println( counts.get(s) );  // does this work?
</code></pre>

<p>Now, does my map use the value of the StringBuffer key when it was placed into the map, or does it store the key by reference?  Either way, someone is astonished; either the person who tried to get the object out of the Map using a value identical to the one they put it in with, or the person who can't seem to retrieve their ovject even though the key they're using is literally the same object that was used to put it into the map.  (This is actually why Python doesn't allow its mutable builtin data types to be used as dictionary keys.)</p>

<p>Your example is a good one of a case where Python newcomers will be surprised and bitten.  But I'd argue that if we fixed this, then that would only create a different situation where they'd be bitten instead, and that one would be even less intuitive.  Moreover, this is always the case when dealing with mutable variables; you always run into cases where someone could intuitively expect one or the opposite behavior depending on what code they're writing.</p>

<p>I personally like Python's current approach: default function arguments are evaluated when the function is defined and that object is always the default.  I suppose they could special-case using an empty list, but that kind of special casing would cause even more astonishment, not to mention be backwards incompatible.</p>

    </div>
    <table class="fw">
    <tr>
    <td class="vt">
<div class="post-menu"><a href="/a/1133013/878520" title="short permalink to this answer" class="short-link" id="link-post-1133013">share</a><span class="lsep">|</span><a href="/posts/1133013/edit" class="suggest-edit-post" title="revise and improve this post">edit</a><span class="lsep">|</span><a href="#"
       class="flag-post-link"
       title="flag this post for serious problems or moderator attention"
       data-postid="1133013">flag</a></div>                    </td>
    <td align="right" class="post-signature">
<div class="user-info ">
    <div class="user-action-time">
        <a href="/posts/1133013/revisions" title="show all edits to this post">edited <span title="2013-06-08 21:27:59Z" class="relativetime">Jun 8 '13 at 21:27</span></a>
    </div>
    <div class="user-gravatar32">
        <a href="/users/1021274/jveldridge"><div class="gravatar-wrapper-32"><img src="https://www.gravatar.com/avatar/eada64b2c35d8681f38bf155ef4842bd?s=32&d=identicon&r=PG" alt=""></div></a>
    </div>
    <div class="user-details">
        <a href="/users/1021274/jveldridge">jveldridge</a><br>
        <span class="reputation-score" title="reputation score " dir="ltr">97</span><span title="8 bronze badges"><span class="badge3"></span><span class="badgecount">8</span></span>
    </div>
</div>    </td>
            


    <td align="right" class="post-signature">   
       

    <div class="user-info user-hover">
    <div class="user-action-time">
        answered <span title="2009-07-15 18:11:26Z" class="relativetime">Jul 15 '09 at 18:11</span>
    </div>
    <div class="user-gravatar32">
        <a href="/users/1694/eli-courtwright"><div class="gravatar-wrapper-32"><img src="https://www.gravatar.com/avatar/bd42b746d79be5dd325a8e94bc00ac58?s=32&d=identicon&r=PG" alt=""></div></a>
    </div>
    <div class="user-details">
        <a href="/users/1694/eli-courtwright">Eli Courtwright</a><br>
        <span class="reputation-score" title="reputation score 51348" dir="ltr">51.3k</span><span title="30 gold badges"><span class="badge1"></span><span class="badgecount">30</span></span><span title="138 silver badges"><span class="badge2"></span><span class="badgecount">138</span></span><span title="204 bronze badges"><span class="badge3"></span><span class="badgecount">204</span></span>
    </div>
</div>
    </td>
    </tr>
    </table>
</td>
        </tr>
        
<tr>
    <td class="votecell"></td>
    <td>
	    <div id="comments-1133013" class="comments " data-localized="true">
		    <table>
			    <tbody data-remaining-comments-count="0" 
			           data-addlink-html="add comment" 
			           data-addlink-disabled="false">

    <tr id="comment-950511" class="comment ">
        <td class="comment-actions">
            <table>
                <tbody>
                    <tr>
                        <td class=" comment-score">
                                <span title="number of &#39;useful comment&#39; votes received"
                                      class="warm">7</span>
                        </td>
                        <td>
                                <a class="comment-up comment-up-off" title="this comment adds something useful to the post">upvote</a>
                        </td>
                    </tr>
                    <tr>
                        <td>&nbsp;</td>
                        <td>
                            <a class="comment-flag" title="flag this comment as unconstructive, offensive, or spam">flag</a>
                        </td>
                    </tr>
                </tbody>
            </table>
        </td>
        <td class="comment-text">
            <div style="display: block;" class="comment-body">
                <span class="comment-copy">I think it&#39;s a matter of debate. You are acting on a global variable. Any evaluation performed anywhere in your code involving your global variable will now (correctly) refer to (&quot;blueberries&quot;, &quot;mangos&quot;). the default parameter could just be like any other case.</span>
                &ndash;&nbsp;
                    <a href="/users/78374/stefano-borini"
                       title="36068 reputation"
                       class="comment-user owner">Stefano Borini</a>
                <span class="comment-date" dir="ltr"><span title="2009-07-15 18:16:08Z" class="relativetime-clean">Jul 15 '09 at 18:16</span></span>
                                                                            </div>
                    </td>
    </tr>
    <tr id="comment-950592" class="comment ">
        <td class="comment-actions">
            <table>
                <tbody>
                    <tr>
                        <td class=" comment-score">
                                <span title="number of &#39;useful comment&#39; votes received"
                                      class="warm">9</span>
                        </td>
                        <td>
                                <a class="comment-up comment-up-off" title="this comment adds something useful to the post">upvote</a>
                        </td>
                    </tr>
                    <tr>
                        <td>&nbsp;</td>
                        <td>
                            <a class="comment-flag" title="flag this comment as unconstructive, offensive, or spam">flag</a>
                        </td>
                    </tr>
                </tbody>
            </table>
        </td>
        <td class="comment-text">
            <div style="display: block;" class="comment-body">
                <span class="comment-copy">Actually, I don&#39;t think I agree with your first example.  I&#39;m not sure I like the idea of modifying an initializer like that in the first place, but if I did, I&#39;d expect it to behave exactly as you describe — changing the default value to <code>(&quot;blueberries&quot;, &quot;mangos&quot;)</code>.</span>
                &ndash;&nbsp;
                    <a href="/users/46387/ben-blank"
                       title="21341 reputation"
                       class="comment-user">Ben Blank</a>
                <span class="comment-date" dir="ltr"><span title="2009-07-15 18:26:45Z" class="relativetime-clean">Jul 15 '09 at 18:26</span></span>
                                                                            </div>
                    </td>
    </tr>
    <tr id="comment-950800" class="comment ">
        <td class="comment-actions">
            <table>
                <tbody>
                    <tr>
                        <td class=" comment-score">
                                <span title="number of &#39;useful comment&#39; votes received"
                                      class="warm">7</span>
                        </td>
                        <td>
                                <a class="comment-up comment-up-off" title="this comment adds something useful to the post">upvote</a>
                        </td>
                    </tr>
                    <tr>
                        <td>&nbsp;</td>
                        <td>
                            <a class="comment-flag" title="flag this comment as unconstructive, offensive, or spam">flag</a>
                        </td>
                    </tr>
                </tbody>
            </table>
        </td>
        <td class="comment-text">
            <div style="display: block;" class="comment-body">
                <span class="comment-copy">The default parameter <i>is</i> like any other case. What is unexpected is that the parameter is a global variable, and not a local one. Which in turn is because the code is executed at function definition, not call. Once you get that, and that the same goes for classes, it&#39;s perfectly clear.</span>
                &ndash;&nbsp;
                    <a href="/users/126214/lennart-regebro"
                       title="51662 reputation"
                       class="comment-user">Lennart Regebro</a>
                <span class="comment-date" dir="ltr"><span title="2009-07-15 18:59:01Z" class="relativetime-clean">Jul 15 '09 at 18:59</span></span>
                                                                            </div>
                    </td>
    </tr>
    <tr id="comment-4740926" class="comment ">
        <td class="comment-actions">
            <table>
                <tbody>
                    <tr>
                        <td class=" comment-score">
                                <span title="number of &#39;useful comment&#39; votes received"
                                      class="cool">2</span>
                        </td>
                        <td>
                                <a class="comment-up comment-up-off" title="this comment adds something useful to the post">upvote</a>
                        </td>
                    </tr>
                    <tr>
                        <td>&nbsp;</td>
                        <td>
                            <a class="comment-flag" title="flag this comment as unconstructive, offensive, or spam">flag</a>
                        </td>
                    </tr>
                </tbody>
            </table>
        </td>
        <td class="comment-text">
            <div style="display: block;" class="comment-body">
                <span class="comment-copy">Brilliant counterexample, +1</span>
                &ndash;&nbsp;
                    <a href="/users/65696/ifloop"
                       title="58407 reputation"
                       class="comment-user">IfLoop</a>
                <span class="comment-date" dir="ltr"><span title="2010-12-05 01:52:15Z" class="relativetime-clean">Dec 5 '10 at 1:52</span></span>
                                                                            </div>
                    </td>
    </tr>
    <tr id="comment-24551118" class="comment ">
        <td class="comment-actions">
            <table>
                <tbody>
                    <tr>
                        <td class=" comment-score">
                                &nbsp;&nbsp;
                        </td>
                        <td>
                                <a class="comment-up comment-up-off" title="this comment adds something useful to the post">upvote</a>
                        </td>
                    </tr>
                    <tr>
                        <td>&nbsp;</td>
                        <td>
                            <a class="comment-flag" title="flag this comment as unconstructive, offensive, or spam">flag</a>
                        </td>
                    </tr>
                </tbody>
            </table>
        </td>
        <td class="comment-text">
            <div style="display: block;" class="comment-body">
                <span class="comment-copy">I have no idea what to expect in that first code example.  It really shouldn&#39;t be legal code to begin with <i>(I seriously hope it isn&#39;t)</i></span>
                &ndash;&nbsp;
                    <a href="/users/238419/blueraja-danny-pflughoeft"
                       title="31131 reputation"
                       class="comment-user">BlueRaja - Danny Pflughoeft</a>
                <span class="comment-date" dir="ltr"><span title="2013-06-07 21:30:24Z" class="relativetime-clean">Jun 7 '13 at 21:30</span></span>
                    <span class="edited-yes" title="this comment was edited 1 time"></span>
                                                                            </div>
                    </td>
    </tr>
			    </tbody>
				    <tfoot>
					    <tr>
						    <td></td>
						    <td class="comment-form">
							    <form id="add-comment-1133013" 
							          class="" 
							          data-placeholdertext="Use comments to ask for more information or suggest improvements. Avoid comments like “+1” or “thanks”."></form>
						    </td>
					    </tr>
				    </tfoot>
		    </table>
	    </div>
			<a id="comments-link-1133013" 
			   class="comments-link " 
			   title="Use comments to ask for more information or suggest improvements. Avoid comments like “+1” or “thanks”." 
				href=#>add comment</a>
    </td>
</tr>    </table>
</div>

  
<a name="1134613"></a>
<div id="answer-1134613" class="answer" data-answerid="1134613" >
    <table>
        <tr>
            <td class="votecell">
                

<div class="vote">
    <input type="hidden" name="_id_" value="1134613">
    <a class="vote-up-off" title="This answer is useful (click again to undo)">up vote</a>
    <span class="vote-count-post ">11</span>
    <a class="vote-down-off" title="This answer is not useful (click again to undo)">down vote</a>
    


</div>

            </td>
            


<td class="answercell">
    <div class="post-text">
            <p>It's a performance optimization.  As a result of this functionality, which of these two function calls do you think is faster?</p>

<pre><code>def print_tuple(some_tuple=(1,2,3)):
    print some_tuple

print_tuple()        #1
print_tuple((1,2,3)) #2
</code></pre>

<p>I'll give you a hint.  Here's the disassembly (see <a href="http://docs.python.org/library/dis.html">http://docs.python.org/library/dis.html</a>):</p>

<h1><code>#</code>1</h1>

<pre><code>0 LOAD_GLOBAL              0 (print_tuple)
3 CALL_FUNCTION            0
6 POP_TOP
7 LOAD_CONST               0 (None)
10 RETURN_VALUE
</code></pre>

<h1><code>#</code>2</h1>

<pre><code> 0 LOAD_GLOBAL              0 (print_tuple)
 3 LOAD_CONST               4 ((1, 2, 3))
 6 CALL_FUNCTION            1
 9 POP_TOP
10 LOAD_CONST               0 (None)
13 RETURN_VALUE
</code></pre>

<blockquote>
  <p>I doubt the experienced behavior has a practical use (who really used static variables in C, without breeding bugs ?)</p>
</blockquote>

<p>As you can see, there <em>is</em> a performance benefit when using immutable default arguments.  This can make a difference if it's a frequently called function or the default argument takes a long time to construct.  Also, bear in mind that Python isn't C.  In C you have constants that are pretty much free.  In Python you don't have this benefit.</p>

    </div>
    <table class="fw">
    <tr>
    <td class="vt">
<div class="post-menu"><a href="/a/1134613/878520" title="short permalink to this answer" class="short-link" id="link-post-1134613">share</a><span class="lsep">|</span><a href="/posts/1134613/edit" class="suggest-edit-post" title="revise and improve this post">edit</a><span class="lsep">|</span><a href="#"
       class="flag-post-link"
       title="flag this post for serious problems or moderator attention"
       data-postid="1134613">flag</a></div>                    </td>
    <td align="right" class="post-signature">
<div class="user-info ">
    <div class="user-action-time">
        <a href="/posts/1134613/revisions" title="show all edits to this post">edited <span title="2013-04-02 21:52:30Z" class="relativetime">Apr 2 '13 at 21:52</span></a>
    </div>
    <div class="user-gravatar32">
        
    </div>
    <div class="user-details">
        <br>
        
    </div>
</div>    </td>
            


    <td align="right" class="post-signature">   
       

    <div class="user-info user-hover">
    <div class="user-action-time">
        answered <span title="2009-07-15 23:18:36Z" class="relativetime">Jul 15 '09 at 23:18</span>
    </div>
    <div class="user-gravatar32">
        <a href="/users/2147/jason-baker"><div class="gravatar-wrapper-32"><img src="https://www.gravatar.com/avatar/b8e26b9942e7193a4fe32c407aacfef5?s=32&d=identicon&r=PG" alt=""></div></a>
    </div>
    <div class="user-details">
        <a href="/users/2147/jason-baker">Jason Baker</a><br>
        <span class="reputation-score" title="reputation score 56126" dir="ltr">56.1k</span><span title="59 gold badges"><span class="badge1"></span><span class="badgecount">59</span></span><span title="238 silver badges"><span class="badge2"></span><span class="badgecount">238</span></span><span title="413 bronze badges"><span class="badge3"></span><span class="badgecount">413</span></span>
    </div>
</div>
    </td>
    </tr>
    </table>
</td>
        </tr>
        
<tr>
    <td class="votecell"></td>
    <td>
	    <div id="comments-1134613" class="comments " data-localized="true">
		    <table>
			    <tbody data-remaining-comments-count="0" 
			           data-addlink-html="add comment" 
			           data-addlink-disabled="false">

    <tr id="comment-955300" class="comment ">
        <td class="comment-actions">
            <table>
                <tbody>
                    <tr>
                        <td class=" comment-score">
                                &nbsp;&nbsp;
                        </td>
                        <td>
                                <a class="comment-up comment-up-off" title="this comment adds something useful to the post">upvote</a>
                        </td>
                    </tr>
                    <tr>
                        <td>&nbsp;</td>
                        <td>
                            <a class="comment-flag" title="flag this comment as unconstructive, offensive, or spam">flag</a>
                        </td>
                    </tr>
                </tbody>
            </table>
        </td>
        <td class="comment-text">
            <div style="display: block;" class="comment-body">
                <span class="comment-copy">how do you obtain the dissasembly?</span>
                &ndash;&nbsp;
                    <a href="/users/31610/tempus"
                       title="22469 reputation"
                       class="comment-user">Tempus</a>
                <span class="comment-date" dir="ltr"><span title="2009-07-16 13:21:36Z" class="relativetime-clean">Jul 16 '09 at 13:21</span></span>
                                                                            </div>
                    </td>
    </tr>
    <tr id="comment-956162" class="comment ">
        <td class="comment-actions">
            <table>
                <tbody>
                    <tr>
                        <td class=" comment-score">
                                <span title="number of &#39;useful comment&#39; votes received"
                                      class="cool">4</span>
                        </td>
                        <td>
                                <a class="comment-up comment-up-off" title="this comment adds something useful to the post">upvote</a>
                        </td>
                    </tr>
                    <tr>
                        <td>&nbsp;</td>
                        <td>
                            <a class="comment-flag" title="flag this comment as unconstructive, offensive, or spam">flag</a>
                        </td>
                    </tr>
                </tbody>
            </table>
        </td>
        <td class="comment-text">
            <div style="display: block;" class="comment-body">
                <span class="comment-copy">Use the dis module:  <a href="http://docs.python.org/library/dis.html" rel="nofollow">docs.python.org/library/dis.html</a></span>
                &ndash;&nbsp;
                    <a href="/users/2147/jason-baker"
                       title="56126 reputation"
                       class="comment-user">Jason Baker</a>
                <span class="comment-date" dir="ltr"><span title="2009-07-16 15:20:13Z" class="relativetime-clean">Jul 16 '09 at 15:20</span></span>
                                                                            </div>
                    </td>
    </tr>
    <tr id="comment-22350365" class="comment ">
        <td class="comment-actions">
            <table>
                <tbody>
                    <tr>
                        <td class=" comment-score">
                                &nbsp;&nbsp;
                        </td>
                        <td>
                                <a class="comment-up comment-up-off" title="this comment adds something useful to the post">upvote</a>
                        </td>
                    </tr>
                    <tr>
                        <td>&nbsp;</td>
                        <td>
                            <a class="comment-flag" title="flag this comment as unconstructive, offensive, or spam">flag</a>
                        </td>
                    </tr>
                </tbody>
            </table>
        </td>
        <td class="comment-text">
            <div style="display: block;" class="comment-body">
                <span class="comment-copy">How much of a difference could <code>3 LOAD_CONST    4 ((1, 2, 3))</code> make over even millions of iterations? ^0^. Maybe I&#39;ll profile and report back...</span>
                &ndash;&nbsp;
                    <a href="/users/741970/dimadima"
                       title="2432 reputation"
                       class="comment-user">dimadima</a>
                <span class="comment-date" dir="ltr"><span title="2013-03-31 16:39:10Z" class="relativetime-clean">Mar 31 '13 at 16:39</span></span>
                                                                            </div>
                    </td>
    </tr>
			    </tbody>
				    <tfoot>
					    <tr>
						    <td></td>
						    <td class="comment-form">
							    <form id="add-comment-1134613" 
							          class="" 
							          data-placeholdertext="Use comments to ask for more information or suggest improvements. Avoid comments like “+1” or “thanks”."></form>
						    </td>
					    </tr>
				    </tfoot>
		    </table>
	    </div>
			<a id="comments-link-1134613" 
			   class="comments-link " 
			   title="Use comments to ask for more information or suggest improvements. Avoid comments like “+1” or “thanks”." 
				href=#>add comment</a>
    </td>
</tr>    </table>
</div>

  
<a name="10304917"></a>
<div id="answer-10304917" class="answer" data-answerid="10304917" >
    <table>
        <tr>
            <td class="votecell">
                

<div class="vote">
    <input type="hidden" name="_id_" value="10304917">
    <a class="vote-up-off" title="This answer is useful (click again to undo)">up vote</a>
    <span class="vote-count-post ">8</span>
    <a class="vote-down-off" title="This answer is not useful (click again to undo)">down vote</a>
    


</div>

            </td>
            


<td class="answercell">
    <div class="post-text">
            <p>This behavior is not surprising if you take the following into consideration:</p>

<ol>
<li>The behavior of read-only class attributes upon assignment attempts, and that</li>
<li>Functions are objects (explained well in the accepted answer). </li>
</ol>

<p>The role of <strong>(2)</strong> has been covered extensively in this thread. <strong>(1)</strong> is likely the astonishment causing factor, as this behavior is not "intuitive" when coming from other languages.</p>

<p><strong>(1)</strong> is described in the Python <a href="http://docs.python.org/tutorial/classes.html" rel="nofollow">tutorial on classes</a>. In an attempt to assign a value to a read-only class attribute:</p>

<blockquote>
  <p>...all variables found outside of the innermost scope are
  read-only (<strong><em>an attempt to write to such a variable will simply create a
  new local variable in the innermost scope, leaving the identically
  named outer variable unchanged</em></strong>).</p>
</blockquote>

<p>Look back to the original example and consider the above points:</p>

<pre><code>def foo(a=[]):
    a.append(5)
    return a
</code></pre>

<p>Here <code>foo</code> is an object and <code>a</code> is an attribute of <code>foo</code> (available at <code>foo.func_defs[0]</code>). Since <code>a</code> is a list, <code>a</code> is mutable and is thus a read-write attribute of <code>foo</code>. It is initialized to the empty list as specified by the signature when the function is instantiated, and is available for reading and writing as long as the function object exists. </p>

<p>Calling <code>foo</code> without overriding a default uses that default's value from <code>foo.func_defs</code>. In this case, <code>foo.func_defs[0]</code> is used for <code>a</code> within function object's code scope. Changes to <code>a</code> change <code>foo.func_defs[0]</code>, which is part of the <code>foo</code> object and persists between execution of the code in <code>foo</code>.</p>

<p>Now, compare this to the example from the documentation on <a href="http://docs.python.org/tutorial/controlflow.html#default-argument-values" rel="nofollow">emulating the default argument behavior of other languages</a>, such that the function signature defaults are used every time the function is executed:</p>

<pre><code>def foo(a, L=None):
    if L is None:
        L = []
    L.append(a)
    return L
</code></pre>

<p>Taking <strong>(1)</strong> and <strong>(2)</strong> into account, one can see why this accomplishes the the desired behavior: </p>

<ul>
<li>When the <code>foo</code> function object is instantiated, <code>foo.func_defs[0]</code> is set to <code>None</code>, an immutable object.</li>
<li>When the function is executed with defaults (with no parameter specified for <code>L</code> in the function call), <code>foo.func_defs[0]</code> (<code>None</code>) is available in the local scope as <code>L</code>.</li>
<li>Upon <code>L = []</code>, the assignment cannot succeed at <code>foo.func_defs[0]</code>, because that attribute is read-only. </li>
<li>Per <strong>(1)</strong>, <strong><em>a new local variable also named <code>L</code> is created in the local scope</em></strong> and used for the remainder of the function call. <code>foo.func_defs[0]</code> thus remains unchanged for future invocations of <code>foo</code>.</li>
</ul>

    </div>
    <table class="fw">
    <tr>
    <td class="vt">
<div class="post-menu"><a href="/a/10304917/878520" title="short permalink to this answer" class="short-link" id="link-post-10304917">share</a><span class="lsep">|</span><a href="/posts/10304917/edit" class="suggest-edit-post" title="revise and improve this post">edit</a><span class="lsep">|</span><a href="#"
       class="flag-post-link"
       title="flag this post for serious problems or moderator attention"
       data-postid="10304917">flag</a></div>                    </td>
    <td align="right" class="post-signature">
<div class="user-info ">
    <div class="user-action-time">
        <a href="/posts/10304917/revisions" title="show all edits to this post">edited <span title="2013-04-01 15:30:56Z" class="relativetime">Apr 1 '13 at 15:30</span></a>
    </div>
    <div class="user-gravatar32">
        
    </div>
    <div class="user-details">
        <br>
        
    </div>
</div>    </td>
            


    <td align="right" class="post-signature">   
       

    <div class="user-info user-hover">
    <div class="user-action-time">
        answered <span title="2012-04-24 19:43:13Z" class="relativetime">Apr 24 '12 at 19:43</span>
    </div>
    <div class="user-gravatar32">
        <a href="/users/741970/dimadima"><div class="gravatar-wrapper-32"><img src="https://www.gravatar.com/avatar/0f017d8f2411f7ae90ffe61149390127?s=32&d=identicon&r=PG" alt=""></div></a>
    </div>
    <div class="user-details">
        <a href="/users/741970/dimadima">dimadima</a><br>
        <span class="reputation-score" title="reputation score " dir="ltr">2,432</span><span title="19 silver badges"><span class="badge2"></span><span class="badgecount">19</span></span><span title="33 bronze badges"><span class="badge3"></span><span class="badgecount">33</span></span>
    </div>
</div>
    </td>
    </tr>
    </table>
</td>
        </tr>
        
<tr>
    <td class="votecell"></td>
    <td>
	    <div id="comments-10304917" class="comments  dno" data-localized="true">
		    <table>
			    <tbody data-remaining-comments-count="0" 
			           data-addlink-html="add comment" 
			           data-addlink-disabled="false">
					    <tr><td></td><td></td></tr>
			    </tbody>
				    <tfoot>
					    <tr>
						    <td></td>
						    <td class="comment-form">
							    <form id="add-comment-10304917" 
							          class="" 
							          data-placeholdertext="Use comments to ask for more information or suggest improvements. Avoid comments like “+1” or “thanks”."></form>
						    </td>
					    </tr>
				    </tfoot>
		    </table>
	    </div>
			<a id="comments-link-10304917" 
			   class="comments-link " 
			   title="Use comments to ask for more information or suggest improvements. Avoid comments like “+1” or “thanks”." 
				href=#>add comment</a>
    </td>
</tr>    </table>
</div>

  
<a name="15133978"></a>
<div id="answer-15133978" class="answer" data-answerid="15133978" >
    <table>
        <tr>
            <td class="votecell">
                

<div class="vote">
    <input type="hidden" name="_id_" value="15133978">
    <a class="vote-up-off" title="This answer is useful (click again to undo)">up vote</a>
    <span class="vote-count-post ">6</span>
    <a class="vote-down-off" title="This answer is not useful (click again to undo)">down vote</a>
    


</div>

            </td>
            


<td class="answercell">
    <div class="post-text">
            <p>A simple workaround using None</p>

<pre><code>&gt;&gt;&gt; def bar(b, data=None):
...     data = data or []
...     data.append(b)
...     return data
... 
&gt;&gt;&gt; bar(3)
[3]
&gt;&gt;&gt; bar(3)
[3]
&gt;&gt;&gt; bar(3)
[3]
&gt;&gt;&gt; bar(3, [34])
[34, 3]
&gt;&gt;&gt; bar(3, [34])
[34, 3]
</code></pre>

    </div>
    <table class="fw">
    <tr>
    <td class="vt">
<div class="post-menu"><a href="/a/15133978/878520" title="short permalink to this answer" class="short-link" id="link-post-15133978">share</a><span class="lsep">|</span><a href="/posts/15133978/edit" class="suggest-edit-post" title="revise and improve this post">edit</a><span class="lsep">|</span><a href="#"
       class="flag-post-link"
       title="flag this post for serious problems or moderator attention"
       data-postid="15133978">flag</a></div>                    </td>
            


    <td align="right" class="post-signature">   
       

    <div class="user-info ">
    <div class="user-action-time">
        answered <span title="2013-02-28 11:10:16Z" class="relativetime">Feb 28 '13 at 11:10</span>
    </div>
    <div class="user-gravatar32">
        <a href="/users/252135/hugo24"><div class="gravatar-wrapper-32"><img src="https://www.gravatar.com/avatar/931a2dd90c239e6bbc42092c65069ba8?s=32&d=identicon&r=PG" alt=""></div></a>
    </div>
    <div class="user-details">
        <a href="/users/252135/hugo24">hugo24</a><br>
        <span class="reputation-score" title="reputation score " dir="ltr">411</span><span title="3 silver badges"><span class="badge2"></span><span class="badgecount">3</span></span><span title="13 bronze badges"><span class="badge3"></span><span class="badgecount">13</span></span>
    </div>
</div>
    </td>
    </tr>
    </table>
</td>
        </tr>
        
<tr>
    <td class="votecell"></td>
    <td>
	    <div id="comments-15133978" class="comments " data-localized="true">
		    <table>
			    <tbody data-remaining-comments-count="0" 
			           data-addlink-html="add comment" 
			           data-addlink-disabled="false">

    <tr id="comment-35292917" class="comment ">
        <td class="comment-actions">
            <table>
                <tbody>
                    <tr>
                        <td class=" comment-score">
                                &nbsp;&nbsp;
                        </td>
                        <td>
                                <a class="comment-up comment-up-off" title="this comment adds something useful to the post">upvote</a>
                        </td>
                    </tr>
                    <tr>
                        <td>&nbsp;</td>
                        <td>
                            <a class="comment-flag" title="flag this comment as unconstructive, offensive, or spam">flag</a>
                        </td>
                    </tr>
                </tbody>
            </table>
        </td>
        <td class="comment-text">
            <div style="display: block;" class="comment-body">
                <span class="comment-copy">I love this idiom.</span>
                &ndash;&nbsp;
                    <a href="/users/691859/2rs2ts"
                       title="3294 reputation"
                       class="comment-user">2rs2ts</a>
                <span class="comment-date" dir="ltr"><span title="2014-04-15 17:45:06Z" class="relativetime-clean">Apr 15 at 17:45</span></span>
                                                                            </div>
                    </td>
    </tr>
			    </tbody>
				    <tfoot>
					    <tr>
						    <td></td>
						    <td class="comment-form">
							    <form id="add-comment-15133978" 
							          class="" 
							          data-placeholdertext="Use comments to ask for more information or suggest improvements. Avoid comments like “+1” or “thanks”."></form>
						    </td>
					    </tr>
				    </tfoot>
		    </table>
	    </div>
			<a id="comments-link-15133978" 
			   class="comments-link " 
			   title="Use comments to ask for more information or suggest improvements. Avoid comments like “+1” or “thanks”." 
				href=#>add comment</a>
    </td>
</tr>    </table>
</div>

  
<a name="14336301"></a>
<div id="answer-14336301" class="answer" data-answerid="14336301" >
    <table>
        <tr>
            <td class="votecell">
                

<div class="vote">
    <input type="hidden" name="_id_" value="14336301">
    <a class="vote-up-off" title="This answer is useful (click again to undo)">up vote</a>
    <span class="vote-count-post ">6</span>
    <a class="vote-down-off" title="This answer is not useful (click again to undo)">down vote</a>
    


</div>

            </td>
            


<td class="answercell">
    <div class="post-text">
            <p>You can get round this by replacing the object (and therefore the tie with the scope):</p>

<pre><code>def foo(a=[]):
    a = list(a)
    a.append(5)
    return a
</code></pre>

<p>Ugly, but it works.</p>

    </div>
    <table class="fw">
    <tr>
    <td class="vt">
<div class="post-menu"><a href="/a/14336301/878520" title="short permalink to this answer" class="short-link" id="link-post-14336301">share</a><span class="lsep">|</span><a href="/posts/14336301/edit" class="suggest-edit-post" title="revise and improve this post">edit</a><span class="lsep">|</span><a href="#"
       class="flag-post-link"
       title="flag this post for serious problems or moderator attention"
       data-postid="14336301">flag</a></div>                    </td>
            


    <td align="right" class="post-signature">   
       

    <div class="user-info ">
    <div class="user-action-time">
        answered <span title="2013-01-15 11:02:03Z" class="relativetime">Jan 15 '13 at 11:02</span>
    </div>
    <div class="user-gravatar32">
        <a href="/users/734463/jdborg"><div class="gravatar-wrapper-32"><img src="http://i.stack.imgur.com/efw4Z.jpg?s=32&g=1" alt=""></div></a>
    </div>
    <div class="user-details">
        <a href="/users/734463/jdborg">jdborg</a><br>
        <span class="reputation-score" title="reputation score " dir="ltr">2,009</span><span title="4 gold badges"><span class="badge1"></span><span class="badgecount">4</span></span><span title="28 silver badges"><span class="badge2"></span><span class="badgecount">28</span></span><span title="55 bronze badges"><span class="badge3"></span><span class="badgecount">55</span></span>
    </div>
</div>
    </td>
    </tr>
    </table>
</td>
        </tr>
        
<tr>
    <td class="votecell"></td>
    <td>
	    <div id="comments-14336301" class="comments " data-localized="true">
		    <table>
			    <tbody data-remaining-comments-count="0" 
			           data-addlink-html="add comment" 
			           data-addlink-disabled="false">

    <tr id="comment-20074742" class="comment ">
        <td class="comment-actions">
            <table>
                <tbody>
                    <tr>
                        <td class=" comment-score">
                                <span title="number of &#39;useful comment&#39; votes received"
                                      class="cool">1</span>
                        </td>
                        <td>
                                <a class="comment-up comment-up-off" title="this comment adds something useful to the post">upvote</a>
                        </td>
                    </tr>
                    <tr>
                        <td>&nbsp;</td>
                        <td>
                            <a class="comment-flag" title="flag this comment as unconstructive, offensive, or spam">flag</a>
                        </td>
                    </tr>
                </tbody>
            </table>
        </td>
        <td class="comment-text">
            <div style="display: block;" class="comment-body">
                <span class="comment-copy">This is a nice solution in cases where you&#39;re using automatic documentation generation software to document the types of arguments expected by the function.  Putting a=None and then setting a to [] if a is None doesn&#39;t help a reader understand at a glance what is expected.</span>
                &ndash;&nbsp;
                    <a href="/users/1293501/michael-scott-cuthbert"
                       title="717 reputation"
                       class="comment-user">Michael Scott Cuthbert</a>
                <span class="comment-date" dir="ltr"><span title="2013-01-20 06:55:05Z" class="relativetime-clean">Jan 20 '13 at 6:55</span></span>
                                                                            </div>
                    </td>
    </tr>
			    </tbody>
				    <tfoot>
					    <tr>
						    <td></td>
						    <td class="comment-form">
							    <form id="add-comment-14336301" 
							          class="" 
							          data-placeholdertext="Use comments to ask for more information or suggest improvements. Avoid comments like “+1” or “thanks”."></form>
						    </td>
					    </tr>
				    </tfoot>
		    </table>
	    </div>
			<a id="comments-link-14336301" 
			   class="comments-link " 
			   title="Use comments to ask for more information or suggest improvements. Avoid comments like “+1” or “thanks”." 
				href=#>add comment</a>
    </td>
</tr>    </table>
</div>

  
<a name="13518071"></a>
<div id="answer-13518071" class="answer" data-answerid="13518071" >
    <table>
        <tr>
            <td class="votecell">
                

<div class="vote">
    <input type="hidden" name="_id_" value="13518071">
    <a class="vote-up-off" title="This answer is useful (click again to undo)">up vote</a>
    <span class="vote-count-post ">10</span>
    <a class="vote-down-off" title="This answer is not useful (click again to undo)">down vote</a>
    


</div>

            </td>
            


<td class="answercell">
    <div class="post-text">
            <p>1)  The so-called problem of "Mutable Default Argument" is in general a special example demonstrating that:<br>
"All functions with this problem <strong>suffer also from similar side effect problem on the actual parameter</strong>,"<br>
That is against the rules of functional programming, usually undesiderable and should be fixed both together.</p>

<p>Example:</p>

<pre><code>def foo(a=[]):                 # the same problematic function
    a.append(5)
    return a

&gt;&gt;&gt; somevar = [1, 2]           # an example without a default parameter
&gt;&gt;&gt; foo(somevar)
[1, 2, 5]
&gt;&gt;&gt; somevar
[1, 2, 5]                      # usually expected [1, 2]
</code></pre>

<p><strong>Solution</strong>:  a <strong>copy</strong><br>
An absolutely safe solution is to <strong><code>copy</code></strong> or <strong><code>deepcopy</code></strong> the input object first and then to do whatever with the copy.</p>

<pre><code>def foo(a=[]):
    a = a[:]     # a copy
    a.append(5)
    return a     # or everything safe by one line: "return a + [5]"
</code></pre>

<p>Many builtin mutable types have a copy method like <code>some_dict.copy()</code> or <code>some_set.copy()</code> or can be copied easy like <code>somelist[:]</code> or <code>list(some_list)</code>. Every object can be also copied by <code>copy.copy(any_object)</code> or more thorough by <code>copy.deepcopy()</code> (the latter useful if the mutable object is composed from mutable objects). Some objects are fundamentally based on side effects like "file" object and can not be meaningfully reproduced by copy. <a href="http://effbot.org/pyfaq/how-do-i-copy-an-object-in-python.htm">copying</a></p>

<p>Example problem for <a href="http://stackoverflow.com/q/13484107/448474">a similar SO question</a></p>

<pre><code>class Test(object):            # the original problematic class
  def __init__(self, var1=[]):
    self._var1 = var1

somevar = [1, 2]               # an example without a default parameter
t1 = Test(somevar)
t2 = Test(somevar)
t1._var1.append([1])
print somevar                  # [1, 2, [1]] but usually expected [1, 2]
print t2._var1                 # [1, 2, [1]] but usually expected [1, 2]
</code></pre>

<p>It shouldn't be neither saved in any <em>public</em> attribute of an instance returned by this function. (Assuming that <em>private</em> attributes of instance should not be modified from outside of this class or subclasses by convention. i.e. <code>_var1</code> is a private attribute )</p>

<p>Conclusion:<br>
Input parameters objects shouldn't be modified in place (mutated) nor they should not be binded into an object returned by the function. (If we prefere programming without side effects which is strongly recommended. see <a href="http://en.wikipedia.org/wiki/Side_effect_%28computer_science%29">Wiki about "side effect"</a> (The first two paragraphs are relevent in this context.)
.)</p>

<p>2)<br>
Only if the side effect on the actual parameter is required but unwanted on the default parameter then the useful solution is <code>def ...(var1=None):</code> <code>if var1 is None:</code> <code>var1 = []</code> <a href="http://effbot.org/zone/default-values.htm#what-to-do-instead">More..</a></p>

<p>3) In some cases is <a href="http://effbot.org/zone/default-values.htm#valid-uses-for-mutable-defaults">the mutable behavior of default parameters useful</a>.</p>

    </div>
    <table class="fw">
    <tr>
    <td class="vt">
<div class="post-menu"><a href="/a/13518071/878520" title="short permalink to this answer" class="short-link" id="link-post-13518071">share</a><span class="lsep">|</span><a href="/posts/13518071/edit" class="suggest-edit-post" title="revise and improve this post">edit</a><span class="lsep">|</span><a href="#"
       class="flag-post-link"
       title="flag this post for serious problems or moderator attention"
       data-postid="13518071">flag</a></div>                    </td>
            


    <td align="right" class="post-signature">   
       

    <div class="user-info ">
    <div class="user-action-time">
        answered <span title="2012-11-22 18:09:04Z" class="relativetime">Nov 22 '12 at 18:09</span>
    </div>
    <div class="user-gravatar32">
        <a href="/users/448474/hynekcer"><div class="gravatar-wrapper-32"><img src="https://www.gravatar.com/avatar/f6bb69115337eaa824a694710c348bf7?s=32&d=identicon&r=PG" alt=""></div></a>
    </div>
    <div class="user-details">
        <a href="/users/448474/hynekcer">hynekcer</a><br>
        <span class="reputation-score" title="reputation score " dir="ltr">2,205</span><span title="10 silver badges"><span class="badge2"></span><span class="badgecount">10</span></span><span title="26 bronze badges"><span class="badge3"></span><span class="badgecount">26</span></span>
    </div>
</div>
    </td>
    </tr>
    </table>
</td>
        </tr>
        
<tr>
    <td class="votecell"></td>
    <td>
	    <div id="comments-13518071" class="comments " data-localized="true">
		    <table>
			    <tbody data-remaining-comments-count="0" 
			           data-addlink-html="add comment" 
			           data-addlink-disabled="false">

    <tr id="comment-36118939" class="comment ">
        <td class="comment-actions">
            <table>
                <tbody>
                    <tr>
                        <td class=" comment-score">
                                <span title="number of &#39;useful comment&#39; votes received"
                                      class="cool">1</span>
                        </td>
                        <td>
                                <a class="comment-up comment-up-off" title="this comment adds something useful to the post">upvote</a>
                        </td>
                    </tr>
                    <tr>
                        <td>&nbsp;</td>
                        <td>
                            <a class="comment-flag" title="flag this comment as unconstructive, offensive, or spam">flag</a>
                        </td>
                    </tr>
                </tbody>
            </table>
        </td>
        <td class="comment-text">
            <div style="display: block;" class="comment-body">
                <span class="comment-copy">I hope you&#39;re aware that Python is <i>not</i> a functional programming language.</span>
                &ndash;&nbsp;
                    <a href="/users/1875565/veky"
                       title="131 reputation"
                       class="comment-user">Veky</a>
                <span class="comment-date" dir="ltr"><span title="2014-05-08 13:18:07Z" class="relativetime-clean">May 8 at 13:18</span></span>
                                                                            </div>
                    </td>
    </tr>
    <tr id="comment-36126140" class="comment ">
        <td class="comment-actions">
            <table>
                <tbody>
                    <tr>
                        <td class=" comment-score">
                                <span title="number of &#39;useful comment&#39; votes received"
                                      class="cool">1</span>
                        </td>
                        <td>
                                <a class="comment-up comment-up-off" title="this comment adds something useful to the post">upvote</a>
                        </td>
                    </tr>
                    <tr>
                        <td>&nbsp;</td>
                        <td>
                            <a class="comment-flag" title="flag this comment as unconstructive, offensive, or spam">flag</a>
                        </td>
                    </tr>
                </tbody>
            </table>
        </td>
        <td class="comment-text">
            <div style="display: block;" class="comment-body">
                <span class="comment-copy">Yes, Python is a multi-paragigm language with some functional features. (&quot;Don&#39;t make every problem look like a nail just because you have a hammer.&quot;) Many of them are in Python best practicies. Python has an interesting <a href="https://docs.python.org/2/howto/functional.html" rel="nofollow">HOWTO Functional Programming</a> Other features are closures and currying, not mentioned here.</span>
                &ndash;&nbsp;
                    <a href="/users/448474/hynekcer"
                       title="2205 reputation"
                       class="comment-user">hynekcer</a>
                <span class="comment-date" dir="ltr"><span title="2014-05-08 15:54:34Z" class="relativetime-clean">May 8 at 15:54</span></span>
                                                                            </div>
                    </td>
    </tr>
			    </tbody>
				    <tfoot>
					    <tr>
						    <td></td>
						    <td class="comment-form">
							    <form id="add-comment-13518071" 
							          class="" 
							          data-placeholdertext="Use comments to ask for more information or suggest improvements. Avoid comments like “+1” or “thanks”."></form>
						    </td>
					    </tr>
				    </tfoot>
		    </table>
	    </div>
			<a id="comments-link-13518071" 
			   class="comments-link " 
			   title="Use comments to ask for more information or suggest improvements. Avoid comments like “+1” or “thanks”." 
				href=#>add comment</a>
    </td>
</tr>    </table>
</div>

  
<a name="11416002"></a>
<div id="answer-11416002" class="answer" data-answerid="11416002" >
    <table>
        <tr>
            <td class="votecell">
                

<div class="vote">
    <input type="hidden" name="_id_" value="11416002">
    <a class="vote-up-off" title="This answer is useful (click again to undo)">up vote</a>
    <span class="vote-count-post ">30</span>
    <a class="vote-down-off" title="This answer is not useful (click again to undo)">down vote</a>
    


</div>

            </td>
            


<td class="answercell">
    <div class="post-text">
            <p>AFAICS no one has yet posted the relevant part of the <a href="http://docs.python.org/reference/compound_stmts.html#function-definitions">documentation</a>:</p>

<blockquote>
  <p><strong>Default parameter values are evaluated when the function definition is executed.</strong> This means that the expression is evaluated once, when the function is defined, and that the same “pre-computed” value is used for each call. This is especially important to understand when a default parameter is a mutable object, such as a list or a dictionary: if the function modifies the object (e.g. by appending an item to a list), the default value is in effect modified. This is generally not what was intended. A way around this is to use None as the default, and explicitly test for it in the body of the function [...]</p>
</blockquote>

    </div>
    <table class="fw">
    <tr>
    <td class="vt">
<div class="post-menu"><a href="/a/11416002/878520" title="short permalink to this answer" class="short-link" id="link-post-11416002">share</a><span class="lsep">|</span><a href="/posts/11416002/edit" class="suggest-edit-post" title="revise and improve this post">edit</a><span class="lsep">|</span><a href="#"
       class="flag-post-link"
       title="flag this post for serious problems or moderator attention"
       data-postid="11416002">flag</a></div>                    </td>
            


    <td align="right" class="post-signature">   
       

    <div class="user-info user-hover">
    <div class="user-action-time">
        answered <span title="2012-07-10 14:50:42Z" class="relativetime">Jul 10 '12 at 14:50</span>
    </div>
    <div class="user-gravatar32">
        <a href="/users/296974/glglgl"><div class="gravatar-wrapper-32"><img src="https://www.gravatar.com/avatar/0e26cfe3ac75cd582ca200fbc6fa0421?s=32&d=identicon&r=PG" alt=""></div></a>
    </div>
    <div class="user-details">
        <a href="/users/296974/glglgl">glglgl</a><br>
        <span class="reputation-score" title="reputation score 34276" dir="ltr">34.3k</span><span title="3 gold badges"><span class="badge1"></span><span class="badgecount">3</span></span><span title="33 silver badges"><span class="badge2"></span><span class="badgecount">33</span></span><span title="61 bronze badges"><span class="badge3"></span><span class="badgecount">61</span></span>
    </div>
</div>
    </td>
    </tr>
    </table>
</td>
        </tr>
        
<tr>
    <td class="votecell"></td>
    <td>
	    <div id="comments-11416002" class="comments " data-localized="true">
		    <table>
			    <tbody data-remaining-comments-count="0" 
			           data-addlink-html="add comment" 
			           data-addlink-disabled="false">

    <tr id="comment-35944900" class="comment ">
        <td class="comment-actions">
            <table>
                <tbody>
                    <tr>
                        <td class=" comment-score">
                                <span title="number of &#39;useful comment&#39; votes received"
                                      class="cool">2</span>
                        </td>
                        <td>
                                <a class="comment-up comment-up-off" title="this comment adds something useful to the post">upvote</a>
                        </td>
                    </tr>
                    <tr>
                        <td>&nbsp;</td>
                        <td>
                            <a class="comment-flag" title="flag this comment as unconstructive, offensive, or spam">flag</a>
                        </td>
                    </tr>
                </tbody>
            </table>
        </td>
        <td class="comment-text">
            <div style="display: block;" class="comment-body">
                <span class="comment-copy">The phrases &quot;this is not generally what was intended&quot; and &quot;a way around this is&quot; smell like they&#39;re documenting a design flaw.</span>
                &ndash;&nbsp;
                    <a href="/users/146821/bukzor"
                       title="10624 reputation"
                       class="comment-user">bukzor</a>
                <span class="comment-date" dir="ltr"><span title="2014-05-03 20:53:15Z" class="relativetime-clean">May 3 at 20:53</span></span>
                                                                            </div>
                    </td>
    </tr>
    <tr id="comment-37538347" class="comment ">
        <td class="comment-actions">
            <table>
                <tbody>
                    <tr>
                        <td class=" comment-score">
                                &nbsp;&nbsp;
                        </td>
                        <td>
                                <a class="comment-up comment-up-off" title="this comment adds something useful to the post">upvote</a>
                        </td>
                    </tr>
                    <tr>
                        <td>&nbsp;</td>
                        <td>
                            <a class="comment-flag" title="flag this comment as unconstructive, offensive, or spam">flag</a>
                        </td>
                    </tr>
                </tbody>
            </table>
        </td>
        <td class="comment-text">
            <div style="display: block;" class="comment-body">
                <span class="comment-copy">Documentation at last! +1! @bukzor: see the link in Liffredo&#39;s answer. The &#39;automatic&#39; caching ability is amazing.</span>
                &ndash;&nbsp;
                    <a href="/users/3372045/matthew"
                       title="82 reputation"
                       class="comment-user">Matthew</a>
                <span class="comment-date" dir="ltr"><span title="2014-06-18 18:11:08Z" class="relativetime-clean">2 days ago</span></span>
                                                                            </div>
                    </td>
    </tr>
    <tr id="comment-37549919" class="comment ">
        <td class="comment-actions">
            <table>
                <tbody>
                    <tr>
                        <td class=" comment-score">
                                &nbsp;&nbsp;
                        </td>
                        <td>
                                <a class="comment-up comment-up-off" title="this comment adds something useful to the post">upvote</a>
                        </td>
                    </tr>
                    <tr>
                        <td>&nbsp;</td>
                        <td>
                            <a class="comment-flag" title="flag this comment as unconstructive, offensive, or spam">flag</a>
                        </td>
                    </tr>
                </tbody>
            </table>
        </td>
        <td class="comment-text">
            <div style="display: block;" class="comment-body">
                <span class="comment-copy">@Matthew: I&#39;m well aware, but it&#39;s not worth the pitfall. You&#39;ll generally see style guides and linters unconditionally flag mutable default values as wrong for this reason. The explicit way to do the same thing is to stuff an attribute onto the function (<code>function.data = &#91;&#93;</code>) or better yet, make an object.</span>
                &ndash;&nbsp;
                    <a href="/users/146821/bukzor"
                       title="10624 reputation"
                       class="comment-user">bukzor</a>
                <span class="comment-date" dir="ltr"><span title="2014-06-19 03:59:30Z" class="relativetime-clean">yesterday</span></span>
                    <span class="edited-yes" title="this comment was edited 1 time"></span>
                                                                            </div>
                    </td>
    </tr>
    <tr id="comment-37577356" class="comment ">
        <td class="comment-actions">
            <table>
                <tbody>
                    <tr>
                        <td class=" comment-score">
                                &nbsp;&nbsp;
                        </td>
                        <td>
                                <a class="comment-up comment-up-off" title="this comment adds something useful to the post">upvote</a>
                        </td>
                    </tr>
                    <tr>
                        <td>&nbsp;</td>
                        <td>
                            <a class="comment-flag" title="flag this comment as unconstructive, offensive, or spam">flag</a>
                        </td>
                    </tr>
                </tbody>
            </table>
        </td>
        <td class="comment-text">
            <div style="display: block;" class="comment-body">
                <span class="comment-copy">@bukzor: Pitfalls need to be noted and documented, which is why this question is good and has received so many upvotes. At the same time, pitfalls don&#39;t necessarily need to be removed. How many Python beginners have passed a list to a function that modified it, and were shocked to see the changes show up in the original variable? Yet mutable object types are wonderful, when you understand how to use them. I guess it just boils down to opinion on this particular pitfall.</span>
                &ndash;&nbsp;
                    <a href="/users/3372045/matthew"
                       title="82 reputation"
                       class="comment-user">Matthew</a>
                <span class="comment-date" dir="ltr"><span title="2014-06-19 17:54:06Z" class="relativetime-clean">yesterday</span></span>
                                                                            </div>
                    </td>
    </tr>
			    </tbody>
				    <tfoot>
					    <tr>
						    <td></td>
						    <td class="comment-form">
							    <form id="add-comment-11416002" 
							          class="" 
							          data-placeholdertext="Use comments to ask for more information or suggest improvements. Avoid comments like “+1” or “thanks”."></form>
						    </td>
					    </tr>
				    </tfoot>
		    </table>
	    </div>
			<a id="comments-link-11416002" 
			   class="comments-link " 
			   title="Use comments to ask for more information or suggest improvements. Avoid comments like “+1” or “thanks”." 
				href=#>add comment</a>
    </td>
</tr>    </table>
</div>

  
<a name="6092808"></a>
<div id="answer-6092808" class="answer" data-answerid="6092808" >
    <table>
        <tr>
            <td class="votecell">
                

<div class="vote">
    <input type="hidden" name="_id_" value="6092808">
    <a class="vote-up-off" title="This answer is useful (click again to undo)">up vote</a>
    <span class="vote-count-post ">11</span>
    <a class="vote-down-off" title="This answer is not useful (click again to undo)">down vote</a>
    


</div>

            </td>
            


<td class="answercell">
    <div class="post-text">
            <p>This actually has nothing to do with default values, other than that it often comes up as an unexpected behaviour when you write functions with mutable default values.</p>

<pre><code>&gt;&gt;&gt; def foo(a):
    a.append(5)
    print a

&gt;&gt;&gt; a  = [5]
&gt;&gt;&gt; foo(a)
[5, 5]
&gt;&gt;&gt; foo(a)
[5, 5, 5]
&gt;&gt;&gt; foo(a)
[5, 5, 5, 5]
&gt;&gt;&gt; foo(a)
[5, 5, 5, 5, 5]
</code></pre>

<p>No default values in sight in this code, but you get exactly the same problem.</p>

<p>The problem is that <code>foo</code> is <em>modifying</em> a mutable variable passed in from the caller, when the caller doesn't expect this. Code like this would be fine if the function was called something like <code>append_5</code>; then the caller would be calling the function in order to modify the value they pass in, and the behaviour would be expected. But such a function would be very unlikely to take a default argument, and probably wouldn't return the list (since the caller already has a reference to that list; the one it just passed in).</p>

<p>Your original <code>foo</code>, with a default argument, shouldn't be modifying <code>a</code> whether it was explicitly passed in or got the default value. Your code should leave mutable arguments alone unless it is clear from the context/name/documentation that the arguments are supposed to be modified. Using mutable values passed in as arguments as local temporaries is an extremely bad idea, whether we're in Python or not and whether there are default arguments involved or not.</p>

<p>If you need to destructively manipulate a local temporary in the course of computing something, and you need to start your manipulation from an argument value, you need to make a copy.</p>

    </div>
    <table class="fw">
    <tr>
    <td class="vt">
<div class="post-menu"><a href="/a/6092808/878520" title="short permalink to this answer" class="short-link" id="link-post-6092808">share</a><span class="lsep">|</span><a href="/posts/6092808/edit" class="suggest-edit-post" title="revise and improve this post">edit</a><span class="lsep">|</span><a href="#"
       class="flag-post-link"
       title="flag this post for serious problems or moderator attention"
       data-postid="6092808">flag</a></div>                    </td>
            


    <td align="right" class="post-signature">   
       

    <div class="user-info ">
    <div class="user-action-time">
        answered <span title="2011-05-23 04:24:30Z" class="relativetime">May 23 '11 at 4:24</span>
    </div>
    <div class="user-gravatar32">
        <a href="/users/450128/ben"><div class="gravatar-wrapper-32"><img src="https://www.gravatar.com/avatar/2f72b3fdc99fe9fd1bbeb2f9da1d2c0a?s=32&d=identicon&r=PG" alt=""></div></a>
    </div>
    <div class="user-details">
        <a href="/users/450128/ben">Ben</a><br>
        <span class="reputation-score" title="reputation score 21201" dir="ltr">21.2k</span><span title="4 gold badges"><span class="badge1"></span><span class="badgecount">4</span></span><span title="34 silver badges"><span class="badge2"></span><span class="badgecount">34</span></span><span title="68 bronze badges"><span class="badge3"></span><span class="badgecount">68</span></span>
    </div>
</div>
    </td>
    </tr>
    </table>
</td>
        </tr>
        
<tr>
    <td class="votecell"></td>
    <td>
	    <div id="comments-6092808" class="comments " data-localized="true">
		    <table>
			    <tbody data-remaining-comments-count="0" 
			           data-addlink-html="add comment" 
			           data-addlink-disabled="false">

    <tr id="comment-16186544" class="comment ">
        <td class="comment-actions">
            <table>
                <tbody>
                    <tr>
                        <td class=" comment-score">
                                <span title="number of &#39;useful comment&#39; votes received"
                                      class="cool">1</span>
                        </td>
                        <td>
                                <a class="comment-up comment-up-off" title="this comment adds something useful to the post">upvote</a>
                        </td>
                    </tr>
                    <tr>
                        <td>&nbsp;</td>
                        <td>
                            <a class="comment-flag" title="flag this comment as unconstructive, offensive, or spam">flag</a>
                        </td>
                    </tr>
                </tbody>
            </table>
        </td>
        <td class="comment-text">
            <div style="display: block;" class="comment-body">
                <span class="comment-copy">Although related, I think this is distinct behaviour (as we expect <code>append</code> to change <code>a</code> &quot;in-place&quot;). That a <b>default mutable is not re-instantiated on each call</b> is the &quot;unexpected&quot; bit... at least for me. :)</span>
                &ndash;&nbsp;
                    <a href="/users/1240268/andy-hayden"
                       title="36618 reputation"
                       class="comment-user">Andy Hayden</a>
                <span class="comment-date" dir="ltr"><span title="2012-08-24 12:27:38Z" class="relativetime-clean">Aug 24 '12 at 12:27</span></span>
                                                                            </div>
                    </td>
    </tr>
			    </tbody>
				    <tfoot>
					    <tr>
						    <td></td>
						    <td class="comment-form">
							    <form id="add-comment-6092808" 
							          class="" 
							          data-placeholdertext="Use comments to ask for more information or suggest improvements. Avoid comments like “+1” or “thanks”."></form>
						    </td>
					    </tr>
				    </tfoot>
		    </table>
	    </div>
			<a id="comments-link-6092808" 
			   class="comments-link " 
			   title="Use comments to ask for more information or suggest improvements. Avoid comments like “+1” or “thanks”." 
				href=#>add comment</a>
    </td>
</tr>    </table>
</div>

  
<a name="1139730"></a>
<div id="answer-1139730" class="answer" data-answerid="1139730" >
    <table>
        <tr>
            <td class="votecell">
                

<div class="vote">
    <input type="hidden" name="_id_" value="1139730">
    <a class="vote-up-off" title="This answer is useful (click again to undo)">up vote</a>
    <span class="vote-count-post ">2</span>
    <a class="vote-down-off" title="This answer is not useful (click again to undo)">down vote</a>
    


</div>

            </td>
            


<td class="answercell">
    <div class="post-text">
            <p>It may be true that:</p>

<ol>
<li>Someone is using every language/library feature, and</li>
<li>Switching the behavior here would be ill-advised, but</li>
</ol>

<p>it is entirely consistent to hold to both of the features above and still make another point:</p>

<ol>
<li>It is a confusing feature and it is unfortunate in Python.</li>
</ol>

<p>The other answers, or at least some of them either make points 1 and 2 but not 3, or make point 3 and downplay points 1 and 2. <strong>But all three are true.</strong></p>

<p>It may be true that switching horses in midstream here would be asking for significant breakage, and that there could be more problems created by changing Python to intuitively handle Stefano's opening snippet. And it may be true that someone who knew Python internals well could explain a minefield of consequences. <em>However,</em></p>

<p>The existing behavior is not Pythonic, and Python is successful because very little about the language violates the principle of least astonishment anywhere <em>near</em> this badly. It is a real problem, whether or not it would be wise to uproot it. It is a design flaw. If you understand the language much better by trying to trace out the behavior, I can say that C++ does all of this and more; you learn a lot by navigating, for instance, subtle pointer errors. But this is not Pythonic: people who care about Python enough to persevere in the face of this behavior are people who are drawn to the language because Python has far fewer surprises than other language. Dabblers and the curious become Pythonistas when they are astonished at how little time it takes to get something working--not because of a design fl--I mean, hidden logic puzzle--that cuts against the intuitions of programmers who are drawn to Python because it <strong>Just Works</strong>.</p>

    </div>
    <table class="fw">
    <tr>
    <td class="vt">
<div class="post-menu"><a href="/a/1139730/878520" title="short permalink to this answer" class="short-link" id="link-post-1139730">share</a><span class="lsep">|</span><a href="/posts/1139730/edit" class="suggest-edit-post" title="revise and improve this post">edit</a><span class="lsep">|</span><a href="#"
       class="flag-post-link"
       title="flag this post for serious problems or moderator attention"
       data-postid="1139730">flag</a></div>                    </td>
            


    <td align="right" class="post-signature">   
       

    <div class="user-info user-hover">
    <div class="user-action-time">
        answered <span title="2009-07-16 19:17:59Z" class="relativetime">Jul 16 '09 at 19:17</span>
    </div>
    <div class="user-gravatar32">
        <a href="/users/116906/jonathanhayward"><div class="gravatar-wrapper-32"><img src="https://www.gravatar.com/avatar/7947663ae0b5333554fd462635418724?s=32&d=identicon&r=PG" alt=""></div></a>
    </div>
    <div class="user-details">
        <a href="/users/116906/jonathanhayward">JonathanHayward</a><br>
        <span class="reputation-score" title="reputation score " dir="ltr">1,329</span><span title="3 gold badges"><span class="badge1"></span><span class="badgecount">3</span></span><span title="16 silver badges"><span class="badge2"></span><span class="badgecount">16</span></span><span title="50 bronze badges"><span class="badge3"></span><span class="badgecount">50</span></span>
    </div>
</div>
    </td>
    </tr>
    </table>
</td>
        </tr>
        
<tr>
    <td class="votecell"></td>
    <td>
	    <div id="comments-1139730" class="comments " data-localized="true">
		    <table>
			    <tbody data-remaining-comments-count="4" 
			           data-addlink-html="add comment" 
			           data-addlink-disabled="false">

    <tr id="comment-14994287" class="comment ">
        <td class="comment-actions">
            <table>
                <tbody>
                    <tr>
                        <td class=" comment-score">
                                <span title="number of &#39;useful comment&#39; votes received"
                                      class="cool">1</span>
                        </td>
                        <td>
                                <a class="comment-up comment-up-off" title="this comment adds something useful to the post">upvote</a>
                        </td>
                    </tr>
                    <tr>
                        <td>&nbsp;</td>
                        <td>
                            <a class="comment-flag" title="flag this comment as unconstructive, offensive, or spam">flag</a>
                        </td>
                    </tr>
                </tbody>
            </table>
        </td>
        <td class="comment-text">
            <div style="display: block;" class="comment-body">
                <span class="comment-copy">-1 Although a defensible perspective, this not an answer, <b>and</b> I disagree with it. Too many special exceptions beget their own corner cases.</span>
                &ndash;&nbsp;
                    <a href="/users/21640/marcin"
                       title="25091 reputation"
                       class="comment-user">Marcin</a>
                <span class="comment-date" dir="ltr"><span title="2012-07-07 19:24:33Z" class="relativetime-clean">Jul 7 '12 at 19:24</span></span>
                                                                            </div>
                    </td>
    </tr>
    <tr id="comment-19419209" class="comment ">
        <td class="comment-actions">
            <table>
                <tbody>
                    <tr>
                        <td class=" comment-score">
                                &nbsp;&nbsp;
                        </td>
                        <td>
                                <a class="comment-up comment-up-off" title="this comment adds something useful to the post">upvote</a>
                        </td>
                    </tr>
                    <tr>
                        <td>&nbsp;</td>
                        <td>
                            <a class="comment-flag" title="flag this comment as unconstructive, offensive, or spam">flag</a>
                        </td>
                    </tr>
                </tbody>
            </table>
        </td>
        <td class="comment-text">
            <div style="display: block;" class="comment-body">
                <span class="comment-copy">&quot;The existing behavior is not Pythonic&quot; is an amazingly ignorant thing to say about something so fundamental to Python, and betrays a woeful under-appreciation of its object model.</span>
                &ndash;&nbsp;
                    <a href="/users/11265/matthew-trevor"
                       title="5189 reputation"
                       class="comment-user">Matthew Trevor</a>
                <span class="comment-date" dir="ltr"><span title="2012-12-27 10:13:24Z" class="relativetime-clean">Dec 27 '12 at 10:13</span></span>
                                                                            </div>
                    </td>
    </tr>
    <tr id="comment-19435546" class="comment ">
        <td class="comment-actions">
            <table>
                <tbody>
                    <tr>
                        <td class=" comment-score">
                                <span title="number of &#39;useful comment&#39; votes received"
                                      class="cool">1</span>
                        </td>
                        <td>
                                <a class="comment-up comment-up-off" title="this comment adds something useful to the post">upvote</a>
                        </td>
                    </tr>
                    <tr>
                        <td>&nbsp;</td>
                        <td>
                            <a class="comment-flag" title="flag this comment as unconstructive, offensive, or spam">flag</a>
                        </td>
                    </tr>
                </tbody>
            </table>
        </td>
        <td class="comment-text">
            <div style="display: block;" class="comment-body">
                <span class="comment-copy">So then, it is &quot;amazingly ignorant&quot; to say that in Python it would make more sense for a default argument of [] to remain [] every time the function is called?</span>
                &ndash;&nbsp;
                    <a href="/users/116906/jonathanhayward"
                       title="1329 reputation"
                       class="comment-user">JonathanHayward</a>
                <span class="comment-date" dir="ltr"><span title="2012-12-27 22:09:35Z" class="relativetime-clean">Dec 27 '12 at 22:09</span></span>
                                                                            </div>
                    </td>
    </tr>
    <tr id="comment-19435596" class="comment ">
        <td class="comment-actions">
            <table>
                <tbody>
                    <tr>
                        <td class=" comment-score">
                                <span title="number of &#39;useful comment&#39; votes received"
                                      class="cool">1</span>
                        </td>
                        <td>
                                <a class="comment-up comment-up-off" title="this comment adds something useful to the post">upvote</a>
                        </td>
                    </tr>
                    <tr>
                        <td>&nbsp;</td>
                        <td>
                            <a class="comment-flag" title="flag this comment as unconstructive, offensive, or spam">flag</a>
                        </td>
                    </tr>
                </tbody>
            </table>
        </td>
        <td class="comment-text">
            <div style="display: block;" class="comment-body">
                <span class="comment-copy">And it is ignorant to consider as an unfortunate idiom setting a default argument to None, and then in the body of the body of the function setting if argument == None: argument = []? Is it ignorant to consider this idiom unfortunate as often people want what a naive newcomer would expect, that if you assign f(argument = []), argument will automatically default to a value of []?</span>
                &ndash;&nbsp;
                    <a href="/users/116906/jonathanhayward"
                       title="1329 reputation"
                       class="comment-user">JonathanHayward</a>
                <span class="comment-date" dir="ltr"><span title="2012-12-27 22:11:58Z" class="relativetime-clean">Dec 27 '12 at 22:11</span></span>
                                                                            </div>
                    </td>
    </tr>
    <tr id="comment-19436087" class="comment ">
        <td class="comment-actions">
            <table>
                <tbody>
                    <tr>
                        <td class=" comment-score">
                                <span title="number of &#39;useful comment&#39; votes received"
                                      class="cool">1</span>
                        </td>
                        <td>
                                <a class="comment-up comment-up-off" title="this comment adds something useful to the post">upvote</a>
                        </td>
                    </tr>
                    <tr>
                        <td>&nbsp;</td>
                        <td>
                            <a class="comment-flag" title="flag this comment as unconstructive, offensive, or spam">flag</a>
                        </td>
                    </tr>
                </tbody>
            </table>
        </td>
        <td class="comment-text">
            <div style="display: block;" class="comment-body">
                <span class="comment-copy">But in Python, part of the spirit of the language is that you don&#39;t have to take too many deep dives; array.sort() works, and works  regardless of how little you understand about sorting, big-O, and constants. The beauty of Python in the array sorting mechanism, to give one of innumerable examples, is that you are not required to take a deep dive into internals. And to say it differently, the beauty of Python is that one is not ordinarily required to take a deep dive into implementation to get something that Just Works. And there is a workaround (...if argument == None: argument = []), FAIL.</span>
                &ndash;&nbsp;
                    <a href="/users/116906/jonathanhayward"
                       title="1329 reputation"
                       class="comment-user">JonathanHayward</a>
                <span class="comment-date" dir="ltr"><span title="2012-12-27 22:41:56Z" class="relativetime-clean">Dec 27 '12 at 22:41</span></span>
                                                                            </div>
                    </td>
    </tr>
			    </tbody>
				    <tfoot>
					    <tr>
						    <td></td>
						    <td class="comment-form">
							    <form id="add-comment-1139730" 
							          class="" 
							          data-placeholdertext="Use comments to ask for more information or suggest improvements. Avoid comments like “+1” or “thanks”."></form>
						    </td>
					    </tr>
				    </tfoot>
		    </table>
	    </div>
			<a id="comments-link-1139730" 
			   class="comments-link " 
			   title="Use comments to ask for more information or suggest improvements. Avoid comments like “+1” or “thanks”." 
				href=#>add / show <b>4</b> more comments</a>
    </td>
</tr>    </table>
</div>

  
<a name="1136611"></a>
<div id="answer-1136611" class="answer" data-answerid="1136611" >
    <table>
        <tr>
            <td class="votecell">
                

<div class="vote">
    <input type="hidden" name="_id_" value="1136611">
    <a class="vote-up-off" title="This answer is useful (click again to undo)">up vote</a>
    <span class="vote-count-post ">16</span>
    <a class="vote-down-off" title="This answer is not useful (click again to undo)">down vote</a>
    


</div>

            </td>
            


<td class="answercell">
    <div class="post-text">
            <p>I used to think that creating the objects at runtime would be the better approach.  I'm less certain now, since you do lose some useful features, though it may be worth it regardless simply to prevent newbie confusion.  The disadvantages of doing so are:</p>

<p><strong>1. Performance</strong></p>

<pre><code>def foo(arg=something_expensive_to_compute())):
    ...
</code></pre>

<p>If call-time evaluation is used, then the expensive function is called every time your function is used without an argument.  You'd either pay an expensive price on each call, or need to manually cache the value externally, polluting your namespace and adding verbosity.</p>

<p><strong>2. Forcing bound parameters</strong></p>

<p>A useful trick is to bind parameters of a lambda to the <em>current</em> binding of a variable when the lambda is created.  For example:</p>

<pre><code>funcs = [ lambda i=i: i for i in range(10)]
</code></pre>

<p>This returns a list of functions that return 0,1,2,3... respectively.  If the behaviour is changed, they will instead bind <code>i</code> to the <em>call-time</em> value of i, so you would get a list of functions that all returned <code>9</code>.</p>

<p>The only way to implement this otherwise would be to create a further closure with the i bound, ie:</p>

<pre><code>def make_func(i): return lambda: i
funcs = [make_func(i) for i in range(10)]
</code></pre>

<p><strong>3. Introspection</strong></p>

<p>Consider the code:</p>

<pre><code>def foo(a='test', b=100, c=[]):
   print a,b,c
</code></pre>

<p>We can get information about the arguments and defaults using the <code>inspect</code> module, which </p>

<pre><code>&gt;&gt;&gt; inspect.getargspec(foo)
(['a', 'b', 'c'], None, None, ('test', 100, []))
</code></pre>

<p>This information is very useful for things like document generation, metaprogramming, decorators etc.</p>

<p>Now, suppose the behaviour of defaults could be changed so that this is the equivalent of:</p>

<pre><code>_undefined = object()  # sentinel value

def foo(a=_undefined, b=_undefined, c=_undefined)
    if a is _undefined: a='test'
    if b is _undefined: b=100
    if c is _undefined: c=[]
</code></pre>

<p>However, we've lost the ability to introspect, and see what the default arguments <em>are</em>.  Because the objects haven't been constructed, we can't ever get hold of them without actually calling the function.  The best we could do is to store off the source code and return that as a string.</p>

    </div>
    <table class="fw">
    <tr>
    <td class="vt">
<div class="post-menu"><a href="/a/1136611/878520" title="short permalink to this answer" class="short-link" id="link-post-1136611">share</a><span class="lsep">|</span><a href="/posts/1136611/edit" class="suggest-edit-post" title="revise and improve this post">edit</a><span class="lsep">|</span><a href="#"
       class="flag-post-link"
       title="flag this post for serious problems or moderator attention"
       data-postid="1136611">flag</a></div>                    </td>
    <td align="right" class="post-signature">
<div class="user-info ">
    <div class="user-action-time">
        <a href="/posts/1136611/revisions" title="show all edits to this post">edited <span title="2009-07-16 19:13:35Z" class="relativetime">Jul 16 '09 at 19:13</span></a>
    </div>
    <div class="user-gravatar32">
        
    </div>
    <div class="user-details">
        <br>
        
    </div>
</div>    </td>
            


    <td align="right" class="post-signature">   
       

    <div class="user-info user-hover">
    <div class="user-action-time">
        answered <span title="2009-07-16 10:05:09Z" class="relativetime">Jul 16 '09 at 10:05</span>
    </div>
    <div class="user-gravatar32">
        <a href="/users/9493/brian"><div class="gravatar-wrapper-32"><img src="https://www.gravatar.com/avatar/7895e5fdbabe3fc5e09272bb602257d7?s=32&d=identicon&r=PG" alt=""></div></a>
    </div>
    <div class="user-details">
        <a href="/users/9493/brian">Brian</a><br>
        <span class="reputation-score" title="reputation score 47203" dir="ltr">47.2k</span><span title="17 gold badges"><span class="badge1"></span><span class="badgecount">17</span></span><span title="60 silver badges"><span class="badge2"></span><span class="badgecount">60</span></span><span title="83 bronze badges"><span class="badge3"></span><span class="badgecount">83</span></span>
    </div>
</div>
    </td>
    </tr>
    </table>
</td>
        </tr>
        
<tr>
    <td class="votecell"></td>
    <td>
	    <div id="comments-1136611" class="comments " data-localized="true">
		    <table>
			    <tbody data-remaining-comments-count="3" 
			           data-addlink-html="add comment" 
			           data-addlink-disabled="false">

    <tr id="comment-954490" class="comment ">
        <td class="comment-actions">
            <table>
                <tbody>
                    <tr>
                        <td class=" comment-score">
                                &nbsp;&nbsp;
                        </td>
                        <td>
                                <a class="comment-up comment-up-off" title="this comment adds something useful to the post">upvote</a>
                        </td>
                    </tr>
                    <tr>
                        <td>&nbsp;</td>
                        <td>
                            <a class="comment-flag" title="flag this comment as unconstructive, offensive, or spam">flag</a>
                        </td>
                    </tr>
                </tbody>
            </table>
        </td>
        <td class="comment-text">
            <div style="display: block;" class="comment-body">
                <span class="comment-copy">you could achieve introspection also if for each there was a function to create the default argument instead of a value. the inspect module will just call that function.</span>
                &ndash;&nbsp;
                    <a href="/users/40916/yairchu"
                       title="9529 reputation"
                       class="comment-user">yairchu</a>
                <span class="comment-date" dir="ltr"><span title="2009-07-16 10:24:57Z" class="relativetime-clean">Jul 16 '09 at 10:24</span></span>
                                                                            </div>
                    </td>
    </tr>
    <tr id="comment-954611" class="comment ">
        <td class="comment-actions">
            <table>
                <tbody>
                    <tr>
                        <td class=" comment-score">
                                &nbsp;&nbsp;
                        </td>
                        <td>
                                <a class="comment-up comment-up-off" title="this comment adds something useful to the post">upvote</a>
                        </td>
                    </tr>
                    <tr>
                        <td>&nbsp;</td>
                        <td>
                            <a class="comment-flag" title="flag this comment as unconstructive, offensive, or spam">flag</a>
                        </td>
                    </tr>
                </tbody>
            </table>
        </td>
        <td class="comment-text">
            <div style="display: block;" class="comment-body">
                <span class="comment-copy">@SilentGhost:  I&#39;m talking about if the behaviour was changed to recreate it - creating it once is the current behaviour, and why the mutable default problem exists.</span>
                &ndash;&nbsp;
                    <a href="/users/9493/brian"
                       title="47203 reputation"
                       class="comment-user">Brian</a>
                <span class="comment-date" dir="ltr"><span title="2009-07-16 10:59:05Z" class="relativetime-clean">Jul 16 '09 at 10:59</span></span>
                                                                            </div>
                    </td>
    </tr>
    <tr id="comment-954628" class="comment ">
        <td class="comment-actions">
            <table>
                <tbody>
                    <tr>
                        <td class=" comment-score">
                                &nbsp;&nbsp;
                        </td>
                        <td>
                                <a class="comment-up comment-up-off" title="this comment adds something useful to the post">upvote</a>
                        </td>
                    </tr>
                    <tr>
                        <td>&nbsp;</td>
                        <td>
                            <a class="comment-flag" title="flag this comment as unconstructive, offensive, or spam">flag</a>
                        </td>
                    </tr>
                </tbody>
            </table>
        </td>
        <td class="comment-text">
            <div style="display: block;" class="comment-body">
                <span class="comment-copy">@yairchu: That assumes the construction is safe to so (ie has no side effects).  Introspecting the args shouldn&#39;t <i>do</i> anything, but evaluating arbitrary code could well end up having an effect.</span>
                &ndash;&nbsp;
                    <a href="/users/9493/brian"
                       title="47203 reputation"
                       class="comment-user">Brian</a>
                <span class="comment-date" dir="ltr"><span title="2009-07-16 11:02:31Z" class="relativetime-clean">Jul 16 '09 at 11:02</span></span>
                                                                            </div>
                    </td>
    </tr>
    <tr id="comment-957188" class="comment ">
        <td class="comment-actions">
            <table>
                <tbody>
                    <tr>
                        <td class=" comment-score">
                                &nbsp;&nbsp;
                        </td>
                        <td>
                                <a class="comment-up comment-up-off" title="this comment adds something useful to the post">upvote</a>
                        </td>
                    </tr>
                    <tr>
                        <td>&nbsp;</td>
                        <td>
                            <a class="comment-flag" title="flag this comment as unconstructive, offensive, or spam">flag</a>
                        </td>
                    </tr>
                </tbody>
            </table>
        </td>
        <td class="comment-text">
            <div style="display: block;" class="comment-body">
                <span class="comment-copy">A different language design often just means writing things differently.  Your first example could easily be written as: _expensive = expensive(); def foo(arg=_expensive), if you specifically <i>don&#39;t</i> want it reevaluated.</span>
                &ndash;&nbsp;
                    <a href="/users/136829/glenn-maynard"
                       title="23955 reputation"
                       class="comment-user">Glenn Maynard</a>
                <span class="comment-date" dir="ltr"><span title="2009-07-16 18:23:28Z" class="relativetime-clean">Jul 16 '09 at 18:23</span></span>
                                                                            </div>
                    </td>
    </tr>
    <tr id="comment-957359" class="comment ">
        <td class="comment-actions">
            <table>
                <tbody>
                    <tr>
                        <td class=" comment-score">
                                &nbsp;&nbsp;
                        </td>
                        <td>
                                <a class="comment-up comment-up-off" title="this comment adds something useful to the post">upvote</a>
                        </td>
                    </tr>
                    <tr>
                        <td>&nbsp;</td>
                        <td>
                            <a class="comment-flag" title="flag this comment as unconstructive, offensive, or spam">flag</a>
                        </td>
                    </tr>
                </tbody>
            </table>
        </td>
        <td class="comment-text">
            <div style="display: block;" class="comment-body">
                <span class="comment-copy">@Glenn - that&#39;s what I was referring to with &quot;cache the variable externally&quot; - it is a bit more verbose, and you end up with extra variables in your namespace though.</span>
                &ndash;&nbsp;
                    <a href="/users/9493/brian"
                       title="47203 reputation"
                       class="comment-user">Brian</a>
                <span class="comment-date" dir="ltr"><span title="2009-07-16 19:04:51Z" class="relativetime-clean">Jul 16 '09 at 19:04</span></span>
                                                                            </div>
                    </td>
    </tr>
			    </tbody>
				    <tfoot>
					    <tr>
						    <td></td>
						    <td class="comment-form">
							    <form id="add-comment-1136611" 
							          class="" 
							          data-placeholdertext="Use comments to ask for more information or suggest improvements. Avoid comments like “+1” or “thanks”."></form>
						    </td>
					    </tr>
				    </tfoot>
		    </table>
	    </div>
			<a id="comments-link-1136611" 
			   class="comments-link " 
			   title="Use comments to ask for more information or suggest improvements. Avoid comments like “+1” or “thanks”." 
				href=#>add / show <b>3</b> more comments</a>
    </td>
</tr>    </table>
</div>

  
<a name="1137164"></a>
<div id="answer-1137164" class="answer" data-answerid="1137164" >
    <table>
        <tr>
            <td class="votecell">
                

<div class="vote">
    <input type="hidden" name="_id_" value="1137164">
    <a class="vote-up-off" title="This answer is useful (click again to undo)">up vote</a>
    <span class="vote-count-post ">8</span>
    <a class="vote-down-off" title="This answer is not useful (click again to undo)">down vote</a>
    


</div>

            </td>
            


<td class="answercell">
    <div class="post-text">
            <p>the shortest answer would probably be "definition is execution", therefore the whole argument makes no strict sense. as a more contrived example, you may cite this:</p>

<pre><code>def a(): return []

def b(x=a()):
    print x
</code></pre>

<p>hopefully it's enough to show that not executing the default argument expressions at the execution time of the def statement isn't easy or doesn't make sense, or both.</p>

<p>i agree it's a gotcha when you try to use default constructors, though.</p>

    </div>
    <table class="fw">
    <tr>
    <td class="vt">
<div class="post-menu"><a href="/a/1137164/878520" title="short permalink to this answer" class="short-link" id="link-post-1137164">share</a><span class="lsep">|</span><a href="/posts/1137164/edit" class="suggest-edit-post" title="revise and improve this post">edit</a><span class="lsep">|</span><a href="#"
       class="flag-post-link"
       title="flag this post for serious problems or moderator attention"
       data-postid="1137164">flag</a></div>                    </td>
            


    <td align="right" class="post-signature">   
       

    <div class="user-info ">
    <div class="user-action-time">
        answered <span title="2009-07-16 12:19:23Z" class="relativetime">Jul 16 '09 at 12:19</span>
    </div>
    <div class="user-gravatar32">
        <a href="/users/38749/baczek"><div class="gravatar-wrapper-32"><img src="https://www.gravatar.com/avatar/b933d7cc8e7845f229f752c81d18ec8f?s=32&d=identicon&r=PG" alt=""></div></a>
    </div>
    <div class="user-details">
        <a href="/users/38749/baczek">Baczek</a><br>
        <span class="reputation-score" title="reputation score " dir="ltr">413</span><span title="1 gold badge"><span class="badge1"></span><span class="badgecount">1</span></span><span title="3 silver badges"><span class="badge2"></span><span class="badgecount">3</span></span><span title="12 bronze badges"><span class="badge3"></span><span class="badgecount">12</span></span>
    </div>
</div>
    </td>
    </tr>
    </table>
</td>
        </tr>
        
<tr>
    <td class="votecell"></td>
    <td>
	    <div id="comments-1137164" class="comments  dno" data-localized="true">
		    <table>
			    <tbody data-remaining-comments-count="0" 
			           data-addlink-html="add comment" 
			           data-addlink-disabled="false">
					    <tr><td></td><td></td></tr>
			    </tbody>
				    <tfoot>
					    <tr>
						    <td></td>
						    <td class="comment-form">
							    <form id="add-comment-1137164" 
							          class="" 
							          data-placeholdertext="Use comments to ask for more information or suggest improvements. Avoid comments like “+1” or “thanks”."></form>
						    </td>
					    </tr>
				    </tfoot>
		    </table>
	    </div>
			<a id="comments-link-1137164" 
			   class="comments-link " 
			   title="Use comments to ask for more information or suggest improvements. Avoid comments like “+1” or “thanks”." 
				href=#>add comment</a>
    </td>
</tr>    </table>
</div>

  
<a name="1133375"></a>
<div id="answer-1133375" class="answer" data-answerid="1133375" >
    <table>
        <tr>
            <td class="votecell">
                

<div class="vote">
    <input type="hidden" name="_id_" value="1133375">
    <a class="vote-up-off" title="This answer is useful (click again to undo)">up vote</a>
    <span class="vote-count-post ">12</span>
    <a class="vote-down-off" title="This answer is not useful (click again to undo)">down vote</a>
    


</div>

            </td>
            


<td class="answercell">
    <div class="post-text">
            <p>This behavior is easy explained by:</p>

<ol>
<li>function (class etc.) declaration is executed only once, creating all default value objects</li>
<li>everything is passed by reference</li>
</ol>

<p>So:</p>

<pre><code>def x(a=0, b=[], c=[], d=0):
    a = a + 1
    b = b + [1]
    c.append(1)
    print a, b, c
</code></pre>

<ol>
<li>a doesn't change - every assignment call creates new int object - new object is printed</li>
<li>b doesn't change - new array is build from default value and printed</li>
<li>c changes - operation is performed on same object - and it is printed</li>
</ol>

    </div>
    <table class="fw">
    <tr>
    <td class="vt">
<div class="post-menu"><a href="/a/1133375/878520" title="short permalink to this answer" class="short-link" id="link-post-1133375">share</a><span class="lsep">|</span><a href="/posts/1133375/edit" class="suggest-edit-post" title="revise and improve this post">edit</a><span class="lsep">|</span><a href="#"
       class="flag-post-link"
       title="flag this post for serious problems or moderator attention"
       data-postid="1133375">flag</a></div>                    </td>
    <td align="right" class="post-signature">
<div class="user-info ">
    <div class="user-action-time">
        <a href="/posts/1133375/revisions" title="show all edits to this post">edited <span title="2009-07-15 23:56:25Z" class="relativetime">Jul 15 '09 at 23:56</span></a>
    </div>
    <div class="user-gravatar32">
        
    </div>
    <div class="user-details">
        <br>
        
    </div>
</div>    </td>
            


    <td align="right" class="post-signature">   
       

    <div class="user-info ">
    <div class="user-action-time">
        answered <span title="2009-07-15 19:15:25Z" class="relativetime">Jul 15 '09 at 19:15</span>
    </div>
    <div class="user-gravatar32">
        <a href="/users/138017/ymv"><div class="gravatar-wrapper-32"><img src="https://www.gravatar.com/avatar/fcc33a5ee4018280e7d7d765c402f053?s=32&d=identicon&r=PG" alt=""></div></a>
    </div>
    <div class="user-details">
        <a href="/users/138017/ymv">ymv</a><br>
        <span class="reputation-score" title="reputation score " dir="ltr">1,067</span><span title="4 silver badges"><span class="badge2"></span><span class="badgecount">4</span></span><span title="13 bronze badges"><span class="badge3"></span><span class="badgecount">13</span></span>
    </div>
</div>
    </td>
    </tr>
    </table>
</td>
        </tr>
        
<tr>
    <td class="votecell"></td>
    <td>
	    <div id="comments-1133375" class="comments " data-localized="true">
		    <table>
			    <tbody data-remaining-comments-count="0" 
			           data-addlink-html="add comment" 
			           data-addlink-disabled="false">

    <tr id="comment-952456" class="comment ">
        <td class="comment-actions">
            <table>
                <tbody>
                    <tr>
                        <td class=" comment-score">
                                &nbsp;&nbsp;
                        </td>
                        <td>
                                <a class="comment-up comment-up-off" title="this comment adds something useful to the post">upvote</a>
                        </td>
                    </tr>
                    <tr>
                        <td>&nbsp;</td>
                        <td>
                            <a class="comment-flag" title="flag this comment as unconstructive, offensive, or spam">flag</a>
                        </td>
                    </tr>
                </tbody>
            </table>
        </td>
        <td class="comment-text">
            <div style="display: block;" class="comment-body">
                <span class="comment-copy">Your #4 could be confusing to people, since integers are immutable and so that &quot;if&quot; is not true.  For instance, with d set to 0, d.__add__(1) would return 1, but d would still be 0.</span>
                &ndash;&nbsp;
                    <a href="/users/108445/anon"
                       title="3358 reputation"
                       class="comment-user">Anon</a>
                <span class="comment-date" dir="ltr"><span title="2009-07-15 23:45:39Z" class="relativetime-clean">Jul 15 '09 at 23:45</span></span>
                                                                            </div>
                    </td>
    </tr>
    <tr id="comment-952500" class="comment ">
        <td class="comment-actions">
            <table>
                <tbody>
                    <tr>
                        <td class=" comment-score">
                                &nbsp;&nbsp;
                        </td>
                        <td>
                                <a class="comment-up comment-up-off" title="this comment adds something useful to the post">upvote</a>
                        </td>
                    </tr>
                    <tr>
                        <td>&nbsp;</td>
                        <td>
                            <a class="comment-flag" title="flag this comment as unconstructive, offensive, or spam">flag</a>
                        </td>
                    </tr>
                </tbody>
            </table>
        </td>
        <td class="comment-text">
            <div style="display: block;" class="comment-body">
                <span class="comment-copy">(Actually, <b>add</b> is a bad example, but integers being immutable still is my main point.)</span>
                &ndash;&nbsp;
                    <a href="/users/108445/anon"
                       title="3358 reputation"
                       class="comment-user">Anon</a>
                <span class="comment-date" dir="ltr"><span title="2009-07-15 23:54:43Z" class="relativetime-clean">Jul 15 '09 at 23:54</span></span>
                                                                            </div>
                    </td>
    </tr>
    <tr id="comment-952509" class="comment ">
        <td class="comment-actions">
            <table>
                <tbody>
                    <tr>
                        <td class=" comment-score">
                                &nbsp;&nbsp;
                        </td>
                        <td>
                                <a class="comment-up comment-up-off" title="this comment adds something useful to the post">upvote</a>
                        </td>
                    </tr>
                    <tr>
                        <td>&nbsp;</td>
                        <td>
                            <a class="comment-flag" title="flag this comment as unconstructive, offensive, or spam">flag</a>
                        </td>
                    </tr>
                </tbody>
            </table>
        </td>
        <td class="comment-text">
            <div style="display: block;" class="comment-body">
                <span class="comment-copy">yes, that wasn&#39;t good example</span>
                &ndash;&nbsp;
                    <a href="/users/138017/ymv"
                       title="1067 reputation"
                       class="comment-user">ymv</a>
                <span class="comment-date" dir="ltr"><span title="2009-07-15 23:57:06Z" class="relativetime-clean">Jul 15 '09 at 23:57</span></span>
                                                                            </div>
                    </td>
    </tr>
    <tr id="comment-952539" class="comment ">
        <td class="comment-actions">
            <table>
                <tbody>
                    <tr>
                        <td class=" comment-score">
                                &nbsp;&nbsp;
                        </td>
                        <td>
                                <a class="comment-up comment-up-off" title="this comment adds something useful to the post">upvote</a>
                        </td>
                    </tr>
                    <tr>
                        <td>&nbsp;</td>
                        <td>
                            <a class="comment-flag" title="flag this comment as unconstructive, offensive, or spam">flag</a>
                        </td>
                    </tr>
                </tbody>
            </table>
        </td>
        <td class="comment-text">
            <div style="display: block;" class="comment-body">
                <span class="comment-copy">Realized it to my chagrin after checking to see that, with b set to [], b.__add__([1]) returns [1] but also leaves b still [] even though lists are mutable.  My bad.</span>
                &ndash;&nbsp;
                    <a href="/users/108445/anon"
                       title="3358 reputation"
                       class="comment-user">Anon</a>
                <span class="comment-date" dir="ltr"><span title="2009-07-16 00:03:30Z" class="relativetime-clean">Jul 16 '09 at 0:03</span></span>
                                                                            </div>
                    </td>
    </tr>
    <tr id="comment-36118858" class="comment ">
        <td class="comment-actions">
            <table>
                <tbody>
                    <tr>
                        <td class=" comment-score">
                                &nbsp;&nbsp;
                        </td>
                        <td>
                                <a class="comment-up comment-up-off" title="this comment adds something useful to the post">upvote</a>
                        </td>
                    </tr>
                    <tr>
                        <td>&nbsp;</td>
                        <td>
                            <a class="comment-flag" title="flag this comment as unconstructive, offensive, or spam">flag</a>
                        </td>
                    </tr>
                </tbody>
            </table>
        </td>
        <td class="comment-text">
            <div style="display: block;" class="comment-body">
                <span class="comment-copy">@ANon: there is <code>__iadd__</code>, but it doesn&#39;t work with int. Of course. :-)</span>
                &ndash;&nbsp;
                    <a href="/users/1875565/veky"
                       title="131 reputation"
                       class="comment-user">Veky</a>
                <span class="comment-date" dir="ltr"><span title="2014-05-08 13:16:31Z" class="relativetime-clean">May 8 at 13:16</span></span>
                                                                            </div>
                    </td>
    </tr>
			    </tbody>
				    <tfoot>
					    <tr>
						    <td></td>
						    <td class="comment-form">
							    <form id="add-comment-1133375" 
							          class="" 
							          data-placeholdertext="Use comments to ask for more information or suggest improvements. Avoid comments like “+1” or “thanks”."></form>
						    </td>
					    </tr>
				    </tfoot>
		    </table>
	    </div>
			<a id="comments-link-1133375" 
			   class="comments-link " 
			   title="Use comments to ask for more information or suggest improvements. Avoid comments like “+1” or “thanks”." 
				href=#>add comment</a>
    </td>
</tr>    </table>
</div>

  
<a name="1134623"></a>
<div id="answer-1134623" class="answer" data-answerid="1134623" >
    <table>
        <tr>
            <td class="votecell">
                

<div class="vote">
    <input type="hidden" name="_id_" value="1134623">
    <a class="vote-up-off" title="This answer is useful (click again to undo)">up vote</a>
    <span class="vote-count-post ">36</span>
    <a class="vote-down-off" title="This answer is not useful (click again to undo)">down vote</a>
    


</div>

            </td>
            


<td class="answercell">
    <div class="post-text">
            <p>I know nothing about the python interpreter inner workings (and I'm not an expert in compilers and interpreters either) so don't blame me if I propose anything unsensible or impossible.</p>

<p>Provided that python objects <strong>are mutable</strong> I think that this should be taken into account when designing the default arguments stuff.
When you instantiate a list:</p>

<pre><code>a = []
</code></pre>

<p>you expect to get a <strong>new</strong> list referenced by <em>a</em>.</p>

<p>Why should the a=[] in</p>

<pre><code>def x(a=[]):
</code></pre>

<p>instantiate a new list on function definition and not on invocation?
It's just like you're asking "if the user doesn't provide the argument than <em>instantiate</em> a new list and use it as if it was produced by the caller".
I think this is ambiguous instead:</p>

<pre><code>def x(a=datetime.datetime.now()):
</code></pre>

<p>user, do you want <em>a</em> to default to the datetime corresponding to when you're defining or executing <em>x</em>?
In this case, as in the previous one, I'll keep the same behaviour as if the default argument "assignment" was the first instruction of the function (datetime.now() called on function invocation).
On the other hand, if the user wanted the defintion-time mapping he could write:</p>

<pre><code>b = datetime.datetime.now()
def x(a=b):
</code></pre>

<p>I know, I know: that's a closure. Alternatively python might provide a keyword to force definition-time binding:</p>

<pre><code>def x(static a=b):
</code></pre>

    </div>
    <table class="fw">
    <tr>
    <td class="vt">
<div class="post-menu"><a href="/a/1134623/878520" title="short permalink to this answer" class="short-link" id="link-post-1134623">share</a><span class="lsep">|</span><a href="/posts/1134623/edit" class="suggest-edit-post" title="revise and improve this post">edit</a><span class="lsep">|</span><a href="#"
       class="flag-post-link"
       title="flag this post for serious problems or moderator attention"
       data-postid="1134623">flag</a></div>                    </td>
            


    <td align="right" class="post-signature">   
       

    <div class="user-info user-hover">
    <div class="user-action-time">
        answered <span title="2009-07-15 23:21:09Z" class="relativetime">Jul 15 '09 at 23:21</span>
    </div>
    <div class="user-gravatar32">
        <a href="/users/123984/utaal"><div class="gravatar-wrapper-32"><img src="https://www.gravatar.com/avatar/98e8177ac82d61a351b3b636e244bbd5?s=32&d=identicon&r=PG" alt=""></div></a>
    </div>
    <div class="user-details">
        <a href="/users/123984/utaal">Utaal</a><br>
        <span class="reputation-score" title="reputation score " dir="ltr">1,938</span><span title="1 gold badge"><span class="badge1"></span><span class="badgecount">1</span></span><span title="13 silver badges"><span class="badge2"></span><span class="badgecount">13</span></span><span title="22 bronze badges"><span class="badge3"></span><span class="badgecount">22</span></span>
    </div>
</div>
    </td>
    </tr>
    </table>
</td>
        </tr>
        
<tr>
    <td class="votecell"></td>
    <td>
	    <div id="comments-1134623" class="comments " data-localized="true">
		    <table>
			    <tbody data-remaining-comments-count="1" 
			           data-addlink-html="add comment" 
			           data-addlink-disabled="false">

    <tr id="comment-952595" class="comment ">
        <td class="comment-actions">
            <table>
                <tbody>
                    <tr>
                        <td class=" comment-score">
                                <span title="number of &#39;useful comment&#39; votes received"
                                      class="warm">6</span>
                        </td>
                        <td>
                                <a class="comment-up comment-up-off" title="this comment adds something useful to the post">upvote</a>
                        </td>
                    </tr>
                    <tr>
                        <td>&nbsp;</td>
                        <td>
                            <a class="comment-flag" title="flag this comment as unconstructive, offensive, or spam">flag</a>
                        </td>
                    </tr>
                </tbody>
            </table>
        </td>
        <td class="comment-text">
            <div style="display: block;" class="comment-body">
                <span class="comment-copy">You could do: def x(a=None): And then, if a is None, set a=datetime.datetime.now()</span>
                &ndash;&nbsp;
                    <a href="/users/108445/anon"
                       title="3358 reputation"
                       class="comment-user">Anon</a>
                <span class="comment-date" dir="ltr"><span title="2009-07-16 00:18:29Z" class="relativetime-clean">Jul 16 '09 at 0:18</span></span>
                                                                            </div>
                    </td>
    </tr>
    <tr id="comment-954190" class="comment ">
        <td class="comment-actions">
            <table>
                <tbody>
                    <tr>
                        <td class=" comment-score">
                                <span title="number of &#39;useful comment&#39; votes received"
                                      class="cool">2</span>
                        </td>
                        <td>
                                <a class="comment-up comment-up-off" title="this comment adds something useful to the post">upvote</a>
                        </td>
                    </tr>
                    <tr>
                        <td>&nbsp;</td>
                        <td>
                            <a class="comment-flag" title="flag this comment as unconstructive, offensive, or spam">flag</a>
                        </td>
                    </tr>
                </tbody>
            </table>
        </td>
        <td class="comment-text">
            <div style="display: block;" class="comment-body">
                <span class="comment-copy">I know, that was just an example to explain why I would prefer execution-time binding.</span>
                &ndash;&nbsp;
                    <a href="/users/123984/utaal"
                       title="1938 reputation"
                       class="comment-user">Utaal</a>
                <span class="comment-date" dir="ltr"><span title="2009-07-16 09:01:35Z" class="relativetime-clean">Jul 16 '09 at 9:01</span></span>
                                                                            </div>
                    </td>
    </tr>
    <tr id="comment-2655414" class="comment ">
        <td class="comment-actions">
            <table>
                <tbody>
                    <tr>
                        <td class=" comment-score">
                                <span title="number of &#39;useful comment&#39; votes received"
                                      class="cool">1</span>
                        </td>
                        <td>
                                <a class="comment-up comment-up-off" title="this comment adds something useful to the post">upvote</a>
                        </td>
                    </tr>
                    <tr>
                        <td>&nbsp;</td>
                        <td>
                            <a class="comment-flag" title="flag this comment as unconstructive, offensive, or spam">flag</a>
                        </td>
                    </tr>
                </tbody>
            </table>
        </td>
        <td class="comment-text">
            <div style="display: block;" class="comment-body">
                <span class="comment-copy">lovely example indeed.</span>
                &ndash;&nbsp;
                    <a href="/users/274502/cawas"
                       title="3180 reputation"
                       class="comment-user">Cawas</a>
                <span class="comment-date" dir="ltr"><span title="2010-04-14 20:36:46Z" class="relativetime-clean">Apr 14 '10 at 20:36</span></span>
                                                                            </div>
                    </td>
    </tr>
    <tr id="comment-6587169" class="comment ">
        <td class="comment-actions">
            <table>
                <tbody>
                    <tr>
                        <td class=" comment-score">
                                <span title="number of &#39;useful comment&#39; votes received"
                                      class="cool">4</span>
                        </td>
                        <td>
                                <a class="comment-up comment-up-off" title="this comment adds something useful to the post">upvote</a>
                        </td>
                    </tr>
                    <tr>
                        <td>&nbsp;</td>
                        <td>
                            <a class="comment-flag" title="flag this comment as unconstructive, offensive, or spam">flag</a>
                        </td>
                    </tr>
                </tbody>
            </table>
        </td>
        <td class="comment-text">
            <div style="display: block;" class="comment-body">
                <span class="comment-copy">Thank you for this. I couldn&#39;t really put my finger on why this  irks me to no end. You have done it beautifully with a minimum of fuzz and confusion. As someone comming from systems programming in C++ and sometimes naively &quot;translating&quot; language features, this false friend kicked me in the in the soft of the head big time, just like class attributes. I understand why things are this way, but I cannot help but dislike it, no matter what positive might come of it. At least it is so contrary to my experience, that I&#39;ll probably (hopefully) never forget it...</span>
                &ndash;&nbsp;
                    <a href="/users/82673/andreast"
                       title="2289 reputation"
                       class="comment-user">AndreasT</a>
                <span class="comment-date" dir="ltr"><span title="2011-04-22 09:33:25Z" class="relativetime-clean">Apr 22 '11 at 9:33</span></span>
                    <span class="edited-yes" title="this comment was edited 1 time"></span>
                                                                            </div>
                    </td>
    </tr>
    <tr id="comment-8065966" class="comment ">
        <td class="comment-actions">
            <table>
                <tbody>
                    <tr>
                        <td class=" comment-score">
                                <span title="number of &#39;useful comment&#39; votes received"
                                      class="cool">2</span>
                        </td>
                        <td>
                                <a class="comment-up comment-up-off" title="this comment adds something useful to the post">upvote</a>
                        </td>
                    </tr>
                    <tr>
                        <td>&nbsp;</td>
                        <td>
                            <a class="comment-flag" title="flag this comment as unconstructive, offensive, or spam">flag</a>
                        </td>
                    </tr>
                </tbody>
            </table>
        </td>
        <td class="comment-text">
            <div style="display: block;" class="comment-body">
                <span class="comment-copy">@Andreas once you use Python for long enough, you begin to see how logical it is for Python to interpret things as class attributes the way it does - it is only because of the particular quirks and limitations of languages like C++ (and Java, and C#...) that it makes any sense for contents of the <code>class {}</code> block to be interpreted as belonging to the <i>instances</i> :) But when classes are first-class objects, obviously the natural thing is for their contents (in memory) to reflect their contents (in code).</span>
                &ndash;&nbsp;
                    <a href="/users/523612/karl-knechtel"
                       title="23353 reputation"
                       class="comment-user">Karl Knechtel</a>
                <span class="comment-date" dir="ltr"><span title="2011-07-22 19:55:07Z" class="relativetime-clean">Jul 22 '11 at 19:55</span></span>
                                                                            </div>
                    </td>
    </tr>
			    </tbody>
				    <tfoot>
					    <tr>
						    <td></td>
						    <td class="comment-form">
							    <form id="add-comment-1134623" 
							          class="" 
							          data-placeholdertext="Use comments to ask for more information or suggest improvements. Avoid comments like “+1” or “thanks”."></form>
						    </td>
					    </tr>
				    </tfoot>
		    </table>
	    </div>
			<a id="comments-link-1134623" 
			   class="comments-link " 
			   title="Use comments to ask for more information or suggest improvements. Avoid comments like “+1” or “thanks”." 
				href=#>add / show <b>1</b> more comment</a>
    </td>
</tr>    </table>
</div>

  
<a name="1133737"></a>
<div id="answer-1133737" class="answer" data-answerid="1133737" >
    <table>
        <tr>
            <td class="votecell">
                

<div class="vote">
    <input type="hidden" name="_id_" value="1133737">
    <a class="vote-up-off" title="This answer is useful (click again to undo)">up vote</a>
    <span class="vote-count-post ">11</span>
    <a class="vote-down-off" title="This answer is not useful (click again to undo)">down vote</a>
    


</div>

            </td>
            


<td class="answercell">
    <div class="post-text">
            <p>What you're asking is why this:</p>

<pre><code>def func(a=[], b = 2):
    pass
</code></pre>

<p>isn't internally equivalent to this:</p>

<pre><code>def func(a=None, b = None):
    a_default = lambda: []
    b_default = lambda: 2
    def actual_func(a=None, b=None):
        if a is None: a = a_default()
        if b is None: b = b_default()
    return actual_func
func = func()
</code></pre>

<p>except for the case of explicitly calling func(None, None), which we'll ignore.</p>

<p>In other words, instead of evaluating default parameters, why not store each of them, and evaluate them when the function is called?</p>

<p>One answer is probably right there--it would effectively turn every function with default parameters into a closure.  Even if it's all hidden away in the interpreter and not a full-blown closure, the data's got to be stored somewhere.  It'd be slower and use more memory.</p>

    </div>
    <table class="fw">
    <tr>
    <td class="vt">
<div class="post-menu"><a href="/a/1133737/878520" title="short permalink to this answer" class="short-link" id="link-post-1133737">share</a><span class="lsep">|</span><a href="/posts/1133737/edit" class="suggest-edit-post" title="revise and improve this post">edit</a><span class="lsep">|</span><a href="#"
       class="flag-post-link"
       title="flag this post for serious problems or moderator attention"
       data-postid="1133737">flag</a></div>                    </td>
            


    <td align="right" class="post-signature">   
       

    <div class="user-info ">
    <div class="user-action-time">
        answered <span title="2009-07-15 20:18:14Z" class="relativetime">Jul 15 '09 at 20:18</span>
    </div>
    <div class="user-gravatar32">
        <a href="/users/136829/glenn-maynard"><div class="gravatar-wrapper-32"><img src="https://www.gravatar.com/avatar/e92146e270ae11efac6405927b6439af?s=32&d=identicon&r=PG" alt=""></div></a>
    </div>
    <div class="user-details">
        <a href="/users/136829/glenn-maynard">Glenn Maynard</a><br>
        <span class="reputation-score" title="reputation score 23955" dir="ltr">24k</span><span title="3 gold badges"><span class="badge1"></span><span class="badgecount">3</span></span><span title="39 silver badges"><span class="badge2"></span><span class="badgecount">39</span></span><span title="79 bronze badges"><span class="badge3"></span><span class="badgecount">79</span></span>
    </div>
</div>
    </td>
    </tr>
    </table>
</td>
        </tr>
        
<tr>
    <td class="votecell"></td>
    <td>
	    <div id="comments-1133737" class="comments " data-localized="true">
		    <table>
			    <tbody data-remaining-comments-count="0" 
			           data-addlink-html="add comment" 
			           data-addlink-disabled="false">

    <tr id="comment-954338" class="comment ">
        <td class="comment-actions">
            <table>
                <tbody>
                    <tr>
                        <td class=" comment-score">
                                <span title="number of &#39;useful comment&#39; votes received"
                                      class="cool">1</span>
                        </td>
                        <td>
                                <a class="comment-up comment-up-off" title="this comment adds something useful to the post">upvote</a>
                        </td>
                    </tr>
                    <tr>
                        <td>&nbsp;</td>
                        <td>
                            <a class="comment-flag" title="flag this comment as unconstructive, offensive, or spam">flag</a>
                        </td>
                    </tr>
                </tbody>
            </table>
        </td>
        <td class="comment-text">
            <div style="display: block;" class="comment-body">
                <span class="comment-copy">It wouldn&#39;t need to be a closure - a better way to think of it would simply to make the bytecode creating defaults the first line of code - after all you&#39;re compiling the body at that point anyway - there&#39;s no real difference between code in the arguments and code in the body.</span>
                &ndash;&nbsp;
                    <a href="/users/9493/brian"
                       title="47203 reputation"
                       class="comment-user">Brian</a>
                <span class="comment-date" dir="ltr"><span title="2009-07-16 09:39:20Z" class="relativetime-clean">Jul 16 '09 at 9:39</span></span>
                                                                            </div>
                    </td>
    </tr>
    <tr id="comment-954824" class="comment ">
        <td class="comment-actions">
            <table>
                <tbody>
                    <tr>
                        <td class=" comment-score">
                                <span title="number of &#39;useful comment&#39; votes received"
                                      class="warm">5</span>
                        </td>
                        <td>
                                <a class="comment-up comment-up-off" title="this comment adds something useful to the post">upvote</a>
                        </td>
                    </tr>
                    <tr>
                        <td>&nbsp;</td>
                        <td>
                            <a class="comment-flag" title="flag this comment as unconstructive, offensive, or spam">flag</a>
                        </td>
                    </tr>
                </tbody>
            </table>
        </td>
        <td class="comment-text">
            <div style="display: block;" class="comment-body">
                <span class="comment-copy">True, but it would still slow Python down, and it would actually be quite surprising, unless you do the same for class definitions, which would make it stupidly slow as you would have to re-run the whole class definition each time you instantiate a class.  As mentioned, the fix would be more surprising than the problem.</span>
                &ndash;&nbsp;
                    <a href="/users/126214/lennart-regebro"
                       title="51662 reputation"
                       class="comment-user">Lennart Regebro</a>
                <span class="comment-date" dir="ltr"><span title="2009-07-16 11:49:40Z" class="relativetime-clean">Jul 16 '09 at 11:49</span></span>
                                                                            </div>
                    </td>
    </tr>
    <tr id="comment-955297" class="comment ">
        <td class="comment-actions">
            <table>
                <tbody>
                    <tr>
                        <td class=" comment-score">
                                &nbsp;&nbsp;
                        </td>
                        <td>
                                <a class="comment-up comment-up-off" title="this comment adds something useful to the post">upvote</a>
                        </td>
                    </tr>
                    <tr>
                        <td>&nbsp;</td>
                        <td>
                            <a class="comment-flag" title="flag this comment as unconstructive, offensive, or spam">flag</a>
                        </td>
                    </tr>
                </tbody>
            </table>
        </td>
        <td class="comment-text">
            <div style="display: block;" class="comment-body">
                <span class="comment-copy">Agreed with Lennart.  As Guido is fond of saying, for every language feature or standard library, there&#39;s <i>someone</i> out there using it.</span>
                &ndash;&nbsp;
                    <a href="/users/2147/jason-baker"
                       title="56126 reputation"
                       class="comment-user">Jason Baker</a>
                <span class="comment-date" dir="ltr"><span title="2009-07-16 13:21:22Z" class="relativetime-clean">Jul 16 '09 at 13:21</span></span>
                                                                            </div>
                    </td>
    </tr>
    <tr id="comment-957116" class="comment ">
        <td class="comment-actions">
            <table>
                <tbody>
                    <tr>
                        <td class=" comment-score">
                                <span title="number of &#39;useful comment&#39; votes received"
                                      class="cool">1</span>
                        </td>
                        <td>
                                <a class="comment-up comment-up-off" title="this comment adds something useful to the post">upvote</a>
                        </td>
                    </tr>
                    <tr>
                        <td>&nbsp;</td>
                        <td>
                            <a class="comment-flag" title="flag this comment as unconstructive, offensive, or spam">flag</a>
                        </td>
                    </tr>
                </tbody>
            </table>
        </td>
        <td class="comment-text">
            <div style="display: block;" class="comment-body">
                <span class="comment-copy">Changing it now would be insanity--we&#39;re just exploring why it is the way it is.  If it did late default evaluation to begin with, it wouldn&#39;t necessarily be surprising.  It&#39;s definitely true that such a core a difference of parsing would have sweeping, and probably many obscure, effects on the language as a whole.</span>
                &ndash;&nbsp;
                    <a href="/users/136829/glenn-maynard"
                       title="23955 reputation"
                       class="comment-user">Glenn Maynard</a>
                <span class="comment-date" dir="ltr"><span title="2009-07-16 18:10:05Z" class="relativetime-clean">Jul 16 '09 at 18:10</span></span>
                                                                            </div>
                    </td>
    </tr>
			    </tbody>
				    <tfoot>
					    <tr>
						    <td></td>
						    <td class="comment-form">
							    <form id="add-comment-1133737" 
							          class="" 
							          data-placeholdertext="Use comments to ask for more information or suggest improvements. Avoid comments like “+1” or “thanks”."></form>
						    </td>
					    </tr>
				    </tfoot>
		    </table>
	    </div>
			<a id="comments-link-1133737" 
			   class="comments-link " 
			   title="Use comments to ask for more information or suggest improvements. Avoid comments like “+1” or “thanks”." 
				href=#>add comment</a>
    </td>
</tr>    </table>
</div>

  
<a name="1133255"></a>
<div id="answer-1133255" class="answer" data-answerid="1133255" >
    <table>
        <tr>
            <td class="votecell">
                

<div class="vote">
    <input type="hidden" name="_id_" value="1133255">
    <a class="vote-up-off" title="This answer is useful (click again to undo)">up vote</a>
    <span class="vote-count-post ">25</span>
    <a class="vote-down-off" title="This answer is not useful (click again to undo)">down vote</a>
    


</div>

            </td>
            


<td class="answercell">
    <div class="post-text">
            <p>Well, the reason is quite simply that bindings are done when code is executed, and the function definition is executed, well... when the functions is defined.</p>

<p>Compare this:</p>

<pre><code>class BananaBunch:
    bananas = []

    def addBanana(self, banana):
        self.bananas.append(banana)
</code></pre>

<p>This code suffers from the exact same unexpected happenstance. bananas is a class attribute, and hence, when you add things to it, it's added to all classes. The reason is exactly the same.</p>

<p>It's just "How It Works", and making it work differently in the function case would probably be complicated, and in the class case likely impossible, or at least slow down object instantiation a lot, as you would have to keep the class code around and execute it when objects are created.</p>

<p>Yes, it is unexpected. But once the penny drops, it fits in perfectly with how Python works in general. In fact, it's a good teaching aid, and once you understand why this happens, you'll grok python much better.</p>

<p>That said it should feature prominently in any good Python tutorial. Because as you mention, everyone runs into this problem sooner or later.</p>

    </div>
    <table class="fw">
    <tr>
    <td class="vt">
<div class="post-menu"><a href="/a/1133255/878520" title="short permalink to this answer" class="short-link" id="link-post-1133255">share</a><span class="lsep">|</span><a href="/posts/1133255/edit" class="suggest-edit-post" title="revise and improve this post">edit</a><span class="lsep">|</span><a href="#"
       class="flag-post-link"
       title="flag this post for serious problems or moderator attention"
       data-postid="1133255">flag</a></div>                    </td>
            


    <td align="right" class="post-signature">   
       

    <div class="user-info user-hover">
    <div class="user-action-time">
        answered <span title="2009-07-15 18:54:45Z" class="relativetime">Jul 15 '09 at 18:54</span>
    </div>
    <div class="user-gravatar32">
        <a href="/users/126214/lennart-regebro"><div class="gravatar-wrapper-32"><img src="https://www.gravatar.com/avatar/9ff70f96fa67c2a3c80ecf0486138bc2?s=32&d=identicon&r=PG" alt=""></div></a>
    </div>
    <div class="user-details">
        <a href="/users/126214/lennart-regebro">Lennart Regebro</a><br>
        <span class="reputation-score" title="reputation score 51662" dir="ltr">51.7k</span><span title="12 gold badges"><span class="badge1"></span><span class="badgecount">12</span></span><span title="63 silver badges"><span class="badge2"></span><span class="badgecount">63</span></span><span title="146 bronze badges"><span class="badge3"></span><span class="badgecount">146</span></span>
    </div>
</div>
    </td>
    </tr>
    </table>
</td>
        </tr>
        
<tr>
    <td class="votecell"></td>
    <td>
	    <div id="comments-1133255" class="comments " data-localized="true">
		    <table>
			    <tbody data-remaining-comments-count="4" 
			           data-addlink-html="add comment" 
			           data-addlink-disabled="false">

    <tr id="comment-950835" class="comment ">
        <td class="comment-actions">
            <table>
                <tbody>
                    <tr>
                        <td class=" comment-score">
                                &nbsp;&nbsp;
                        </td>
                        <td>
                                <a class="comment-up comment-up-off" title="this comment adds something useful to the post">upvote</a>
                        </td>
                    </tr>
                    <tr>
                        <td>&nbsp;</td>
                        <td>
                            <a class="comment-flag" title="flag this comment as unconstructive, offensive, or spam">flag</a>
                        </td>
                    </tr>
                </tbody>
            </table>
        </td>
        <td class="comment-text">
            <div style="display: block;" class="comment-body">
                <span class="comment-copy">How do you define a class attribute that is different for each instance of a class?</span>
                &ndash;&nbsp;
                    <a href="/users/15852/kieveli"
                       title="7046 reputation"
                       class="comment-user">Kieveli</a>
                <span class="comment-date" dir="ltr"><span title="2009-07-15 19:04:39Z" class="relativetime-clean">Jul 15 '09 at 19:04</span></span>
                                                                            </div>
                    </td>
    </tr>
    <tr id="comment-950938" class="comment ">
        <td class="comment-actions">
            <table>
                <tbody>
                    <tr>
                        <td class=" comment-score">
                                <span title="number of &#39;useful comment&#39; votes received"
                                      class="warm">10</span>
                        </td>
                        <td>
                                <a class="comment-up comment-up-off" title="this comment adds something useful to the post">upvote</a>
                        </td>
                    </tr>
                    <tr>
                        <td>&nbsp;</td>
                        <td>
                            <a class="comment-flag" title="flag this comment as unconstructive, offensive, or spam">flag</a>
                        </td>
                    </tr>
                </tbody>
            </table>
        </td>
        <td class="comment-text">
            <div style="display: block;" class="comment-body">
                <span class="comment-copy">If it&#39;s different for each instance it&#39;s not a class attribute. Class attributes are attributes on the CLASS. Hence the name. Hence they are the same for all instances.</span>
                &ndash;&nbsp;
                    <a href="/users/126214/lennart-regebro"
                       title="51662 reputation"
                       class="comment-user">Lennart Regebro</a>
                <span class="comment-date" dir="ltr"><span title="2009-07-15 19:17:21Z" class="relativetime-clean">Jul 15 '09 at 19:17</span></span>
                                                                            </div>
                    </td>
    </tr>
    <tr id="comment-951383" class="comment ">
        <td class="comment-actions">
            <table>
                <tbody>
                    <tr>
                        <td class=" comment-score">
                                <span title="number of &#39;useful comment&#39; votes received"
                                      class="cool">2</span>
                        </td>
                        <td>
                                <a class="comment-up comment-up-off" title="this comment adds something useful to the post">upvote</a>
                        </td>
                    </tr>
                    <tr>
                        <td>&nbsp;</td>
                        <td>
                            <a class="comment-flag" title="flag this comment as unconstructive, offensive, or spam">flag</a>
                        </td>
                    </tr>
                </tbody>
            </table>
        </td>
        <td class="comment-text">
            <div style="display: block;" class="comment-body">
                <span class="comment-copy">He wasn&#39;t asking for a description of Python&#39;s behavior, he was asking for the rationale.  Nothing in Python is just &quot;How It Works&quot;; it all does what it does for a reason.</span>
                &ndash;&nbsp;
                    <a href="/users/136829/glenn-maynard"
                       title="23955 reputation"
                       class="comment-user">Glenn Maynard</a>
                <span class="comment-date" dir="ltr"><span title="2009-07-15 20:20:16Z" class="relativetime-clean">Jul 15 '09 at 20:20</span></span>
                                                                            </div>
                    </td>
    </tr>
    <tr id="comment-951993" class="comment ">
        <td class="comment-actions">
            <table>
                <tbody>
                    <tr>
                        <td class=" comment-score">
                                <span title="number of &#39;useful comment&#39; votes received"
                                      class="cool">2</span>
                        </td>
                        <td>
                                <a class="comment-up comment-up-off" title="this comment adds something useful to the post">upvote</a>
                        </td>
                    </tr>
                    <tr>
                        <td>&nbsp;</td>
                        <td>
                            <a class="comment-flag" title="flag this comment as unconstructive, offensive, or spam">flag</a>
                        </td>
                    </tr>
                </tbody>
            </table>
        </td>
        <td class="comment-text">
            <div style="display: block;" class="comment-body">
                <span class="comment-copy">And I gave the rationale.</span>
                &ndash;&nbsp;
                    <a href="/users/126214/lennart-regebro"
                       title="51662 reputation"
                       class="comment-user">Lennart Regebro</a>
                <span class="comment-date" dir="ltr"><span title="2009-07-15 21:56:23Z" class="relativetime-clean">Jul 15 '09 at 21:56</span></span>
                                                                            </div>
                    </td>
    </tr>
    <tr id="comment-955291" class="comment ">
        <td class="comment-actions">
            <table>
                <tbody>
                    <tr>
                        <td class=" comment-score">
                                <span title="number of &#39;useful comment&#39; votes received"
                                      class="cool">1</span>
                        </td>
                        <td>
                                <a class="comment-up comment-up-off" title="this comment adds something useful to the post">upvote</a>
                        </td>
                    </tr>
                    <tr>
                        <td>&nbsp;</td>
                        <td>
                            <a class="comment-flag" title="flag this comment as unconstructive, offensive, or spam">flag</a>
                        </td>
                    </tr>
                </tbody>
            </table>
        </td>
        <td class="comment-text">
            <div style="display: block;" class="comment-body">
                <span class="comment-copy">I wouldn&#39;t say that this &quot;it&#39;s a good teaching aid&quot;, because it&#39;s not.</span>
                &ndash;&nbsp;
                    <a href="/users/31610/tempus"
                       title="22469 reputation"
                       class="comment-user">Tempus</a>
                <span class="comment-date" dir="ltr"><span title="2009-07-16 13:20:12Z" class="relativetime-clean">Jul 16 '09 at 13:20</span></span>
                                                                            </div>
                    </td>
    </tr>
			    </tbody>
				    <tfoot>
					    <tr>
						    <td></td>
						    <td class="comment-form">
							    <form id="add-comment-1133255" 
							          class="" 
							          data-placeholdertext="Use comments to ask for more information or suggest improvements. Avoid comments like “+1” or “thanks”."></form>
						    </td>
					    </tr>
				    </tfoot>
		    </table>
	    </div>
			<a id="comments-link-1133255" 
			   class="comments-link " 
			   title="Use comments to ask for more information or suggest improvements. Avoid comments like “+1” or “thanks”." 
				href=#>add / show <b>4</b> more comments</a>
    </td>
</tr>    </table>
</div>
									<a name='new-answer'></a>
						<form id="post-form" action="/questions/1132941/answer/submit" method="post"  class="post-form">
						    <input type="hidden" id="post-id" value="1132941" />
                            <input type="hidden" id="qualityBanWarningShown" name="qualityBanWarningShown" value="false" />
							<h2 class="space">Your Answer</h2>



    

<script>
    StackExchange.ready(function() {
        initTagRenderer("".split(" "), "".split(" "));
         
        prepareEditor({
            heartbeatType: 'answer',
            bindNavPrevention: true,
            postfix: "",
            onDemand: false,
            discardSelector: ".discard-answer"
            
        });
        

    });  
</script>


<div id="post-editor" class="post-editor">

    <div style="position: relative;">     
        <div class="wmd-container">
            <div id="wmd-button-bar" class="wmd-button-bar"></div>
            <textarea id="wmd-input" class="wmd-input" name="post-text" cols="92" rows="15" tabindex="101" data-min-length=""></textarea>
        </div>
    </div>

    <div class="fl" style="margin-top: 8px; height:24px;">&nbsp;</div>
    <div id="draft-saved" class="draft-saved community-option fl" style="margin-top: 8px; height:24px; display:none;">draft saved</div>

    <div id="draft-discarded" class="draft-discarded community-option fl" style="margin-top: 8px; height:24px; display:none;">draft discarded</div>

    <div class="community-option">
        <input id="communitymode" name="communitymode" type="checkbox" >
        <label for="communitymode" title="Marking an answer community wiki encourages others to edit it by lowering the reputation barrier required to edit. However, you will not gain any upvote reputation from it. This cannot be undone.">community wiki</label>
    </div>


    <div id="wmd-preview" class="wmd-preview"></div>
    <div></div>
    <div class="edit-block">
        <input id="fkey" name="fkey" type="hidden" value="689846c83837ff0549fab295d71ca40e">
        <input id="author" name="author" type="text">
    </div>
</div>
							<div style="position: relative;">
								
							</div>
           
															<div class="form-submit cbt">
									<input id="submit-button" type="submit" value="Post Your Answer" tabindex="110">
									<a href="#" class="discard-answer dno">discard</a>
								</div>
						</form>



						<h2 class="bottom-notice" data-loc="1">
Not the answer you&#39;re looking for?							Browse other questions tagged <a href="/questions/tagged/python" class="post-tag" title="show questions tagged &#39;python&#39;" rel="tag">python</a> <a href="/questions/tagged/functional-programming" class="post-tag" title="show questions tagged &#39;functional-programming&#39;" rel="tag">functional-programming</a> <a href="/questions/tagged/language-design" class="post-tag" title="show questions tagged &#39;language-design&#39;" rel="tag">language-design</a> <a href="/questions/tagged/least-astonishment" class="post-tag" title="show questions tagged &#39;least-astonishment&#39;" rel="tag">least-astonishment</a>  or <a href="/questions/ask">ask your own question</a>.						</h2>
			</div>
		</div>
				<div id="sidebar" class="show-votes">
						    <div class="module question-stats">
			        <table id="qinfo">
			            <tr>
			                <td>
			                    <p class="label-key">asked</p>
			                </td>
			                <td style="padding-left: 10px">
			                    <p class="label-key" title="2009-07-15 18:00:37Z"><b>4 years ago</b></p>
			                </td>
			            </tr>
			            <tr>
			                <td>
			                    <p class="label-key">viewed</p>
			                </td>

			                <td style="padding-left: 10px">
			                    <p class="label-key">
			                        <b>40798 times</b>
			                    </p>
			                </td>
			            </tr>
			                <tr>
			                    <td>
			                        <p class="label-key">active</p>
			                    </td>
			                    <td style="padding-left: 10px">
			                        <p class="label-key"><b><a href="?lastactivity" class="lastactivity-link" title="2014-04-15 09:27:35Z">2 months ago</a></b></p>
			                    </td>
			                </tr>
			        </table>
			    </div>
			<div class="module community-bulletin" data-tracker="cb=1">
    <h4>Community Bulletin</h4>
    <div class="related">

            <div class="spacer">
                <div class="bulletin-item-type"><a href="http://meta.stackoverflow.com" class="event-date" target="_blank">meta</a></div>
                <div class="bulletin-item-content">
                    <a href="http://meta.stackoverflow.com/questions/261021/bounty-box-overflows-add-comment" class="question-hyperlink" target="_blank">Bounty box overflows &ldquo;add comment&rdquo;</a>
                </div>
                <br class="cbt" />
            </div>
            <div class="spacer">
                <div class="bulletin-item-type"><a href="http://meta.stackoverflow.com" class="event-date" target="_blank">meta</a></div>
                <div class="bulletin-item-content">
                    <a href="http://meta.stackoverflow.com/questions/261030/is-it-allowed-to-bump-a-question-by-doing-an-unnecessary-edit" class="question-hyperlink" target="_blank">Is it allowed to bump a question by doing an unnecessary edit?</a>
                </div>
                <br class="cbt" />
            </div>
            <div class="spacer">
                <div class="bulletin-item-type"><a href="http://meta.stackoverflow.com" class="event-date" target="_blank">meta</a></div>
                <div class="bulletin-item-content">
                    <a href="http://meta.stackoverflow.com/questions/260994/what-to-do-when-a-language-barrier-makes-a-post-unclear" class="question-hyperlink" target="_blank">What to do when a language barrier makes a post unclear?</a>
                </div>
                <br class="cbt" />
            </div>
            <div class="spacer">
                <div class="bulletin-item-type"><a href="http://meta.stackoverflow.com" class="event-date" target="_blank">meta</a></div>
                <div class="bulletin-item-content">
                    <a href="http://meta.stackoverflow.com/questions/260828/do-we-need-a-close-reason-for-zero-effort-questions" class="question-hyperlink" target="_blank">Do we need a close reason for zero-effort questions?</a>
                </div>
                <br class="cbt" />
            </div>
    </div>
</div>			
			<script>
                var ados = ados || {};ados.run = ados.run || [];
                ados.run.push(function() { ados_add_placement(22,8277,"adzerk1867483976",17).setZone(45) ; });                    
            </script>
            <div class="everyonelovesstackoverflow" id="adzerk1867483976">
            </div>  
    <div id="hireme">
        <script>
window.careers_adurl="//careers.stackoverflow.com/gethired/js",window.careers_cssurl="//cdn-careers.sstatic.net/careers/gethired/sidebar.min.css?v=88f3fd5e2263",window.careers_leaderboardcssurl="{leaderboardcssurl}",window.careers_companycssurl="//cdn-careers.sstatic.net/careers/gethired/company",window.careers_adselector="div#hireme",StackExchange.ready(function(){$.ajax({url:"//cdn-careers.sstatic.net/careers/gethired/loader.min.js?v=c0dae82ac40e",dataType:"script",cache:!0})});        </script>
    </div>
			  
    
            <div class="module sidebar-linked">
	<h4 id="h-linked">Linked</h4>
	<div class="linked" data-tracker="lq=1">
<div class="spacer">
	<a href="/q/6838255" title="Vote score (upvotes - downvotes)">
		<div class="answer-votes answered-accepted default">11</div>
	</a>
	<a href="/questions/6838255/python-class-function-default-variables-are-class-objects" class="question-hyperlink">Python class function default variables are class objects?</a>
</div><div class="spacer">
	<a href="/q/6435793" title="Vote score (upvotes - downvotes)">
		<div class="answer-votes answered-accepted default">12</div>
	</a>
	<a href="/questions/6435793/optional-parameters-in-python-functions-and-their-default-values" class="question-hyperlink">Optional parameters in Python functions and their default values</a>
</div><div class="spacer">
	<a href="/q/2899643" title="Vote score (upvotes - downvotes)">
		<div class="answer-votes answered-accepted default">1</div>
	</a>
	<a href="/questions/2899643/python-constructor-does-weird-things-with-optional-parameters" class="question-hyperlink">Python constructor does weird things with optional parameters</a>
</div><div class="spacer">
	<a href="/q/10123968" title="Vote score (upvotes - downvotes)">
		<div class="answer-votes answered-accepted default">1</div>
	</a>
	<a href="/questions/10123968/python-class-constructor-with-default-arguments" class="question-hyperlink">Python class constructor with default arguments</a>
</div><div class="spacer">
	<a href="/q/6020960" title="Vote score (upvotes - downvotes)">
		<div class="answer-votes answered-accepted default">1</div>
	</a>
	<a href="/questions/6020960/python-dictionary-as-instance-variable" class="question-hyperlink">Python: Dictionary as instance variable</a>
</div><div class="spacer">
	<a href="/q/16549768" title="Vote score (upvotes - downvotes)">
		<div class="answer-votes answered-accepted default">2</div>
	</a>
	<a href="/questions/16549768/lifetime-of-default-function-arguments-in-python" class="question-hyperlink">Lifetime of default function arguments in python</a>
</div><div class="spacer">
	<a href="/q/8853446" title="Vote score (upvotes - downvotes)">
		<div class="answer-votes answered-accepted default">1</div>
	</a>
	<a href="/questions/8853446/python-recursive-functions-and-empty-strings" class="question-hyperlink">Python recursive functions and empty strings</a>
</div><div class="spacer">
	<a href="/q/9791610" title="Vote score (upvotes - downvotes)">
		<div class="answer-votes answered-accepted default">2</div>
	</a>
	<a href="/questions/9791610/python-problems-with-a-list-of-class-objects-all-items-are-the-same" class="question-hyperlink">python: problems with a list of class objects: All items are the same</a>
</div><div class="spacer">
	<a href="/q/9887180" title="Vote score (upvotes - downvotes)">
		<div class="answer-votes answered-accepted default">3</div>
	</a>
	<a href="/questions/9887180/the-value-of-an-empty-list-in-function-parameter-example-here" class="question-hyperlink">The value of an empty list in function parameter, example here</a>
</div><div class="spacer">
	<a href="/q/6829364" title="Vote score (upvotes - downvotes)">
		<div class="answer-votes answered-accepted default">1</div>
	</a>
	<a href="/questions/6829364/python-unexpected-behaviour-when-using-a-named-constructor-argument-with-empty" class="question-hyperlink">Python - unexpected behaviour when using a named constructor argument with empty list default value</a>
</div>					<div class="spacer more">
				<a href="http://stackoverflow.com/questions/linked/1132941">see more linked questions…</a>
			</div>
	</div>
</div>

				<div class="module sidebar-related">
					<h4 id="h-related">Related</h4>
                    <div class="related js-gps-related-questions" data-tracker="rq=1">
                        <div class="spacer">
<a href="/q/15995" title="Vote score (upvotes - downvotes)">
    <div class="answer-votes default">65
    </div>
</a><a href="/questions/15995/useful-code-which-uses-reduce-in-python" class="question-hyperlink">Useful code which uses reduce() in python</a>
</div>
<div class="spacer">
<a href="/q/1651154" title="Vote score (upvotes - downvotes)">
    <div class="answer-votes answered-accepted default">21
    </div>
</a><a href="/questions/1651154/why-are-default-arguments-evaluated-at-definition-time-in-python" class="question-hyperlink">Why are default arguments evaluated at definition time in Python?</a>
</div>
<div class="spacer">
<a href="/q/3946235" title="Vote score (upvotes - downvotes)">
    <div class="answer-votes default">-2
    </div>
</a><a href="/questions/3946235/what-are-the-implications-of-using-mutable-types-as-default-arguments-in-python" class="question-hyperlink">What are the implications of using mutable types as default arguments in Python?</a>
</div>
<div class="spacer">
<a href="/q/4211301" title="Vote score (upvotes - downvotes)">
    <div class="answer-votes answered-accepted default">0
    </div>
</a><a href="/questions/4211301/python-catching-mutable-default-arguments" class="question-hyperlink">Python: catching mutable default arguments</a>
</div>
<div class="spacer">
<a href="/q/6902235" title="Vote score (upvotes - downvotes)">
    <div class="answer-votes answered-accepted default">42
    </div>
</a><a href="/questions/6902235/why-are-slices-in-python-3-still-copies-and-not-views" class="question-hyperlink">Why are slices in Python 3 still copies and not views?</a>
</div>
<div class="spacer">
<a href="/q/8257372" title="Vote score (upvotes - downvotes)">
    <div class="answer-votes default">0
    </div>
</a><a href="/questions/8257372/mutable-default-arguments-in-python" class="question-hyperlink">Mutable default arguments in Python</a>
</div>
<div class="spacer">
<a href="/q/9039191" title="Vote score (upvotes - downvotes)">
    <div class="answer-votes answered-accepted default">2
    </div>
</a><a href="/questions/9039191/mutable-default-method-arguments-in-python" class="question-hyperlink">Mutable Default Method Arguments In Python</a>
</div>
<div class="spacer">
<a href="/q/13884378" title="Vote score (upvotes - downvotes)">
    <div class="answer-votes answered-accepted default">4
    </div>
</a><a href="/questions/13884378/python-trying-to-collapse-a-function-mapping-on-the-second-argument" class="question-hyperlink">Python: trying to collapse a function mapping on the second argument</a>
</div>
<div class="spacer">
<a href="/q/19483471" title="Vote score (upvotes - downvotes)">
    <div class="answer-votes default">1
    </div>
</a><a href="/questions/19483471/mutable-default-value-in-python" class="question-hyperlink">mutable default value in python</a>
</div>
<div class="spacer">
<a href="/q/19809575" title="Vote score (upvotes - downvotes)">
    <div class="answer-votes answered-accepted default">1
    </div>
</a><a href="/questions/19809575/unexpected-python-behavior-related-to-default-argument-for-mutable-object" class="question-hyperlink">Unexpected python behavior related to default argument for mutable object</a>
</div>

                    </div>
				</div>
            
<div id="hot-network-questions" class="module">
    <h4>
        <a href="//stackexchange.com/questions?tab=hot" 
           class="js-gps-track" 
           data-gps-track="posts_hot_network.click({ item_type:1, location:11 })">
            Hot Network Questions
        </a>
    </h4>
    <ul>
            <li >
                <div class="favicon favicon-tex" title="TeX - LaTeX Stack Exchange"></div><a href="http://tex.stackexchange.com/questions/185790/is-there-an-ex-unit-equivalent-fot-the-capital-x-in-latex" class="js-gps-track" data-gps-track="site.switch({ item_type:11, target_site:85 }); posts_hot_network.click({ item_type:2, location:11 })">
                    Is there an `ex` unit equivalent fot the capital &#39;X&#39; in LaTeX
                </a>

            </li>
            <li >
                <div class="favicon favicon-expressionengine" title="ExpressionEngine® Answers"></div><a href="http://expressionengine.stackexchange.com/questions/23842/what-is-best-practice-for-protecting-templates-saved-as-files" class="js-gps-track" data-gps-track="site.switch({ item_type:11, target_site:471 }); posts_hot_network.click({ item_type:2, location:11 })">
                    What is best practice for protecting templates saved as files?
                </a>

            </li>
            <li >
                <div class="favicon favicon-unix" title="Unix &amp; Linux Stack Exchange"></div><a href="http://unix.stackexchange.com/questions/138288/grep-for-all-the-lines-that-doest-not-have-a-particular-word" class="js-gps-track" data-gps-track="site.switch({ item_type:11, target_site:106 }); posts_hot_network.click({ item_type:2, location:11 })">
                    grep for all the lines that doest not have a particular word
                </a>

            </li>
            <li >
                <div class="favicon favicon-scifi" title="Science Fiction &amp; Fantasy Stack Exchange"></div><a href="http://scifi.stackexchange.com/questions/59650/why-didnt-sauron-guard-mount-doom" class="js-gps-track" data-gps-track="site.switch({ item_type:11, target_site:186 }); posts_hot_network.click({ item_type:2, location:11 })">
                    Why didn&#39;t Sauron guard Mount Doom?
                </a>

            </li>
            <li >
                <div class="favicon favicon-tex" title="TeX - LaTeX Stack Exchange"></div><a href="http://tex.stackexchange.com/questions/185811/how-to-add-continued-from-previous-page-hint-to-page-breaking-mdframed" class="js-gps-track" data-gps-track="site.switch({ item_type:11, target_site:85 }); posts_hot_network.click({ item_type:2, location:11 })">
                    How to add &quot;continued from previous page&quot; hint to page breaking **mdframed**?
                </a>

            </li>
            <li class="dno js-hidden">
                <div class="favicon favicon-serverfault" title="Server Fault"></div><a href="http://serverfault.com/questions/606824/illegal-activities-prevention-system-child-pornography-animal-cruelty" class="js-gps-track" data-gps-track="site.switch({ item_type:11, target_site:2 }); posts_hot_network.click({ item_type:2, location:11 })">
                    Illegal activities prevention system (child pornography, animal cruelty, …)
                </a>

            </li>
            <li class="dno js-hidden">
                <div class="favicon favicon-security" title="Information Security Stack Exchange"></div><a href="http://security.stackexchange.com/questions/61412/anonymity-on-facebook-how-do-they-suggest-people-i-should-know" class="js-gps-track" data-gps-track="site.switch({ item_type:11, target_site:162 }); posts_hot_network.click({ item_type:2, location:11 })">
                    Anonymity on Facebook - how do they suggest people I should know?
                </a>

            </li>
            <li class="dno js-hidden">
                <div class="favicon favicon-english" title="English Language &amp; Usage Stack Exchange"></div><a href="http://english.stackexchange.com/questions/178972/they-were-seduced-vs-they-were-swayed" class="js-gps-track" data-gps-track="site.switch({ item_type:11, target_site:97 }); posts_hot_network.click({ item_type:2, location:11 })">
                    &quot;They were seduced&quot; vs. &quot;They were swayed&quot;
                </a>

            </li>
            <li class="dno js-hidden">
                <div class="favicon favicon-programmers" title="Programmers Stack Exchange"></div><a href="http://programmers.stackexchange.com/questions/245393/why-was-c-made-with-new-and-virtualoverride-keywords-unlike-java" class="js-gps-track" data-gps-track="site.switch({ item_type:11, target_site:131 }); posts_hot_network.click({ item_type:2, location:11 })">
                    Why was C# made with &quot;new&quot; and &quot;virtual+override&quot; keywords unlike Java?
                </a>

            </li>
            <li class="dno js-hidden">
                <div class="favicon favicon-askubuntu" title="Ask Ubuntu"></div><a href="http://askubuntu.com/questions/485495/how-to-both-display-a-command-lines-output-on-console-and-save-the-output-into" class="js-gps-track" data-gps-track="site.switch({ item_type:11, target_site:89 }); posts_hot_network.click({ item_type:2, location:11 })">
                    How to both display a command line&#39;s output on console and save the output into a text file?
                </a>

            </li>
            <li class="dno js-hidden">
                <div class="favicon favicon-serverfault" title="Server Fault"></div><a href="http://serverfault.com/questions/606806/how-can-i-prevent-the-compromise-of-a-domain-controller-on-esx-stored-in-a-unsec" class="js-gps-track" data-gps-track="site.switch({ item_type:11, target_site:2 }); posts_hot_network.click({ item_type:2, location:11 })">
                    How can I prevent the compromise of a Domain Controller on ESX stored in a unsecured location?
                </a>

            </li>
            <li class="dno js-hidden">
                <div class="favicon favicon-gis" title="Geographic Information Systems Stack Exchange"></div><a href="http://gis.stackexchange.com/questions/102685/using-updatecursor-to-update-a-field-based-on-other-field-values" class="js-gps-track" data-gps-track="site.switch({ item_type:11, target_site:79 }); posts_hot_network.click({ item_type:2, location:11 })">
                    Using UpdateCursor to update a field based on other field values
                </a>

            </li>
            <li class="dno js-hidden">
                <div class="favicon favicon-gaming" title="Arqade"></div><a href="http://gaming.stackexchange.com/questions/173170/what-is-this-game" class="js-gps-track" data-gps-track="site.switch({ item_type:11, target_site:41 }); posts_hot_network.click({ item_type:2, location:11 })">
                    What is this game?
                </a>

            </li>
            <li class="dno js-hidden">
                <div class="favicon favicon-softwarerecs" title="Software Recommendations Stack Exchange"></div><a href="http://softwarerecs.stackexchange.com/questions/7121/type-special-characters-directly-without-pressing-shift-key-in-win" class="js-gps-track" data-gps-track="site.switch({ item_type:11, target_site:536 }); posts_hot_network.click({ item_type:2, location:11 })">
                    Type special characters {!@#$%^&amp;*()} directly without pressing shift key in win 7 and 8
                </a>

            </li>
            <li class="dno js-hidden">
                <div class="favicon favicon-serverfault" title="Server Fault"></div><a href="http://serverfault.com/questions/606255/what-is-a-t1-in-modern-terms" class="js-gps-track" data-gps-track="site.switch({ item_type:11, target_site:2 }); posts_hot_network.click({ item_type:2, location:11 })">
                    What is a T1 in modern terms?
                </a>

            </li>
            <li class="dno js-hidden">
                <div class="favicon favicon-academia" title="Academia Stack Exchange"></div><a href="http://academia.stackexchange.com/questions/23693/what-should-i-do-if-i-have-an-idea-but-cant-work-on-it-immediately" class="js-gps-track" data-gps-track="site.switch({ item_type:11, target_site:415 }); posts_hot_network.click({ item_type:2, location:11 })">
                    What should I do if I have an idea but can&#39;t work on it immediately?
                </a>

            </li>
            <li class="dno js-hidden">
                <div class="favicon favicon-mathoverflow" title="MathOverflow"></div><a href="http://mathoverflow.net/questions/172290/codes-in-which-a-group-of-words-are-pairwise-different-at-a-certain-position" class="js-gps-track" data-gps-track="site.switch({ item_type:11, target_site:504 }); posts_hot_network.click({ item_type:2, location:11 })">
                    &quot;Codes&quot; in which a group of words are pairwise different at a certain position
                </a>

            </li>
            <li class="dno js-hidden">
                <div class="favicon favicon-superuser" title="Super User"></div><a href="http://superuser.com/questions/771202/all-computer-changes-discarded-after-restart" class="js-gps-track" data-gps-track="site.switch({ item_type:11, target_site:3 }); posts_hot_network.click({ item_type:2, location:11 })">
                    All computer changes discarded after restart
                </a>

            </li>
            <li class="dno js-hidden">
                <div class="favicon favicon-workplace" title="The Workplace Stack Exchange"></div><a href="http://workplace.stackexchange.com/questions/27555/team-members-spending-too-much-time-on-stack-overflow" class="js-gps-track" data-gps-track="site.switch({ item_type:11, target_site:423 }); posts_hot_network.click({ item_type:2, location:11 })">
                    Team members spending too much time on Stack Overflow
                </a>

            </li>
            <li class="dno js-hidden">
                <div class="favicon favicon-photo" title="Photography Stack Exchange"></div><a href="http://photo.stackexchange.com/questions/52185/should-i-leave-the-lens-switched-to-af-or-mf-for-storage" class="js-gps-track" data-gps-track="site.switch({ item_type:11, target_site:61 }); posts_hot_network.click({ item_type:2, location:11 })">
                    Should I leave the lens switched to AF or MF for storage?
                </a>

            </li>
            <li class="dno js-hidden">
                <div class="favicon favicon-scifi" title="Science Fiction &amp; Fantasy Stack Exchange"></div><a href="http://scifi.stackexchange.com/questions/59741/where-does-orphan-black-take-place" class="js-gps-track" data-gps-track="site.switch({ item_type:11, target_site:186 }); posts_hot_network.click({ item_type:2, location:11 })">
                    Where does Orphan Black take place?
                </a>

            </li>
            <li class="dno js-hidden">
                <div class="favicon favicon-cs" title="Computer Science Stack Exchange"></div><a href="http://cs.stackexchange.com/questions/27860/whats-the-difference-between-a-binary-search-tree-and-a-binary-heap" class="js-gps-track" data-gps-track="site.switch({ item_type:11, target_site:419 }); posts_hot_network.click({ item_type:2, location:11 })">
                    What&#39;s the difference between a binary search tree and a binary heap?
                </a>

            </li>
            <li class="dno js-hidden">
                <div class="favicon favicon-stats" title="Cross Validated"></div><a href="http://stats.stackexchange.com/questions/104146/if-x-and-y-are-correlated-but-y-and-z-are-independent-is-x-and-z-always-indepe" class="js-gps-track" data-gps-track="site.switch({ item_type:11, target_site:65 }); posts_hot_network.click({ item_type:2, location:11 })">
                    If X and Y are correlated, but Y and Z are independent, is X and Z always independent?
                </a>

            </li>
            <li class="dno js-hidden">
                <div class="favicon favicon-music" title="Musical Practice &amp; Performance Stack Exchange"></div><a href="http://music.stackexchange.com/questions/20395/learning-to-create-melodies" class="js-gps-track" data-gps-track="site.switch({ item_type:11, target_site:240 }); posts_hot_network.click({ item_type:2, location:11 })">
                    Learning to create melodies
                </a>

            </li>
    </ul>

        <a href="#" 
           class="show-more js-show-more js-gps-track" 
           data-gps-track="posts_hot_network.click({ item_type:3, location:11 })">
            more hot questions
        </a>
</div>
		</div>
	
<div id="feed-link">
    <div id="feed-link-text">
        <a href="/feeds/question/1132941" title="feed of this question and its answers">
            <span class="feed-icon"></span>question feed
        </a>
    </div>
</div>	<script>
StackExchange.ready(function(){$.get('/posts/1132941/ivc/2a56');});
</script>
<noscript>
    <div><img src="/posts/1132941/ivc/2a56" class="dno" alt="" width="0" height="0"></div>
</noscript><div style="display:none" id="prettify-lang">lang-py</div></div>



        </div>
    </div>
    <div id="footer" class="categories">
        <div class="footerwrap">
            <div id="footer-menu">
                <div class="top-footer-links">
                        <a href="/tour">tour</a>
                    <a href="/help">help</a>
                    <a href="http://blog.stackoverflow.com?blb=1">blog</a>
                        <a href="http://chat.stackoverflow.com">chat</a>
                    <a href="http://data.stackexchange.com">data</a>
                    <a href="http://stackexchange.com/legal">legal</a>
                    <a href="http://stackexchange.com/legal/privacy-policy">privacy policy</a>
                    <a href="http://stackexchange.com/work-here">work here</a>
                    <a href="http://stackexchange.com/mediakit">advertising info</a>

                    <a onclick='StackExchange.switchMobile("on")'>mobile</a>
                    <b><a href="/contact">contact us</a></b>
                        <b><a href="http://meta.stackoverflow.com">feedback</a></b>
                    
                </div>
                <div id="footer-sites">
                    <table>
    <tr>
            <th colspan=3>
                Technology
            </th>
            <th >
                Life / Arts
            </th>
            <th >
                Culture / Recreation
            </th>
            <th >
                Science
            </th>
            <th >
                Other
            </th>
    </tr>
    <tr>
            <td>
                <ol>
                        <li><a href="http://stackoverflow.com" title="professional and enthusiast programmers">Stack Overflow</a></li>
                        <li><a href="http://serverfault.com" title="professional system and network administrators">Server Fault</a></li>
                        <li><a href="http://superuser.com" title="computer enthusiasts and power users">Super User</a></li>
                        <li><a href="http://webapps.stackexchange.com" title="power users of web applications">Web Applications</a></li>
                        <li><a href="http://askubuntu.com" title="Ubuntu users and developers">Ask Ubuntu</a></li>
                        <li><a href="http://webmasters.stackexchange.com" title="pro webmasters">Webmasters</a></li>
                        <li><a href="http://gamedev.stackexchange.com" title="professional and independent game developers">Game Development</a></li>
                        <li><a href="http://tex.stackexchange.com" title="users of TeX, LaTeX, ConTeXt, and related typesetting systems">TeX - LaTeX</a></li>
                            </ol></td><td><ol>
                        <li><a href="http://programmers.stackexchange.com" title="professional programmers interested in conceptual questions about software development">Programmers</a></li>
                        <li><a href="http://unix.stackexchange.com" title="users of Linux, FreeBSD and other Un*x-like operating systems.">Unix &amp; Linux</a></li>
                        <li><a href="http://apple.stackexchange.com" title="power users of Apple hardware and software">Ask Different (Apple)</a></li>
                        <li><a href="http://wordpress.stackexchange.com" title="WordPress developers and administrators">WordPress Development</a></li>
                        <li><a href="http://gis.stackexchange.com" title="cartographers, geographers and GIS professionals">Geographic Information Systems</a></li>
                        <li><a href="http://electronics.stackexchange.com" title="electronics and electrical engineering professionals, students, and enthusiasts">Electrical Engineering</a></li>
                        <li><a href="http://android.stackexchange.com" title="enthusiasts and power users of the Android operating system">Android Enthusiasts</a></li>
                        <li><a href="http://security.stackexchange.com" title="Information security professionals">Information Security</a></li>
                            </ol></td><td><ol>
                        <li><a href="http://dba.stackexchange.com" title="database professionals who wish to improve their database skills and learn from others in the community">Database Administrators</a></li>
                        <li><a href="http://drupal.stackexchange.com" title="Drupal developers and administrators">Drupal Answers</a></li>
                        <li><a href="http://sharepoint.stackexchange.com" title="SharePoint enthusiasts">SharePoint</a></li>
                        <li><a href="http://ux.stackexchange.com" title="user experience researchers and experts">User Experience</a></li>
                        <li><a href="http://mathematica.stackexchange.com" title="users of Mathematica">Mathematica</a></li>
                    
                        <li>
                            <a href="http://stackexchange.com/sites#technology" class="more">
                                more (14)
                            </a>
                        </li>
                </ol>
            </td>
            <td>
                <ol>
                        <li><a href="http://photo.stackexchange.com" title="professional, enthusiast and amateur photographers">Photography</a></li>
                        <li><a href="http://scifi.stackexchange.com" title="science fiction and fantasy enthusiasts">Science Fiction &amp; Fantasy</a></li>
                        <li><a href="http://graphicdesign.stackexchange.com" title="professional graphic designers and non-designers trying to do their own graphic design">Graphic Design</a></li>
                        <li><a href="http://cooking.stackexchange.com" title="professional and amateur chefs">Seasoned Advice (cooking)</a></li>
                        <li><a href="http://diy.stackexchange.com" title="contractors and serious DIYers">Home Improvement</a></li>
                        <li><a href="http://money.stackexchange.com" title="people who want to be financially literate">Personal Finance &amp; Money</a></li>
                        <li><a href="http://academia.stackexchange.com" title="academics and those enrolled in higher education">Academia</a></li>
                    
                        <li>
                            <a href="http://stackexchange.com/sites#lifearts" class="more">
                                more (10)
                            </a>
                        </li>
                </ol>
            </td>
            <td>
                <ol>
                        <li><a href="http://english.stackexchange.com" title="linguists, etymologists, and serious English language enthusiasts">English Language &amp; Usage</a></li>
                        <li><a href="http://skeptics.stackexchange.com" title="scientific skepticism">Skeptics</a></li>
                        <li><a href="http://judaism.stackexchange.com" title="those who base their lives on Jewish law and tradition and anyone interested in learning more">Mi Yodeya (Judaism)</a></li>
                        <li><a href="http://travel.stackexchange.com" title="road warriors and seasoned travelers">Travel</a></li>
                        <li><a href="http://christianity.stackexchange.com" title="committed Christians, experts in Christianity and those interested in learning more">Christianity</a></li>
                        <li><a href="http://gaming.stackexchange.com" title="passionate videogamers on all platforms">Arqade (gaming)</a></li>
                        <li><a href="http://bicycles.stackexchange.com" title="people who build and repair bicycles, people who train cycling, or commute on bicycles">Bicycles</a></li>
                        <li><a href="http://rpg.stackexchange.com" title="gamemasters and players of tabletop, paper-and-pencil role-playing games">Role-playing Games</a></li>
                    
                        <li>
                            <a href="http://stackexchange.com/sites#culturerecreation" class="more">
                                more (21)
                            </a>
                        </li>
                </ol>
            </td>
            <td>
                <ol>
                        <li><a href="http://math.stackexchange.com" title="people studying math at any level and professionals in related fields">Mathematics</a></li>
                        <li><a href="http://stats.stackexchange.com" title="people interested in statistics, machine learning, data analysis, data mining, and data visualization">Cross Validated (stats)</a></li>
                        <li><a href="http://cstheory.stackexchange.com" title="theoretical computer scientists and researchers in related fields">Theoretical Computer Science</a></li>
                        <li><a href="http://physics.stackexchange.com" title="active researchers, academics and students of physics">Physics</a></li>
                        <li><a href="http://mathoverflow.net" title="professional mathematicians">MathOverflow</a></li>
                    
                        <li>
                            <a href="http://stackexchange.com/sites#science" class="more">
                                more (7)
                            </a>
                        </li>
                </ol>
            </td>
            <td>
                <ol>
                        <li><a href="http://stackapps.com" title="apps, scripts, and development with the Stack Exchange API">Stack Apps</a></li>
                        <li><a href="http://meta.stackexchange.com" title="meta-discussion of the Stack Exchange family of Q&amp;A websites">Meta Stack Exchange</a></li>
                        <li><a href="http://area51.stackexchange.com" title="proposing new sites in the Stack Exchange network">Area 51</a></li>
                        <li><a href="http://careers.stackoverflow.com">Stack Overflow Careers</a></li>
                    
                </ol>
            </td>
    </tr>
</table>
                </div>
            </div>

            <div id="copyright">
                site design / logo &#169; 2014 stack exchange inc; user contributions licensed under <a href="http://creativecommons.org/licenses/by-sa/3.0/" rel="license">cc by-sa 3.0</a> 
                with <a href="http://blog.stackoverflow.com/2009/06/attribution-required/" rel="license">attribution required</a>
            </div>
            <div id="svnrev">
                rev 2014.6.20.1670
            </div>
            
        </div>
    </div>
    <noscript>
        <div id="noscript-warning">Stack Overflow works best with JavaScript enabled<img src="http://pixel.quantserve.com/pixel/p-c1rF4kxgLUzNc.gif" alt="" class="dno"></div>
    </noscript>
<script>var p = "http", d = "static"; if (document.location.protocol == "https:") { p += "s"; d = "engine"; } var z = document.createElement("script"); z.type = "text/javascript"; z.async = true; z.src = p + "://" + d + ".adzerk.net/ados.js"; var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(z, s);</script>
<script>
    var ados = ados || {};
    ados.run = ados.run || [];
    ados.run.push(function () { ados_setKeywords('python,functional-programming,language-design,least-astonishment,x-user-registered,x-200plus-rep');; ados_load(); });         
</script>

    <script>
        (function (i, s, o, g, r, a, m) {
            i['GoogleAnalyticsObject'] = r; i[r] = i[r] || function () { (i[r].q = i[r].q || []).push(arguments) }, i[r].l = 1 * new Date(); a = s.createElement(o),
            m = s.getElementsByTagName(o)[0]; a.async = 1; a.src = g; m.parentNode.insertBefore(a, m);
        })(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');
        ga('create', 'UA-5620270-1');        
        ga('set', 'dimension1', '471007');         
        ga('set', 'dimension2', '|python|functional-programming|language-design|least-astonishment|');         
        ga('send', 'pageview');
        var _qevents = _qevents || [],
            _comscore = _comscore || [];
        (function () {
            var ssl='https:'==document.location.protocol,
                s=document.getElementsByTagName('script')[0],
                qc=document.createElement('script');
            qc.async=true;
            qc.src=(ssl?'https://secure':'http://edge')+'.quantserve.com/quant.js';
            s.parentNode.insertBefore(qc, s);
            var sc=document.createElement('script');
            sc.async=true;
            sc.src=(ssl?'https://sb':'http://b') + '.scorecardresearch.com/beacon.js';
            s.parentNode.insertBefore(sc, s);
        })();
        _comscore.push({ c1: "2", c2: "17440561" });
        _qevents.push({ qacct: "p-c1rF4kxgLUzNc" });
    </script>        
    
    </body>
</html>